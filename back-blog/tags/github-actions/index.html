<!doctype html>
<html lang="ko" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-back-blog">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">&quot;Github Actions&quot; 태그로 연결된 2개 게시물개의 게시물이 있습니다. | Celuveat</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://celuveat.github.io/team-blog/back-blog/tags/github-actions"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" property="og:title" content="&quot;Github Actions&quot; 태그로 연결된 2개 게시물개의 게시물이 있습니다. | Celuveat"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/team-blog/../static/img/logo/favicon.ico"><link data-rh="true" rel="canonical" href="https://celuveat.github.io/team-blog/back-blog/tags/github-actions"><link data-rh="true" rel="alternate" href="https://celuveat.github.io/team-blog/back-blog/tags/github-actions" hreflang="ko"><link data-rh="true" rel="alternate" href="https://celuveat.github.io/team-blog/back-blog/tags/github-actions" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-DBVZBC9QT5","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DBVZBC9QT5"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DBVZBC9QT5",{anonymize_ip:!0})</script>


<link rel="alternate" type="application/rss+xml" href="/team-blog/back-blog/rss.xml" title="Celuveat RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/team-blog/back-blog/atom.xml" title="Celuveat Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/team-blog/front-blog/rss.xml" title="Celuveat RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/team-blog/front-blog/atom.xml" title="Celuveat Atom Feed"><link rel="stylesheet" href="/team-blog/assets/css/styles.6a887e90.css">
<link rel="preload" href="/team-blog/assets/js/runtime~main.053db125.js" as="script">
<link rel="preload" href="/team-blog/assets/js/main.82af37fe.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/team-blog/"><div class="navbar__logo"><img src="/team-blog/img/logo/logo-black.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/team-blog/img/logo/logo-white.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/team-blog/front-blog">프론트엔드</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/team-blog/back-blog">백엔드</a><a class="navbar__item navbar__link" href="/team-blog/docs/셀럽잇">팀 문서</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/celuveat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="최근 블로그 문서 둘러보기"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/team-blog/back-blog/mallang/cicd-series/cicd-2/cicd2">셀럽잇 CI/CD 발전기 - (2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/team-blog/back-blog/mallang/oauth/oauth">OAuth2.0 도입기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/team-blog/back-blog/mallang/cicd-series/cicd-1/cicd">셀럽잇 CI/CD 발전기 - (1)</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>&quot;Github Actions&quot; 태그로 연결된 2개 게시물개의 게시물이 있습니다.</h1><a href="/team-blog/back-blog/tags">모든 태그 보기</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/team-blog/back-blog/mallang/cicd-series/cicd-2/cicd2">셀럽잇 CI/CD 발전기 - (2)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-08-01T00:00:00.000Z" itemprop="datePublished">2023년 8월 1일</time> · <!-- -->약 9분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/shin-mallang" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/52229930?v=4" alt="donghun Shin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/shin-mallang" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">donghun Shin</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-서론">🧐 서론<a href="#-서론" class="hash-link" aria-label="🧐 서론에 대한 직접 링크" title="🧐 서론에 대한 직접 링크">​</a></h2><p>안녕하세요. 셀럽잇의 백엔드 말랑입니다.</p><p>3차 데모데이를 앞두고 프로덕션 서버를 준비하다 보니, 셀럽잇 팀의 CI/CD 방식에 변경 사항이 생겨서 이를 공유하기 위해 찾아왔습니다 😎</p><p>첫번째 변경점은 <strong>Git Submodule</strong>을 도입했다는 것입니다. <br></p><p>기능이 추가됨에 따라 <strong>Dev</strong> 환경과 <strong>Prod</strong> 환경에서 각각 설정해 주어야 하는 변수들이 많아지다 보니<br>
이들이 <strong>추가되거나 변경될 때마다</strong> 매번 <strong>서버에 들어가 배포 스크립트에 추가하고 수정</strong>해주는 작업이 많이 번거로웠습니다.<br>
또한 반드시 우테코 교육장에서만 ec2 서버에 ssh 로 접근을 할 수 있도록 설정되어있기 때문에, <strong>집에 간 상황에서 설정을 바꾸어 줄 방법이 없었습니다</strong>.</p><p>이러한 문제점을 해결하기 위해 저희는 <strong>Git Submodule</strong>을 도입했는데요,
서브모듈에 대한 기본적인 설명은 <a href="https://ttl-blog.tistory.com/1346" target="_blank" rel="noopener noreferrer">말랑이의 블로그</a>에 나와있으므로 해당 글에서는 생략하도록 하겠습니다.</p><p>대신 서브 모듈을 도입하면서 발생했던 이슈들을 해결하는 과정을 서술하겠습니다.</p><br><br><p>두번째 변경점은 <strong>프로덕션 서버를 위한 배포 스크립트가 작성</strong>된 것입니다. <br></p><p>이전 글에서 작성하지 않은 <strong>Prod 서버를 위한 CD workflow</strong> 설정을 중심적으로 살펴보고,<br>
하나의 Git Repository에서 <code>dev</code>와 <code>prod</code> 서버를 구분하여 배포하도록 설정하는 방법에 대해 살펴보겠습니다.</p><br><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-submodule-적용-트러블슈팅">🧐 Submodule 적용 트러블슈팅<a href="#-submodule-적용-트러블슈팅" class="hash-link" aria-label="🧐 Submodule 적용 트러블슈팅에 대한 직접 링크" title="🧐 Submodule 적용 트러블슈팅에 대한 직접 링크">​</a></h2><p>저희 팀은 CD를 <code>Github Actions Self-hosted Runners</code>를 통해 수행하는데요,
이때 Workflow를 다시 살펴보겠습니다.</p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Celuveat backend DEV CD ✨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy-backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hosted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Run Backend Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          sudo ./deploy-backend.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>마지막 부분을 보면 아시겠지만, <code>sudo</code>를 통해서 배포 스크립트를 실행하는데요, 이때 문제가 발생합니다.</p><p><a href="https://ttl-blog.tistory.com/1346" target="_blank" rel="noopener noreferrer">말랑이의 Git Submodule 설명 글</a>의
<a href="https://ttl-blog.tistory.com/1346#%F0%9F%A7%90%20EC2%EC%97%90%EC%84%9C%20Private%20Repository%EC%97%90%20%EB%8C%80%ED%95%9C%20%EC%9D%B8%EC%A6%9D%20%EB%AC%B8%EC%A0%9C%20%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0-1" target="_blank" rel="noopener noreferrer">EC2에서 Private Repository에 대한 인증 문제 해결하기</a>
부분을 보고 똑같이 적용하였는데, git submodule update를 하는 과정에서 <code>Permission denied (publickey)</code> 오류가 발생하였습니다.</p><p>이에 대한 원인을 찾아보니, git 에서 sudo 명령을 되도록 사용해서는 않는것을 권장한다고 하며,
<code>sudo 없이 ssh 키를 생성</code>한 다음 <code>sudo git push</code>와 같은 명령을 사용하면 <code>생성한 것과 동일한 키가 사용되지 않는다</code>고
<a href="https://docs.github.com/ko/authentication/troubleshooting-ssh/error-permission-denied-publickey" target="_blank" rel="noopener noreferrer">다음 문서</a>에 나와있었습니다.</p><br><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-왜-문제인가">🐳 왜 문제인가?<a href="#-왜-문제인가" class="hash-link" aria-label="🐳 왜 문제인가?에 대한 직접 링크" title="🐳 왜 문제인가?에 대한 직접 링크">​</a></h3><p><code>sudo</code> 명령을 통해 쉘 스크립트를 실행하게 되면, <code>쉘 스크립트에서 사용되는 모든 명령어</code>가 <code>sudo 권한</code>으로 실행되게 됩니다.</p><p>그런데 이때 배포 스크립트에는 다음 명령어가 존재했습니다.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ...생략</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> submodule update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...생략</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>즉 위 명령이 실제로는 <code>sudo git submodule update</code>로 실행되는 것이었습니다.</p><p>EC2에서 Private repository에 대한 인증 처리를 위해 서브모듈의 URL을 <strong>ssh</strong>로 설정하였기에
<code>git submodule update</code>를 위해서는 <code>ssh key</code>가 필요한 상황이었습니다.</p><p>그러나 위 문서의 설명에 나와있듯이 <code>sudo 없이 ssh 키를 생성</code>한 다음 <code>sudo git update submodule</code> 명령어를 사용하였기에,
<code>생성한 것과 동일한 키가 사용되지 않아</code> 문제가 발생했던 것이었습니다.</p><br><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-어떻게-해결하나요">🐳 어떻게 해결하나요?<a href="#-어떻게-해결하나요" class="hash-link" aria-label="🐳 어떻게 해결하나요?에 대한 직접 링크" title="🐳 어떻게 해결하나요?에 대한 직접 링크">​</a></h3><p>간단합니다.
sudo 없이 ssh 키를 생성한 것이 문제였기 때문에, <code>sudo 명령어와 함께 ssh 키를 생성</code>해주면 됩니다.</p><p>이때 sudo 명령어로 생성된 키는 <code>cat ~/.ssh/id_rsa.pub</code>로는 바로 볼 수 없으며,</p><p><code>sudo su</code> 명령을 통해 root 계정으로 전환 후 <code>cat ~/.ssh/id_rsa.pub</code>를 실행해 주어야 합니다.
(해당 과정도 블로그 글에 업데이트 해두었으니, 상세한 설명은 블로그를 참조해주시면 감사하겠습니다.)</p><br><br><br><br><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-개발-서버dev와-프로덕션-서버prod의-배포-자동화하기">🧐 개발 서버(Dev)와 프로덕션 서버(Prod)의 배포 자동화하기<a href="#-개발-서버dev와-프로덕션-서버prod의-배포-자동화하기" class="hash-link" aria-label="🧐 개발 서버(Dev)와 프로덕션 서버(Prod)의 배포 자동화하기에 대한 직접 링크" title="🧐 개발 서버(Dev)와 프로덕션 서버(Prod)의 배포 자동화하기에 대한 직접 링크">​</a></h2><p>프로덕션 서버를 포함한 저희의 CI/CD 구조는 다음과 같습니다.
<img loading="lazy" alt="cicd" src="/team-blog/assets/images/cicd-78bd0ab8a510d5fe0ffd17c7c4ac3ca2.png" width="2454" height="1572" class="img_ev3q"></p><p>구조를 보면 알 수 있듯이, <code>develop-frontend</code> 브랜치와 <code>develop-backend</code> 브랜치에 PR이 Merge되면,<br>
<code>dev 서버</code>의 frontend와 backend의 배포 스크립트를 각각 실행시키는 방법을 사용하고 있습니다.</p><p>또한 <code>main</code> 브랜치에 PR이 Merge되면 <code>prod 서버</code>의 frontend와 backend의 배포 스크립트를 실행시킵니다.</p><p>이때 <code>dev 서버</code>와 <code>prod 서버</code> 모두 <code>self-hosted runners</code>를 각각 실행하고 있는 상태입니다.</p><p>이 상황에서 어떻게 <code>workflow</code>에 따라 특정 서버의 <code>self-hosted runners</code>만 실행할 수 있을까요? <br>
(더 정확히는 어떻게 <strong>PR이 Merge되는 브랜치에 따라</strong> 특정 <code>self-hosted runners</code>만 실행되도록 설정할 수 있을까요?)</p><br><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-runners-의-label-활용하기">🐳 Runners 의 Label 활용하기<a href="#-runners-의-label-활용하기" class="hash-link" aria-label="🐳 Runners 의 Label 활용하기에 대한 직접 링크" title="🐳 Runners 의 Label 활용하기에 대한 직접 링크">​</a></h3><p>(<a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/using-self-hosted-runners-in-a-workflow#using-custom-labels-to-route-jobs" target="_blank" rel="noopener noreferrer">다음 문서</a>를 참고하여 설정하였습니다.)</p><p><code>Actions</code>의 <code>Runners</code>는 <code>Label</code>을 가질 수 있습니다.</p><p><img loading="lazy" alt="label" src="/team-blog/assets/images/runner-label-ad69c0cc751c49fc6475edd751c34bc8.png" width="1350" height="883" class="img_ev3q"></p><p>위 사진과 같이, 저희는 dev 서버와 prod 서버의 Runner 에 대하여, 각각 <code>dev</code>와 <code>prod</code>라는 label을 붙여주어 이들을 구분지었습니다.</p><p>그리고 백엔드의 DEV 서버용 CD workflow를 다음과 같이 수정하였습니다.</p><br><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-백엔드-dev용-cd-workflow">🚀 백엔드 DEV용 CD workflow<a href="#-백엔드-dev용-cd-workflow" class="hash-link" aria-label="🚀 백엔드 DEV용 CD workflow에 대한 직접 링크" title="🚀 백엔드 DEV용 CD workflow에 대한 직접 링크">​</a></h4><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Celuveat backend DEV CD ✨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy-backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hosted</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dev</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">## 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Run Backend Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          sudo sh deploy-backend.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><p>이후 백엔드의 PROD 서버용 CD workflow를 다음과 같이 작성하였습니다.</p><br><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-백엔드-prod용-cd-workflow">🚀 백엔드 PROD용 CD workflow<a href="#-백엔드-prod용-cd-workflow" class="hash-link" aria-label="🚀 백엔드 PROD용 CD workflow에 대한 직접 링크" title="🚀 백엔드 PROD용 CD workflow에 대한 직접 링크">​</a></h4><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Celuveat backend PROD CD ✨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy-backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hosted</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> prod</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Run Backend Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          sudo sh deploy-backend.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-마무리">😎 마무리<a href="#-마무리" class="hash-link" aria-label="😎 마무리에 대한 직접 링크" title="😎 마무리에 대한 직접 링크">​</a></h2><p>이렇게 해서 셀럽잇 팀의 변경된 CI/CD 아키텍처를 살펴보았습니다.</p><p>생각보다 제 블로그로 서브모듈 관련 내용을 넘어가니 정리할 내용이 얼마 없었네요 :)</p><p>읽어주셔서 감사합니다 😊</p><br><br><br></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/ci-cd">CI/CD</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/인프라">인프라</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/github-actions">Github Actions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/git-submodules">git submodules</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/team-blog/back-blog/mallang/cicd-series/cicd-1/cicd">셀럽잇 CI/CD 발전기 - (1)</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-21T00:00:00.000Z" itemprop="datePublished">2023년 7월 21일</time> · <!-- -->약 16분</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/shin-mallang" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/52229930?v=4" alt="donghun Shin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/shin-mallang" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">donghun Shin</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-서론">🧐 서론<a href="#-서론" class="hash-link" aria-label="🧐 서론에 대한 직접 링크" title="🧐 서론에 대한 직접 링크">​</a></h2><p>안녕하세요. 셀럽잇의 백엔드 말랑입니다.</p><p>셀럽잇 팀의 CI/CD 아키텍처를 소개해 드리기 위해 찾아왔습니다 😎</p><p>셀럽잇 팀은 주어진 제약 내에서 배포 자동화를 달성하기 위해 많은 고민을 하였고, 일차적으로 다음과 같은 CI/CD 아키텍처를 도입하였습니다.</p><br><p><img loading="lazy" alt="CICD" src="/team-blog/assets/images/cicd-0b8f701c62c4636d0c4cf297fd30b97e.png" width="2738" height="1520" class="img_ev3q"></p><br><p>이러한 과정에서 생겨난 고민들과 발생했던 문제들을 살펴보며 전체적인 구축 과정을 소개해 드리려 합니다.</p><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-제약조건과-요구사항">🧐 제약조건과 요구사항<a href="#-제약조건과-요구사항" class="hash-link" aria-label="🧐 제약조건과 요구사항에 대한 직접 링크" title="🧐 제약조건과 요구사항에 대한 직접 링크">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="️-컴퓨팅-파워">🖥️ 컴퓨팅 파워<a href="#️-컴퓨팅-파워" class="hash-link" aria-label="🖥️ 컴퓨팅 파워에 대한 직접 링크" title="🖥️ 컴퓨팅 파워에 대한 직접 링크">​</a></h3><ul><li>서버 개수: 최대 3대</li><li>서버 사양: 최대 t4g.small</li><li>스토리지: 최대 20GiB</li></ul><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-요구사항">📃 요구사항<a href="#-요구사항" class="hash-link" aria-label="📃 요구사항에 대한 직접 링크" title="📃 요구사항에 대한 직접 링크">​</a></h3><ul><li>개발 서버와 프로덕션 서버의 분리</li></ul><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-셀럽잇-팀의-git-브랜치-전략">🧐 셀럽잇 팀의 git 브랜치 전략<a href="#-셀럽잇-팀의-git-브랜치-전략" class="hash-link" aria-label="🧐 셀럽잇 팀의 git 브랜치 전략에 대한 직접 링크" title="🧐 셀럽잇 팀의 git 브랜치 전략에 대한 직접 링크">​</a></h2><p>CI/CD 아키텍처에 대한 소개 전에, 원할한 설명을 위하여 저희 팀의 git 브랜치 전략에 대해 우선 소개하도록 하겠습니다.</p><p>셀럽잇 팀은 gitflow 전략을 조금 수정하여 다음과 같이 5개의 브랜치를 사용합니다.</p><ul><li><code>main</code> - 프로덕션용 브랜치</li><li><code>develop-backend</code> - 백엔드의 다음 출시 버전을 개발하는 브랜치</li><li><code>develop-frontend</code>- 프론트엔드의 다음 출시 버전을 개발하는 브랜치</li><li><code>feature</code> - 기능 개발 브랜치</li><li><code>hotfix</code> - main 브랜치에서 발생한 버그를 수정할 때 사용하는 브랜치</li></ul><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-main-브랜치">🐳 main 브랜치<a href="#-main-브랜치" class="hash-link" aria-label="🐳 main 브랜치에 대한 직접 링크" title="🐳 main 브랜치에 대한 직접 링크">​</a></h3><p><code>main</code> 브랜치에 존재하는 코드는 실제 서비스될 코드이기 때문에 항상 배포 가능한 상태여야 하며 기능이 완전히 구현된 상태여야 합니다.<br>
<code>main</code> 브랜치는 <code>develop-backend</code> 브랜치와 <code>develop-frontend</code> 브랜치에서 기능들이 완성한 이후 <code>merge</code>됩니다.</p><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-develop-backendfrontend-브랜치">🐳 develop-<!-- -->[backend/frontend]<!-- --> 브랜치<a href="#-develop-backendfrontend-브랜치" class="hash-link" aria-label="-develop-backendfrontend-브랜치에 대한 직접 링크" title="-develop-backendfrontend-브랜치에 대한 직접 링크">​</a></h3><p>git flow의 <code>develop</code> 브랜치를 저희의 상황에 맞게 재구성한 브랜치로,
백엔드와 프론트엔드가 각각 서로의 영향을 받지 않고 개발을 이어갈 수 있도록 하기 위하여 위와 같이 구성하였습니다.</p><p>프로젝트에서는 하나의 <code>Repository</code>를 사용하기 때문에, 백엔드와 프론트엔드의 코드 파일 분리도 필요했는데요,
저희는 최상위 directory에서 <code>backend</code> 폴더와 <code>frontend</code> 폴더를 두어 코드를 분리하였습니다.</p><p><code>develop-backend</code> 브랜치에서는 <code>backend</code> 폴더에서만 작업이 이루어지며,
<code>develop-frontend</code> 브랜치에서는 <code>frontend</code> 폴더에서만 작업이 이루어집니다.</p><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-feature-브랜치">🐳 feature 브랜치<a href="#-feature-브랜치" class="hash-link" aria-label="🐳 feature 브랜치에 대한 직접 링크" title="🐳 feature 브랜치에 대한 직접 링크">​</a></h3><p><code>feature</code> 브랜치는 기능을 개발하는 브랜치로, 기본적으로 <code>이슈</code>와 1대1 매핑 됩니다.<br>
개발해야 하는 기능들에 대하여 먼저 이슈를 생성하면, 각 이슈별 담당자가 이슈에 대응되는 <code>feature</code> 브랜치를 생성합니다.<br>
기능을 개발되면 <code>feature</code> 브랜치에서 <code>develop</code> 브랜치에 <code>PR</code>을 날립니다.</p><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-hotfix-브랜치">🐳 hotfix 브랜치<a href="#-hotfix-브랜치" class="hash-link" aria-label="🐳 hotfix 브랜치에 대한 직접 링크" title="🐳 hotfix 브랜치에 대한 직접 링크">​</a></h3><p><code>hotfix</code> 브랜치는 <code>main</code> 브랜치에서 발생한 버그를 급하게 수정해야 하는 경우 사용하는 브랜치입니다.<br>
이때 <code>hotfix</code> 브랜치의 변경 사항은 <code>main</code> 브랜치와 <code>develop</code> 브랜치에 모두 반영됩니다.</p><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-ci-기술-선택과-구축">🧐 CI 기술 선택과 구축<a href="#-ci-기술-선택과-구축" class="hash-link" aria-label="🧐 CI 기술 선택과 구축에 대한 직접 링크" title="🧐 CI 기술 선택과 구축에 대한 직접 링크">​</a></h2><p>저희 팀은 CI를 위해 <code>Github Actions</code>를 사용하기로 결정했습니다.</p><p><code>Github Actions</code>가 <code>Jenkins</code>에 비해 학습 &amp; 적용하기 쉽다고 판단했으며, <code>Github Actions</code> 만으로도 원하는 기능을 모두 사용할 수 있었기에 굳이 <code>Jenkins</code>를 사용할 이유가 없었습니다.</p><p>무엇보다도 <code>Jenkins</code>를 도입한다면 이를 위한 서버를 하나 더 사용해야 하는데, 이렇게 되면 저희에게 주어진 <code>제약조건</code>을 만족하며 프로젝트를 진행하기 어렵다는 판단이 들었습니다.</p><p>그래서 저희는 백엔드와 프론트엔드 모두 CI 기술로써 <code>Github Actions</code>를 도입했으며, 다음과 같이 설정을 진행했습니다.</p><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-백엔드-ci-workflow">🐳 백엔드 CI workflow<a href="#-백엔드-ci-workflow" class="hash-link" aria-label="🐳 백엔드 CI workflow에 대한 직접 링크" title="🐳 백엔드 CI workflow에 대한 직접 링크">​</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Celuveat Backend CI ✨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">checks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull-requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backend-test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ JDK 17 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">java@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">java-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;17&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">distribution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;temurin&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Gradlew 권한 설정</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> chmod +x ./gradlew</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.working</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">directory </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ 테스트 진행</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./gradlew test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.working</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">directory </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ 테스트 결과 Report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> EnricoMi/publish</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">unit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token key atrule" style="color:#00a4db">files</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;**/build/test-results/**/*.xml&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ 테스트 실패 Comment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mikepenz/action</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">junit</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">report@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> always()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">report_paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;**/build/test-results/test/TEST-*.xml&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>이러한 설정에 대한 자세한 내용은 <a href="https://ttl-blog.tistory.com/1350" target="_blank" rel="noopener noreferrer">말랑이의 블로그</a>를 참고해주세요.</p><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-프론트엔드-ci-workflow">🐳 프론트엔드 CI workflow<a href="#-프론트엔드-ci-workflow" class="hash-link" aria-label="🐳 프론트엔드 CI workflow에 대한 직접 링크" title="🐳 프론트엔드 CI workflow에 대한 직접 링크">​</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 Celuveat Frontend CI 🍔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;frontend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;frontend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frontend-test</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔테스트 딱 대라 💢👊</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;18.16.1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 yarn install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yarn install</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.working</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">directory </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 eslint 테스트</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yarn lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.working</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">directory </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 React 프로젝트 빌드</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> yarn build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">working-directory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.working</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">directory </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>위와 같이 백엔드와 프론트엔드의 CI workflow를 작성하여 develop-backend &amp; develop-frontend 브랜치에 PR이 발샐할 때마다 테스트를 수행하도록 설정했습니다.</p><br><br><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-cd-기술-선택과-구축">🧐 CD 기술 선택과 구축<a href="#-cd-기술-선택과-구축" class="hash-link" aria-label="🧐 CD 기술 선택과 구축에 대한 직접 링크" title="🧐 CD 기술 선택과 구축에 대한 직접 링크">​</a></h2><p>처음에는 CD를 위한 기술로써 <code>Jenkins</code>를 사용하려 했습니다.
저를 포함한 몇몇 팀원들이 이미 경험해 본 기술이었기 때문에, 적용하는데 큰 어려움이 없을 것이라 판단했었습니다.</p><p>그런데 위에서 언급한 <code>제약조건</code>을 고려한 결과, 최종적으로 <code>Jenkins</code> 대신 <code>Github Actions</code>의 <code>self-hosted runners</code>를 사용하기로 결정하였습니다.</p><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-jenkins-대신-github-actions를-사용한-이유">🐳 Jenkins 대신 Github Actions를 사용한 이유<a href="#-jenkins-대신-github-actions를-사용한-이유" class="hash-link" aria-label="🐳 Jenkins 대신 Github Actions를 사용한 이유에 대한 직접 링크" title="🐳 Jenkins 대신 Github Actions를 사용한 이유에 대한 직접 링크">​</a></h3><p>제약조건 속에는 다음과 같은 항목이 존재했습니다.</p><ul><li>서버 개수: 최대 3대</li><li>서버 사양: 최대 t4g.small</li></ul><p>개발 서버와 프로덕션 서버를 분리하기 위한 요구사항을 고려했을 때, 우선 이들을 위한 서버가 최소한 2대는 할당되어야 했습니다.<br>
(개발 서버 1대, 프로덕션 서버 1대)</p><p>또한 데이터베이스를 사용하여야 했기 때문에, DB 전용 서버가 한 대 더 필요한 상황이었습니다.<br>
개발 서버에서 데이터베이스를 설치하여 사용하는 방법도 있었지만, 보안 &amp; 성능상의 문제로 인해 이는 좋은 방법이 아니라 판단하였고, 데이터베이스용 서버를 따로 두기로 결정하였습니다.</p><p>최종적으로 개발, 프로덕션, 데이터베이스 서버를 각각 분리하여 사용하기로 결정했습니다.</p><p>이러한 상황이었기에 CD를 위해서 추가로 서버를 사용할 수 없었고, 결국 기존 서버에 추가하는 식으로 구성하여야 했습니다.</p><p>이때 각 서버의 사양인 <code>t4g.small</code>의 스펙은 다음과 같습니다</p><ul><li>vCPU: 2</li><li>RAM: 2 GiB</li></ul><p>RAM이 2GB밖에 안되기 때문에 메모리를 최대한 적게 사용하는 도구를 사용하여야 했으며, 이를 위해 <code>Jenkins</code>와 <code>Github Actions</code>의 <code>self-hosted runners</code>를 비교했습니다.</p><p>비교 결과는 <code>Github Actions</code>의 <code>self-hosted runners</code>가 <code>Jenkins</code>보다 메모리 사용량이 훨씬 낮았고, 따라서 <code>Github Actions</code>를 통해 CD를 구축하기로 결정했습니다.</p><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-참고---메모리-사용량-비교">🐳 참고 - 메모리 사용량 비교<a href="#-참고---메모리-사용량-비교" class="hash-link" aria-label="🐳 참고 - 메모리 사용량 비교에 대한 직접 링크" title="🐳 참고 - 메모리 사용량 비교에 대한 직접 링크">​</a></h3><p>비교 시 공통 사항은 다음과 같습니다.</p><ul><li>Swap 메모리 1.5 GB 할당</li><li>java 17 버전 설치</li></ul><br><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-기본적인-서버의-메모리-사용량">🚀 기본적인 서버의 메모리 사용량<a href="#-기본적인-서버의-메모리-사용량" class="hash-link" aria-label="🚀 기본적인 서버의 메모리 사용량에 대한 직접 링크" title="🚀 기본적인 서버의 메모리 사용량에 대한 직접 링크">​</a></h4><p>자바만을 깔아둔 서버의 메모리 사용량은 다음과 같습니다.
<img loading="lazy" alt="basic-java" src="/team-blog/assets/images/자바설치기본상태-33b84a983f038a4a89c441f175f2acf5.png" width="1332" height="166" class="img_ev3q"></p><br><br><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-github-actions-self-hosted-runner">🚀 Github Actions self-hosted runner<a href="#-github-actions-self-hosted-runner" class="hash-link" aria-label="🚀 Github Actions self-hosted runner에 대한 직접 링크" title="🚀 Github Actions self-hosted runner에 대한 직접 링크">​</a></h4><p>단순 Runner 설치 후 실행 상태입니다.
<img loading="lazy" alt="actions-basic" src="/team-blog/assets/images/깃헙액션기본-976e5e5011d5d0d028955f1bf4455323.png" width="1320" height="424" class="img_ev3q"></p><br><p>웹훅으로 runner가 동작하여 bootJar을 실행할 때의 최대 메모리 사용량입니다.
<img loading="lazy" alt="actions-max" src="/team-blog/assets/images/깃헙액션최대-a92ed23a5c1c9a7af66430a03bff0e53.png" width="1324" height="124" class="img_ev3q"></p><br><br><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-jenkins">🚀 Jenkins<a href="#-jenkins" class="hash-link" aria-label="🚀 Jenkins에 대한 직접 링크" title="🚀 Jenkins에 대한 직접 링크">​</a></h4><p>Jenkins 설치 후 단순 실행 상태입니다.
<img loading="lazy" alt="jenkins-basic" src="/team-blog/assets/images/jenkins기본-039744d2e2cf359b43a60cd14b2db878.png" width="1302" height="276" class="img_ev3q"></p><p>웹훅으로 젠킨스가 동작하여 bootJar을 실행할 때의 최대 메모리 사용량입니다.
<img loading="lazy" alt="jenkins-max" src="/team-blog/assets/images/jenkins최대-691b956046a510c315242fddfb619972.png" width="1336" height="126" class="img_ev3q"></p><br><br><br><p>이렇듯 간단한 비교를 통해서도 <code>Jenkins</code>가 <code>Github Actions</code> 의 <code>self-hosted runners</code>보다 많은 메모리를 필요로 하는 것을 알 수 있었습니다.</p><p>최종적으로 저희 팀은 메모리 사용량도 적고, 적용하기도 쉬운(?) <code>Github Actions self-hosted runners</code>를 사용하기로 했습니다.</p><br><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-백엔드-dev용-cd-workflow">🐳 백엔드 DEV용 CD workflow<a href="#-백엔드-dev용-cd-workflow" class="hash-link" aria-label="🐳 백엔드 DEV용 CD workflow에 대한 직접 링크" title="🐳 백엔드 DEV용 CD workflow에 대한 직접 링크">​</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Celuveat backend DEV CD ✨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;backend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy-backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hosted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ✨ Run Backend Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          sudo sh deploy-backend.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-백엔드-dev용-배포-스크립트">🐳 백엔드 DEV용 배포 스크립트<a href="#-백엔드-dev용-배포-스크립트" class="hash-link" aria-label="🐳 백엔드 DEV용 배포 스크립트에 대한 직접 링크" title="🐳 백엔드 DEV용 배포 스크립트에 대한 직접 링크">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">echo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">command</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">date</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;+%Y-%m-%d %H:%M:%S&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> - </span><span class="token string variable" style="color:#36acaa">$*</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PROJECT_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/home/ubuntu/2023-celuveat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PROJECT_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PORT</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">BUILD_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">build/libs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">JAR_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">celuveat-0.0.1-SNAPSHOT.jar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> ✨   [</span><span class="token string variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token string" style="color:#e3116c">] 경로로 이동합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   develop-backend 브랜치로 이동합니다!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> switch develop-backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> ✨   [</span><span class="token string variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token string" style="color:#e3116c">] 경로로 이동합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ./</span><span class="token variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨    최신 코드를 PULL 합니다!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   프로젝트를 새롭게 빌드합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./gradlew clean build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   [</span><span class="token string variable" style="color:#36acaa">$PORT</span><span class="token string" style="color:#e3116c">] 번 포트를 사용하는 애플리케이션을 찾습니다...</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PID</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">lsof</span><span class="token variable" style="color:#36acaa"> -i :$PORT -t</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -z </span><span class="token variable" style="color:#36acaa">$PID</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; 🎉   실행중인 애플리케이션이 없어서 곧바로 실행합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ❌   실행중인 애플리케이션이 있어서 이를 종료합니다. [PID = </span><span class="token string variable" style="color:#36acaa">$PID</span><span class="token string" style="color:#e3116c">]</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -15 </span><span class="token variable" style="color:#36acaa">$PID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   애플리케이션을 실행하는데 필요한 환경변수를 세팅합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">SPRING_PROFILES_ACTIVE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;dev&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DB_DRIVER_CLASS_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DB_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;jdbc:mysql://[비밀입니당]&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DB_USERNAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;비밀입니당&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DB_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;비밀입니당&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">CORS_ALLOW_ORIGINS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;http://127.0.0.1:3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; 🎉   애플리케이션 실행합니다~ 🎉</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">current_date</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;+%Y-%m-%dT%H-%M&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">BACKEND_LOG_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;backend-log-</span><span class="token string variable" style="color:#36acaa">$current_date</span><span class="token string" style="color:#e3116c">.log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> java -jar </span><span class="token variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$BUILD_PATH</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$JAR_NAME</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /home/ubuntu/log/backend/</span><span class="token variable" style="color:#36acaa">$BACKEND_LOG_FILE</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>조금 더 고도화가 필요하지만, 우선은 간단하게만 작성했습니다.</p><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-프론트엔드-dev용-cd-workflow">🐳 프론트엔드 DEV용 CD workflow<a href="#-프론트엔드-dev용-cd-workflow" class="hash-link" aria-label="🐳 프론트엔드 DEV용 CD workflow에 대한 직접 링크" title="🐳 프론트엔드 DEV용 CD workflow에 대한 직접 링크">​</a></h3><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 Celuveat frontend DEV CD 🍔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> develop</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">paths</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;frontend/**&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy-frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> self</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hosted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 .env 파일 세팅</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          touch ~/frontend-env/.env</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          echo KAKAO_MAP_API_KEY=${{ secrets.KAKAO_MAP_API_KEY }} &gt;&gt; ~/frontend-env/.env</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 🍔 Run Frontend Deploy Script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          cd ~</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          sudo sh deploy-frontend.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-프론트엔드-dev용-배포-스크립트">🐳 프론트엔드 DEV용 배포 스크립트<a href="#-프론트엔드-dev용-배포-스크립트" class="hash-link" aria-label="🐳 프론트엔드 DEV용 배포 스크립트에 대한 직접 링크" title="🐳 프론트엔드 DEV용 배포 스크립트에 대한 직접 링크">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-name function" style="color:#d73a49">echo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">command</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">date</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;+%Y-%m-%d %H:%M:%S&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> - </span><span class="token string variable" style="color:#36acaa">$*</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PROJECT_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/home/ubuntu/2023-celuveat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PROJECT_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PORT</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> ✨   [</span><span class="token string variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token string" style="color:#e3116c">] 경로로 이동합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   develop-frontend 브랜치로 이동합니다!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> switch develop-frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c"> ✨   [</span><span class="token string variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token string" style="color:#e3116c">] 경로로 이동합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ./</span><span class="token variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨    최신 코드를 PULL 합니다!</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   yarn install &amp; yarn build 로 빌드합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   [</span><span class="token string variable" style="color:#36acaa">$PORT</span><span class="token string" style="color:#e3116c">] 번 포트를 사용하는 애플리케이션을 찾습니다...</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">PID</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">lsof</span><span class="token variable" style="color:#36acaa"> -i :$PORT -t</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> -z </span><span class="token variable" style="color:#36acaa">$PID</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; 🎉   실행중인 애플리케이션이 없어서 곧바로 실행합니다.</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ❌   실행중인 애플리케이션이 있어서 이를 종료합니다. [PID = </span><span class="token string variable" style="color:#36acaa">$PID</span><span class="token string" style="color:#e3116c">]</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">kill</span><span class="token plain"> -15 </span><span class="token variable" style="color:#36acaa">$PID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   .env 파일 복사</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /home/ubuntu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mv</span><span class="token plain"> /home/ubuntu/frontend-env/.env </span><span class="token variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$PROJECT_PATH</span><span class="token plain">/</span><span class="token variable" style="color:#36acaa">$PROJECT_NAME</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">pwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; ✨   애플리케이션 실행</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">current_date</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">date</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;+%Y-%m-%dT%H-%M&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">FRONTEND_LOG_FILE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;frontend-log-</span><span class="token string variable" style="color:#36acaa">$current_date</span><span class="token string" style="color:#e3116c">.log&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">nohup</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> start -- --port </span><span class="token variable" style="color:#36acaa">$PORT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> /home/ubuntu/log/frontend/</span><span class="token variable" style="color:#36acaa">$FRONTEND_LOG_FILE</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br><br><br><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="-마무리">😎 마무리<a href="#-마무리" class="hash-link" aria-label="😎 마무리에 대한 직접 링크" title="😎 마무리에 대한 직접 링크">​</a></h2><p>이렇게 해서 셀럽잇 팀의 CI/CD 아키텍처를 살펴보았습니다.
이것보다 더 좋은 대안이 있을 수도 있겠지만, 빠르게 개발을 진행해야 하는 상황과,
팀원 대부분이 지식이 별로 없는 상태에서 적용하기 수월한 구조를 찾다 보니 이러한 구조로 귀결된 것 같습니다.</p><p>아직 작성되지 않은 실제 프로덕트용 CD Workflow는 다음 글에서 작성하도록 하겠습니다.</p><p>읽어주셔서 감사합니다 😊</p><br><br><br></div><footer class="row docusaurus-mt-lg"><div class="col"><b>태그:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/ci-cd">CI/CD</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/인프라">인프라</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/team-blog/back-blog/tags/github-actions">Github Actions</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="블로그 게시물 목록 탐색"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><span class="footer__link-item">
        Powered by <a href="https://docusaurus.io/" target="_blank" rel="noreferrer noopener">Docusaurus 2</a>, Hosted by <a href="https://github.com/" target="_blank" rel="noreferrer noopener">githubPages</a>
        <br>
        Copyright © 2023 <a href="https://github.com/pumpkiinbell" target="_blank" rel="noreferrer noopener">Celuveat</a>. All rights reserved.
        </span></div></div></div></footer></div>
<script src="/team-blog/assets/js/runtime~main.053db125.js"></script>
<script src="/team-blog/assets/js/main.82af37fe.js"></script>
</body>
</html>