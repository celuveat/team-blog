"use strict";(self.webpackChunkceluveat_team_blog=self.webpackChunkceluveat_team_blog||[]).push([[7142],{6964:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/doggy/KakaoOAuthLogout/KakaoOauthLogout","metadata":{"permalink":"/team-blog/back-blog/doggy/KakaoOAuthLogout/KakaoOauthLogout","source":"@site/@backBlog/doggy/KakaoOAuthLogout/KakaoOauthLogout.mdx","title":"Oauth \ub85c\uadf8\uc544\uc6c3 - \uce74\uce74\uc624","description":"\uce74\uce74\uc624 \ub85c\uadf8\uc544\uc6c3 \uc124\uba85\uc11c","date":"2023-08-14T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 14\uc77c","tags":[{"label":"OAuth","permalink":"/team-blog/back-blog/tags/o-auth"},{"label":"Kakao","permalink":"/team-blog/back-blog/tags/kakao"},{"label":"Logout","permalink":"/team-blog/back-blog/tags/logout"}],"readingTime":6.475,"hasTruncateMarker":true,"authors":[{"name":"dongho Kim","url":"https://github.com/kdkdhoho","email":"hkim4410@gmail.com","imageURL":"https://avatars.githubusercontent.com/u/66300965?v=4","key":"kdkdhoho"}],"frontMatter":{"date":"2023-08-14T00:00:00.000Z","authors":"kdkdhoho","title":"Oauth \ub85c\uadf8\uc544\uc6c3 - \uce74\uce74\uc624","description":"\uce74\uce74\uc624 \ub85c\uadf8\uc544\uc6c3 \uc124\uba85\uc11c","keywords":["OAuth","Kakao","Logout"],"tags":["OAuth","Kakao","Logout"]},"nextItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(1)","permalink":"/team-blog/back-blog/royce/monitoring/monitoring-1"}},"content":"\uce74\uce74\uc624 Oauth \ub85c\uadf8\uc544\uc6c3 \uad6c\ud604\ud558\uae30\\n\\n\x3c!--truncate--\x3e\\n\\n\uc548\ub155\ud558\uc138\uc694. \uc140\ub7fd\uc787 \ud300 \ubc31\uc5d4\ub4dc \ub3c4\uae30\uc785\ub2c8\ub2e4. \ud83d\udc36\\n\\n\uc774\ubc88 \uae00\uc740 OAuth, \uadf8 \uc911\uc5d0\uc11c\ub3c4 **\uce74\uce74\uc624 OAuth\uc758 \ub85c\uadf8\uc544\uc6c3** **\uad6c\ud604 \ubc29\ubc95**\uc5d0 \ub300\ud55c \uae00\uc785\ub2c8\ub2e4.<br/>\\n\ud68c\uc6d0\ud0c8\ud1f4\uc5d0 \ub300\ud55c \uae00\ub3c4 \uc791\uc131\ud558\ub824 \ud588\uc9c0\ub9cc \ub85c\uadf8\uc544\uc6c3\uacfc \uce74\uce74\uc624 API\ub9cc \ub2e4\ub97c \ubfd0 \ub098\uba38\uc9c0\ub294 \ubaa8\ub450 \ub3d9\uc77c\ud558\uae30\uc5d0 \ub530\ub85c \uc791\uc131\ud558\uc9c4 \uc54a\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub7fc \ubc14\ub85c \uc2dc\uc791\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n# \ub85c\uadf8\uc544\uc6c3 API \uba85\uc138\\n\\n\uc6b0\uc120 OAuth \uad00\ub828 \uae30\ub2a5\uc744 \uad6c\ud604\ud558\ub824\uba74 \ubb34\uc870\uac74 \ud574\ub2f9 OAuth \uc11c\ubc84\uc758 \uacf5\uc2dd \ubb38\uc11c\ub97c \ud1b5\ud574 API \uba85\uc138\ub97c \ud655\uc778\ud574\uc57c\ud569\ub2c8\ub2e4.\\n\\n\uce74\uce74\uc624\uc758 \ub85c\uadf8\uc544\uc6c3 API \uba85\uc138\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n![](\ub85c\uadf8\uc544\uc6c3API\uba85\uc1381.jpeg)\\n\\n# \uc778\uc99d \ubc29\uc2dd \uc120\ud0dd\\n\\n\uc778\uc99d \ubc29\uc2dd\uc744 \ubcf4\uba74 `\uc561\uc138\uc2a4 \ud1a0\ud070`, `\uc11c\ube44\uc2a4 \uc571 \uc5b4\ub4dc\ubbfc \ud0a4`(\uc774\ud558 \uc5b4\ub4dc\ubbfc \ud0a4)\ub85c \ub450 \uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc81c\uac00 \uc0ac\uc6a9\ud560 \uc778\uc99d \ubc29\uc2dd\uc740 `\uc5b4\ub4dc\ubbfc \ud0a4` \uc778\ub370\uc694, \uc774\uc720\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.<br/>\\n\ub85c\uadf8\uc544\uc6c3 \uc694\uccad\uc744 \uc704\ud574 \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \uc800\uc7a5\ud558\ub824\uba74 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0\uac8c \ud1a0\ud070\uc744 \ubc1b\uc544\uc57c \ud569\ub2c8\ub2e4.<br/>\uc989, \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \uad00\ub9ac\ud574\uc57c\ud569\ub2c8\ub2e4.<br/>\\n\ud558\uc9c0\ub9cc \uc774\ub294 \ub9e4\uc6b0 \uc704\ud5d8\ud569\ub2c8\ub2e4. \uacf5\uc2dd \ubb38\uc11c\uc5d0\uc11c \uc561\uc138\uc2a4 \ud1a0\ud070\uc5d0 \ub300\ud55c \uc124\uba85\uc740 \uc544\ub798\uc640 \uac19\uc740\ub370\uc694.\\n\\n![](\ud1a0\ud070\ubc1b\uae30\uc124\uba85.jpeg)\\n\\n\uc545\uc131 \uc720\uc800\uac00 \uc0ac\uc6a9\uc790\uc758 \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \ud0c8\ucde8 \ud6c4, \ub9c8\uc74c\ub300\ub85c \uc0ac\uc6a9\uc790\uc758 \uc18c\uc911\ud55c \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \ub4f1 \uc2ec\uac01\ud55c \ubcf4\uc548 \ubb38\uc81c\uac00 \uc77c\uc5b4\ub0a0 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.<br/>\\n\ubb3c\ub860 \uc561\uc138\uc2a4 \ud1a0\ud070\uc744 \uc11c\ubc84\uc5d0 \uc800\uc7a5\ud558\uc5ec \uad00\ub9ac\ud558\uba74 \uc774\ub7f0 \uc77c\uc740 \ubc29\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub3d9\uc2dc\uc5d0 `\uc5b4\ub4dc\ubbfc \ud0a4 \ubc29\uc2dd`\ubcf4\ub2e4 \ub354 \uac04\uacb0\ud558\uac8c API\ub97c \ud638\ucd9c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.<br/>\\n\uadf8\ub7fc\uc5d0\ub3c4 `\uc5b4\ub4dc\ubbfc \ud0a4` \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\ub294 \uc774\uc720\ub294 **\ud604\uc7ac \ub85c\uadf8\uc778 \ub85c\uc9c1\uc5d0\uc11c `\uc561\uc138\uc2a4 \ud1a0\ud070`\uc744 \uc800\uc7a5\ud558\uc9c0 \uc54a\uc73c\uba70**, \uc800\uc7a5\ud558\ub824\uba74 \ud68c\uc6d0 \ud14c\uc774\ube14\uc5d0 \uce7c\ub7fc\uc744 \ucd94\uac00\ud558\uace0 **\uc0c1\ud0dc\ub97c \uad00\ub9ac\ud574\uc57c \ud560 \ube44\uc6a9**\uc774 \uc0dd\uae34\ub2e4\ub294 \uc810 \ub54c\ubb38\uc785\ub2c8\ub2e4.\\n\\n> \uc5b4\ub4dc\ubbfc \ud0a4\ub294 \'\ub0b4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 - \uc571 \ud0a4\' \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n# \uad6c\ud604\\n\\n\uadf8\ub7fc \uc774\uc81c `\uc5b4\ub4dc\ubbfc \ud0a4` \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc77c\ub2e8 \uadf8 \uc804\uc5d0 \uc5b4\ub4dc\ubbfc \ud0a4\ub97c \ud658\uacbd \ubcc0\uc218\uc5d0 \uc124\uc815\ud574\uc90d\ub2c8\ub2e4.\\n\\n![](\uc5b4\ub4dc\ubbfc\ud0a4\uc124\uc815.jpeg)\\n\\n\uadf8 \ub2e4\uc74c API \uba85\uc138\ub97c \uc790\uc138\ud788 \ubcf4\uba70 \ucf54\ub4dc\ub85c \uad6c\ud604\ud574\ubd05\uc2dc\ub2e4.\\n\\n![](\ub85c\uadf8\uc544\uc6c3API\uba85\uc1382.jpeg)\\n\\n\ub208\uc5ec\uaca8 \ubcfc \ud3ec\uc778\ud2b8\ub294 **\ud5e4\ub354**\uc640 **\ubcf8\ubb38**, **\uc751\ub2f5**\uc774\uaca0\uc8e0?<br/>\\n\uc774\ub97c \ucf54\ub4dc\ub85c \ub098\ud0c0\ub0b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc544\ub798\ub294 `OauthController`\uc758 \ucf54\ub4dc \uc785\ub2c8\ub2e4.\\n\\n![](OauthController.jpeg)\\n\\n\uc544\ub798\ub294 `KakaoMemberClient`\uc758 \ucf54\ub4dc\uc785\ub2c8\ub2e4.\\n\\n![](KakaoMemberClientCode.jpeg)\\n\\n\uc544\ub798\ub294 `KakaoApiClient`\uc758 \ucf54\ub4dc\uc785\ub2c8\ub2e4.\\n\\n![](KakaoApiClient\ub85c\uadf8\uc544\uc6c3\ucf54\ub4dc.jpeg)\\n\\n![](KakaoLogoutResponse.jpeg)\\n\\n\uc774\ub807\uac8c \uad6c\ud604\uc774 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4.\\n\\n\ubb3c\ub860 `oauthServerId`\ub97c \uc870\ud68c\ud558\ub294 \ub4f1\uc758 \ub2e4\ub978 \ub85c\uc9c1\ub3c4 \ud544\uc694\ud558\uc9c0\ub9cc \ub530\ub85c \ub2e4\ub8e8\uc9c4 \uc54a\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n# \ud14c\uc2a4\ud2b8\\n\\n\ud14c\uc2a4\ud2b8 \ubc29\uc2dd\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n1. \ub85c\uceec\uc5d0\uc11c \ud504\ub860\ud2b8 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ub744\uc6b4\ub2e4.\\n2. \ube0c\ub77c\uc6b0\uc800\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778 \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n3. \ub85c\uadf8\uc778 \ud6c4 \ud68d\ub4dd\ud55c \uc138\uc158 \uc544\uc774\ub514\ub97c \ud1b5\ud574 \ud3ec\uc2a4\ud2b8\ub9e8\uc73c\ub85c \ub85c\uadf8\uc544\uc6c3 \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n4. \uacb0\uacfc\ub97c \ud655\uc778\ud55c\ub2e4.\\n\\n## \ub85c\uadf8\uc778 \uc694\uccad \uc2e4\ud328\\n\uc774\ub54c, \ube0c\ub77c\uc6b0\uc800\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778 \uc694\uccad\uc744 \ubcf4\ub0b4\uba74 \uc774\ub7f0 \uc5d0\ub7ec\uac00 \ub730 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](\ub85c\uadf8\uc778\uc2e4\ud328.jpeg)\\n\\n\ucf54\ub4dc \uc0c1\uc73c\ub85c \ubd84\uba85 \ubb38\uc81c\uac00 \uc5c6\ub294\ub370 \uc704\uac19\uc740 \uc5d0\ub7ec\uac00 \ub72c\ub2e4\uba74, \uc774\ub294 \ud5c8\uc6a9 IP \uc8fc\uc18c\ub97c \uc124\uc815\ud574\uc8fc\uc9c0 \uc54a\uc544\uc11c \uc0dd\uae30\ub294 \uc624\ub958\uc785\ub2c8\ub2e4.\\n\\n![](\ud5c8\uc6a9IP\uc8fc\uc18c.jpeg)\\n\\n\uc704 \ud398\uc774\uc9c0\ub85c \ub4e4\uc5b4\uc640\uc11c \uc218\uc815\uc744 \ud1b5\ud574 \ud604\uc7ac IP\ub97c \ucd94\uac00\ud574\uc90d\ub2c8\ub2e4.<br/>\\n\uc785\ub825\ud560 IP\ub294 `\uc678\ubd80 IP \uc8fc\uc18c`\uc785\ub2c8\ub2e4. \uc678\ubd80 IP\ub294 (\ub9e5 \uae30\uc900) \ud130\ubbf8\ub110\uc5d0 `curl ipecho.net/plain; echo` \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub9ac\uace0 \ub2e4\uc2dc \ub85c\uadf8\uc778 \uc694\uccad\uc744 \ubcf4\ub0b4\uba74 \uc815\uc0c1\uc801\uc73c\ub85c \ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n## \ub85c\uadf8\uc544\uc6c3 \uc694\uccad\\n\\n\ub85c\uadf8\uc778\uc744 \ud1b5\ud574 \uc5bb\uc740 \uc138\uc158\uc744 \uc544\ub798\uc640 \uac19\uc774 \uc124\uc815\ud574\uc8fc\uace0 \uc694\uccad\uc744 \ubcf4\ub0b4\ubd05\ub2c8\ub2e4.\\n\\n![](\ud3ec\uc2a4\ud2b8\ub9e8\uc694\uccad.jpeg)\\n\\n![](\ub85c\uadf8\uc544\uc6c3\uc694\uccad\uacb0\uacfc.jpeg)\\n\\n\uc815\uc0c1\uc801\uc73c\ub85c \ub85c\uadf8\uc544\uc6c3\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n# \ub9c8\ubb34\ub9ac\\n\\n\uc774\ub807\uac8c \ubc31\uc5d4\ub4dc\uc758 Kakao Oauth \ub85c\uadf8\uc544\uc6c3 \uad6c\ud604\uc744 \uc54c\uc544\ubcf4\uc558\uc2b5\ub2c8\ub2e4.<br/>\\n\uac1c\uc778\uc801\uc73c\ub85c \ud504\ub860\ud2b8\uc5d0\uc11c\ub3c4 \ub85c\uadf8\uc544\uc6c3 \uc694\uccad\uc744 \ubcf4\ub0b4 \ud14c\uc2a4\ud2b8\ud558\uace0 \uc2f6\uc5c8\uc9c0\ub9cc, \ub85c\uceec\uc5d0\uc11c\ub294 \ucfe0\ud0a4\uac00 \ub2f4\uaca8\uc9c0\uc9c0 \uc54a\ub294 \ubb38\uc81c\uac00 \uc788\uc5b4 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ub2e4\uc74c\uc5d4 \uc65c \ub85c\uceec\uc5d0\uc11c\ub294 \ucfe0\ud0a4\uac00 \ub2f4\uaca8\uc9c0\uc9c0 \uc54a\ub294\uc9c0 \uc6d0\uc778\uc744 \ud30c\uc545\ud558\uace0 \ud574\uacb0\ud558\uc5ec \ub85c\uceec\uc5d0\uc11c\ub3c4 \ube0c\ub77c\uc6b0\uc800\ub97c \ud1b5\ud574 \ud14c\uc2a4\ud2b8\ud558\uae30\ub97c \uae30\ub300\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub7fc \'Oauth \ub85c\uadf8\uc544\uc6c3 - \uce74\uce74\uc624\' \ud3ec\uc2a4\ud305\uc744 \ub9c8\uce58\uaca0\uc2b5\ub2c8\ub2e4.<br/>\\n\uac10\uc0ac\ud569\ub2c8\ub2e4."},{"id":"/royce/monitoring/monitoring-1","metadata":{"permalink":"/team-blog/back-blog/royce/monitoring/monitoring-1","source":"@site/@backBlog/royce/monitoring/monitoring-1.mdx","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(1)","description":"Spring boot actuator, Prometheus, Grafana \uadf8\ub9ac\uace0 Docker","date":"2023-08-14T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 14\uc77c","tags":[{"label":"\ub85c\uadf8","permalink":"/team-blog/back-blog/tags/\ub85c\uadf8"},{"label":"\ubaa8\ub2c8\ud130\ub9c1","permalink":"/team-blog/back-blog/tags/\ubaa8\ub2c8\ud130\ub9c1"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"}],"readingTime":14.43,"hasTruncateMarker":true,"authors":[{"name":"Royce Won","url":"https://github.com/taeyeonroyce","email":"skdlxmtpqms@gmail.com","imageURL":"https://avatars.githubusercontent.com/u/90550065?v=4","key":"taeyeonroyce"}],"frontMatter":{"date":"2023-08-14T00:00:00.000Z","authors":"taeyeonroyce","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(1)","description":"Spring boot actuator, Prometheus, Grafana \uadf8\ub9ac\uace0 Docker","keywords":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\uadf8\ub77c\ud30c\ub098","\ub3c4\ucee4","\ud504\ub85c\uba54\ud14c\uc6b0\uc2a4"],"tags":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\uc778\ud504\ub77c"]},"prevItem":{"title":"Oauth \ub85c\uadf8\uc544\uc6c3 - \uce74\uce74\uc624","permalink":"/team-blog/back-blog/doggy/KakaoOAuthLogout/KakaoOauthLogout"},"nextItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(2)","permalink":"/team-blog/back-blog/royce/monitoring2/monitoring-2"}},"content":"Spring boot actuator\uc640 Docker\ub85c Prometheus, Grafana \uad6c\uc131\ud558\uae30\\n\\n\x3c!--truncate--\x3e\\n\\n# \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(1)\\n\\n\uc548\ub155\ud558\uc138\uc694, \uc140\ub7fd\uc787\uc758 \ub85c\uc774\uc2a4\uc785\ub2c8\ub2e4.\\n\\n\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uc140\ub7fd\uc787 \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30\uc5d0 \ub300\ud574 \uc18c\uac1c\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc11c\ube44\uc2a4 \ubaa8\ub2c8\ud130\ub9c1\uc774 \ud544\uc694\ud55c \uc774\uc720\uc5d0 \ub300\ud574 \uac04\ub2e8\ud558\uac8c \uc9da\uace0 \ub118\uc5b4\uac00\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n- \uc6b4\uc601\uc0c1 \ubc1c\uc0dd\ud55c \ubc84\uadf8\ub098 \uc624\ub958\uc5d0 \ub300\ud574 \ube60\ub978 \ud655\uc778\\n- \ubb38\uc81c\uc5d0 \ub300\ud55c \uc6d0\uc778\uc5d0 \ub300\ud55c \ube60\ub978 \ubd84\uc11d\\n- \uc2dc\uc2a4\ud15c\uc758 \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uc5ec \uac1c\uc120\uc810 \ubc1c\uacac \uac00\ub2a5 (\uc131\ub2a5, \uba54\ubaa8\ub9ac \ub4f1)\\n- \uc0ac\uc6a9\uc790\uc758 \uc561\uc138\uc2a4\uc640 \ud65c\ub3d9 \ubd84\uc11d -> \ucde8\uc57d\uc810, \uc5b4\ubdf0\uc9d5 \ub4f1\uc758 \ud589\uc704 \ubc1c\uacac \uac00\ub2a5\\n\\n\ub85c\uae45\uacfc \uba54\ud2b8\ub9ad \ubaa8\ub2c8\ud130\ub9c1\uac00 \ud544\uc694\ud55c \uc774\uc720\ub294 \uc774\ub7ec\ud55c \uc774\uc720 \ubfd0\ub9cc \uc544\ub2c8\ub77c \ub2e4\uc591\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc800\ud76c \uc140\ub7fd\uc787\ub3c4 \uc6b4\uc601\uc911\uc778 \uc11c\ube44\uc2a4\uc5d0\ub3c4 \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\uace0\uc790 \ud569\ub2c8\ub2e4.\\n\\n## Spring actuator\\n\\n\uc6b0\uc120, \uc140\ub7fd\uc787\uc5d0\uc11c\ub294 logback\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc6b4\uc601\uc911\uc5d0 \ubc1c\uc0dd\ud55c \ub85c\uadf8\ub97c \ubaa8\uc73c\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub85c\uadf8 \uc774\uc678\uc758 \uc9c0\ud45c\ub4e4\uc740 \uc5b4\ub5a4\uac78 \ubaa8\ub2c8\ud130\ub9c1 \ud558\uace0, \uc5b4\ub5bb\uac8c \uc218\uc9d1\ud574\uc57c \ud560\uae4c\uc694?\\n\\n\uc9c1\uc811 \uc9c0\ud45c\ub4e4\uc744 \ucd94\uc801\ud558\uace0 \uae30\ub85d\uc744 \ub0a8\uae38 \uc218 \uc788\uc9c0\ub9cc, \ub354\uc6b1 \uac04\ud3b8\ud558\uac8c `Spring Boot Actuator`\ub97c \uc0ac\uc6a9\ud558\ub824\uace0 \ud569\ub2c8\ub2e4.\\n\\n[Spring Boot Actuator](https://docs.spring.io/spring-boot/docs/2.1.8.RELEASE/reference/html/production-ready.html)\ub294 \uc6b4\uc601 \uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 `HTTP`\ub098 `JMX`\ub97c \uc774\uc6a9\ud574\uc11c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uad00\ub9ac\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.\\n\\n> **\\\\*JMX**(**J**ava **M**anagement e**X**tension): \uc560\ud50c\ub9ac\ucf00\uc774\uc158, \uc2dc\uc2a4\ud15c, JVM \ub4f1\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \ub3c4\uad6c\ub97c \uc81c\uacf5\ud558\ub294 Java \uae30\uc220. JMX\ub77c\ub294 \ud45c\uc900\ud654\ub41c \ubc29\ubc95\uc744 \ud1b5\ud574 \ub2e4\uc591\ud55c \ubaa8\ub2c8\ud130\ub9c1 \ub3c4\uad6c \ubc0f \uc2dc\uc2a4\ud15c\uacfc \uc27d\uac8c \ud1b5\ud569\ud560 \uc218 \uc788\ub2e4.\\\\*\\n\\n`Actuator`\ub97c \ud1b5\ud574\uc11c \uac04\ub2e8\ud55c \uc124\uc815\ub4e4\ub85c \ub2e4\uc591\ud55c \uc9c0\ud45c\ub4e4\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 Dependency\uc5d0 \ucd94\uac00\ud558\uc5ec \ud65c\uc131\ud654 \ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n`build.gradle`\uc5d0 \uc544\ub798 \ucf54\ub4dc\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```groovy\\nimplementation \'org.springframework.boot:spring-boot-starter-actuator\'\\n```\\n\\n\uc774\ud6c4, `http://{server}:{port}/actuator` \uc5d0 \uc811\uc18d\ud558\uc2dc\uba74 \uc544\ub798\uc640 \uac19\uc740 \ud654\uba74\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n(celuveat\uc740 8080 servlet\uc758 \uae30\ubcf8 \uc8fc\uc18c\uac00 /api\uc5ec\uc11c http://localhost:8080/api/actuator \ub85c \uc811\uc18d\ud558\uc600\uc2b5\ub2c8\ub2e4.)\\n\\n![](./1-1-1.jpeg)\\n\\n`_links` \ud558\uc704\uc5d0 `self`, `health` \ub4f1\uc758 url\ub4e4\uc774 \uc81c\uacf5\ub418\ub294\ub370\uc694. Actuator\ub294 \uc774 url\ub4e4\uc744 \ud1b5\ud574 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.\\n\\n![](./2-2-2.jpeg)\\n\\n\uc124\uc815\uc744 \ud1b5\ud574 \ub354 \ub2e4\uc591\ud55c \uc815\ubcf4\ub4e4\uc744 \uc81c\uacf5 \ubc1b\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n`application.yml` \ud30c\uc77c\uc5d0\uc11c \uc544\ub798\uc640 \uac19\uc774 \uc124\uc815\ud55c \ub4a4, \ub2e4\uc2dc `actuator` url\ub85c \uc774\ub3d9\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\nmanagement:\\n  endpoints:\\n    web:\\n      exposure:\\n        include: \\"*\\"\\n```\\n\\n![](3-3-3.jpeg)\\n\\n![](4-4-4.jpeg)\\n\\n```yaml\\nmanagement:\\n  endpoints:\\n    web:\\n      exposure:\\n        include: \\"*\\"\\n```\\n\\n\uc124\uc815\uc744 \ud1b5\ud574 web \ud658\uacbd(HTTP) \uc5d0\uc11c \ubaa8\ub4e0(\\\\*) endpoints\ub4e4\uc744 \ub178\ucd9c \uc2dc\ucf30\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc591\ud55c actuator \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n> more endpoints: https://docs.spring.io/spring-boot/docs/3.0.5/reference/html/actuator.html#actuator.endpoints\\n\\n\uadf8 \uc911, `/metrics` endpoints\ub97c \uc0b4\ud3b4\ubcf4\uba74 \uc720\uc6a9\ud55c \uc9c0\ud45c(metric)\ub4e4\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./6-6-6.jpeg)\\n\\n- `application.ready.time`\\n\\n- `jvm.threads.live`\\n\\n- `jvm.gc.memory.allocated`\\n\\n- `logback.events`\\n\\n- `process.cpu.usage`\\n\\n  ...\\n\\n\uc9c1\uad00\uc801\uc778 \uc774\ub984\uc73c\ub85c \uc5b4\ub5a4 \uc815\ubcf4\ub97c \uc81c\uacf5\ud558\ub294\uc9c0 \ud30c\uc545\ud560 \uc218 \uc788\ub294, \ub2e4\uc591\ud55c \uba54\ud2b8\ub9ad\ub4e4\uc774 \uc81c\uacf5\ub429\ub2c8\ub2e4.\\n\\n\uc608\uc2dc\ub85c, `process.cpu.usage` \ub97c \ud655\uc778\ud558\uace0\uc790 \ud55c\ub2e4\uba74, endpoints\uc5d0 \ucd94\uac00\ud558\uc5ec \uc811\uadfc \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n`/api/actuator/metrics/process.cpu.usage`\\n\\n![](./7-7-7.jpeg)\\n\\n`Spring Actuator`\ub294 \ub2e8\uc21c\ud55c \ub9e4\ud2b8\ub9ad \ubc0f \ud5ec\uc2a4 \uccb4\ud0b9 \ubfd0\ub9cc \uc544\ub2c8\ub77c\\n[\uc2e4\ud589\ub41c git \ube0c\ub79c\uce58\uc640 \ucee4\ubc0b, AutoConfiguration \uc815\ubcf4, Java, OS \ub4f1\uc758 \uc815\ubcf4](https://docs.spring.io/spring-boot/docs/3.0.5/reference/html/actuator.html#actuator.endpoints.info),\\n[\ub7f0\ud0c0\uc784 \uc911 Logging \ub808\ubca8 \ubcc0\uacbd](https://docs.spring.io/spring-boot/docs/3.0.5/reference/html/actuator.html#actuator.loggers) \uc5ed\uc2dc \uac00\ub2a5\ud569\ub2c8\ub2e4.\\n\\n\uc8fc\uc758\ud560 \uc810\uc740, application\uc5d0 \ub300\ud55c \ub2e4\uc591\ud55c \uc815\ubcf4\uac00 \uc81c\uacf5\ub418\uae30 \ub54c\ubb38\uc5d0 \ubcf4\uc548\uc801\uc73c\ub85c \uc2ec\uac01\ud55c \ubb38\uc81c\ub97c \uc57c\uae30 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ubd80\ubd84\uc744 \ud574\uacb0\ud558\ub294 \ub0b4\uc6a9\uc740 \ucd94\ud6c4\uc5d0 \uc791\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n`Spring actuator`\ub85c \uac04\ub2e8\ud558\uac8c \uc758\uc874\uc131\uc744 \ucd94\uac00\ud558\uace0 \uc57d\uac04\uc758 \uc124\uc815\uc73c\ub85c \ud544\uc694\ud55c \uba54\ud2b8\ub9ad\ub4e4\uc5d0 \ub300\ud574 \uce21\uc815\ud558\uace0 \ud655\uc778\ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ub2e4\uc74c\uc73c\ub85c\ub294 `Spring actuator`\ub85c\ubd80\ud130 \uc81c\uacf5\ubc1b\uc740 \uba54\ud2b8\ub9ad\ub4e4\uc744 \uc8fc\uae30\uc801\uc73c\ub85c \ud655\uc778\ud558\uace0 \uc800\uc7a5\ud558\uc5ec \uc720\uc758\ubbf8\ud558\uac8c \ud655\uc778\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n## Prometheus\\n\\n`Spring Actuator` \uacf5\uc2dd \ubb38\uc11c\uc758 [Metrics \ucc55\ud130](https://docs.spring.io/spring-boot/docs/3.0.5/reference/html/actuator.html#actuator.metrics)\ub97c \ubcf4\uba74 `Micrometer`\uc5d0 \ub300\ud55c \uc885\uc18d\uc131 \uad00\ub9ac \ud639\uc740 \uc790\ub3d9 \uad6c\uc131\uc744 \uc81c\uacf5\ud55c\ub2e4\uace0 \ud569\ub2c8\ub2e4.\\n\\n\uba3c\uc800 Micrometer\uc5d0 \ub300\ud574 \uac04\ub2e8\ud558\uac8c \uc9da\uace0 \ub118\uc5b4\uac00\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n> **[Micrometer](https://micrometer.io/docs/concepts)**: Micrometer\ub294 JVM \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc704\ud55c \uba54\ud2b8\ub9ad \uce21\uc815 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4. \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uc6a9 \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0 \ub300\ud574 \ucd94\uc0c1\ud654\ub41c \ud30c\uc0ac\ub4dc\ub97c \uc81c\uacf5\ud558\uc5ec \ubca4\ub354(vender)\uc0ac\uc5d0 \uc885\uc18d\ub418\uc9c0 \uc54a\uace0 JVM \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucf54\ub4dc\ub97c \uacc4\uce21\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub354 \uac04\ub2e8\ud558\uac8c \ub9d0\ud558\uba74, JVM\uc5d0\uc11c \uba54\ud2b8\ub9ad\uc744 \uce21\uc815\ud560 \uc218 \uc788\ub294 \uc77c\uc885\uc758 \uc778\ud130\ud398\uc774\uc2a4\ub77c\uace0 \uc774\ud574\ud558\uba74 \uc88b\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.(``Log`\uc758 `Slf4j`\uc640 \ube44\uc2b7\ud55c \uc5ed\ud560)\\n\\n`Micrometer`\ub97c \uc81c\uacf5\ud558\ub294 \ubca4\ub354\uc0ac\ub294 \ub2e4\uc591\ud558\uac8c \uc788\ub294\ub370\uc694. \ub300\ud45c\uc801\uc778 \uac83\ub4e4\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4.\\n\\n- Atlas\\n- Datadog\\n- Elastic\\n- Graphite\\n- Influx\\n- JMX\\n- **Prometheus**\\n\\n\uadf8 \uc911 Prometheus\ub97c \uc0ac\uc6a9\ud558\uc5ec micrometer\ub97c \uc218\uc9d1\ud558\uace0 \uc9d1\uacc4\ud558\uace0\uc790 \ud569\ub2c8\ub2e4.\\n\\n\uc0ac\uc6a9\ud55c \uc774\uc720\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n- Apache License 2.0\uac00 \uc0ac\uc6a9\ub41c \ubb34\ub8cc \uc18c\ud504\ud2b8\uc6e8\uc5b4\uc774\ub2e4.\\n- PromQL\uc744 \ud1b5\ud574 \ud6a8\uc728\uc801\uc73c\ub85c \ub2e4\uc591\ud55c \uc2dc\uacc4\uc5f4 \uc120\ud0dd\ud558\uace0 \uc9d1\uacc4\ud560 \uc218 \uc788\ub2e4.\\n- \uadf8\ub77c\ud30c\ub098\uc5d0\uc11c \uc2dc\uac01\ud654\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n- \uc0ac\uc6a9\uc790\uac00 \ub9ce\uc544 \ucc38\uace0\ud560 \uc790\ub8cc\uac00 \ub2e4\uc591\ud55c\ub2e4.\\n- `Spring Actuator`\uc5d0\uc11c \uba54\ud2b8\ub9ad \uc815\ubcf4\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n\\n\uadf8\ub7fc `Prometheus`\ub97c \ud1b5\ud574 \uba54\ud2b8\ub9ad \uc9d1\uacc4\ub97c \ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n## \uc900\ube44\\n\\n`Prometheus`\uac00 metric\uc744 \ud3f4\ub9c1 \ud560 \uc218 \uc788\ub3c4\ub85d `/actuator/prometheus` \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uc81c\uacf5\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uba3c\uc800 build.gradle\uc5d0 `prometheus` \uc758\uc874\uc131\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n`build.gradle`\\n\\n```groovy\\nimplementation \'io.micrometer:micrometer-registry-prometheus\'\\n```\\n\\n\uc774\ud6c4, `application.yml`\uc5d0\uc11c `exposure` \uc124\uc815\uc744 \ubcc0\uacbd\ud569\ub2c8\ub2e4.\\n\\n`application.yml`\\n\\n```yaml\\nmanagement:\\n  endpoints:\\n    web:\\n      exposure:\\n        include: \\"prometheus\\"\\n```\\n\\n\uc798 \uc801\uc6a9\uc774 \ub418\uc5c8\ub294\uc9c0 `/actuator/prometheus` \ub85c \uc811\uc18d\ud574 \ud655\uc778\ud574 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./8-8-8.jpeg)\\n\\n\uc54c\uc544\ubcf4\uae34 \ud798\ub4e4\uc9c0\ub9cc, \uc798 \uc811\uc18d\ub418\ub294 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\nurl\uacfc \ud0dc\uadf8\ub85c \uc81c\uacf5\ub418\ub294 \ubc29\uc2dd\uacfc \ub2ec\ub9ac, `executor_pool_max_threads{name=\\"applicationTaskExecutor\\",} 2.147483647` \uc640 \uac19\uc740 \ubb38\ubc95\uc73c\ub85c \uc81c\uacf5\ub418\ub294\ub370, \uc774\ub294 PromQL(Prometheus Query)\uc73c\ub85c `Prometheus`\uc758 \uba54\ud2b8\ub9ad \uc9c8\uc758 \uc5b8\uc5b4\uc785\ub2c8\ub2e4.\\n\\nPrometheus\uc744 \ud1b5\ud574 meterics\ub97c polling\ud558\ub294\ub370 \ud544\uc694\ud55c \uc900\ube44\ub294 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4!\\n\\n### \uc124\uce58\\n\\n\uba3c\uc800, celuveat\uc5d0\uc11c\ub294 docker\ub97c \uc0ac\uc6a9\ud558\uc5ec `Spring application`\uc744 \uc6b4\uc601\uc911\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n`prometheus` \uc5ed\uc2dc docker\ub97c \ud1b5\ud574 \uad00\ub9ac\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose-monitoring.yml\\n\\nversion: \\"3\\"\\n\\nservices:\\n  prometheus:\\n    image: prom/prometheus:latest\\n    container_name: prometheus\\n    ports:\\n      - \\"9090:9090\\"\\n```\\n\\n\uae30\ubcf8\uc801\uc73c\ub85c, `promtheuse`\ub294 9090 \ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud558\uae30\uc5d0 9090 \ud3ec\ud2b8\ub97c \ubc14\uc778\ub529 \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\nvolumes\ub294 \ucd94\ud6c4 \uc124\uba85\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n`docker compose -f docker-compose-monitoring.yml up -d`\ub97c \ud1b5\ud574 \uc2e4\ud589\ud55c \ub4a4, 9090\ud3ec\ud2b8\uc5d0 \uc811\uadfc\ud558\uba74 \ub300\uc2dc\ubcf4\ub4dc\ub97c \ud655\uc778 \ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./9-9-9.jpeg)\\n\\n### \uc124\uc815\\n\\n\uc774\ud6c4 \uc0c1\ub2e8 \uba54\ub274 \ubc14\uc5d0\uc11c `Status` -> `Targets`\ub97c \ud1b5\ud574 prometheus\uac00 polling \uc911\uc778 \ud0c0\uac9f\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./12-12-12.jpeg)\\n\\n![](./13-13-13.jpeg)\\n\\n\ud604\uc7ac \uc544\ubb34\ub7f0 \uc124\uc815\uc744 \ud558\uc9c0 \uc54a\uc558\uae30\uc5d0 `self`\ub85c metrics\ub97c `Scrape` \ud558\ub294 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub7f0 \ud0c0\uac9f \uc124\uc815\uc740 `prometheus.yml`\uc5d0\uc11c \uc218\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud604\uc7ac \uc800\ub294 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ub0b4\uc5d0\uc11c \ub3d9\uc791\uc911\uc774\ub2e4 \ubcf4\ub2c8, \uc678\ubd80\uc5d0 `prometheus.yml`\ud30c\uc77c\uc744 \uc791\uc131 \ud55c \ub4a4, \ubcfc\ub968 \ub9c8\uc6b4\ud2b8\ub97c \ud1b5\ud574 \uc124\uc815\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n`prometheus.yml`\\n\\n```yaml\\n# prometheus.yml\\n\\nscrape_configs:\\n  - job_name: \\"celuveatdev\\"\\n    metrics_path: \\"/api/actuator/prometheus\\"\\n    scrape_interval: 5s\\n    static_configs:\\n      - targets: [\\"localhost:8080\\"]\\n```\\n\\n`metrics_path` : metric \uacbd\ub85c \uc9c0\uc815\\n\\n`static_configs: - targets`\uc5d0\ub294 host\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\\n\\n`scrape_interval`: \uc218\uc9d1 \uc8fc\uae30\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\\n\\n\uc774\ud6c4 `docker-compose-monitoring.yml` \uc744 \uc218\uc815\ud558\uc5ec \ubcfc\ub968 \ub9c8\uc6b4\ud2b8 \uc124\uc815\uc744 \ud569\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose-monitoring.yml\\n\\nversion: \\"3\\"\\n\\nservices:\\n  prometheus:\\n    image: prom/prometheus:latest\\n    container_name: prometheus\\n    ports:\\n      - \\"9090:9090\\"\\n    volumes:\\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\\n```\\n\\n``./prometheus.yml`\ub294 host\uc5d0\uc11c\uc758 \uacbd\ub85c, `/etc/prometheus/prometheus.yml`\ub294 docker container\ub0b4\ubd80\uc758 \uacbd\ub85c\uc785\ub2c8\ub2e4.\\n\\n\uc774\ud6c4 \ub2e4\uc2dc docker\ub97c \uc2e4\ud589\ud558\uba74 \uc6d0\ud558\ub294 \ud0c0\uac9f\uc774 \uc124\uc815\ub41c \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./14-14-14.jpeg)\\n\\n\uc608\uc2dc\ub85c \ub4e4\uc5c8\ub358 PrmoQL\uc778 `executor_pool_max_threads{name=\\"applicationTaskExecutor\\",}`\uc744 \uba54\uc778 \ud398\uc774\uc9c0\uc5d0\uc11c \uc2e4\ud589\ud558\uba74\\n![](./15-15-15.jpeg)\\n\\n\uc6d0\ud558\ub294 \uba54\ud2b8\ub9ad \uc815\ubcf4\ub97c \uc5bb\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4!\\n\\n\ub354 \ub2e4\uc591\ud55c PromQL\uc744 \ud1b5\ud574 \ub2e4\uc591\ud55c \uc9c0\ud45c\ub4e4\uc744 Table \ubfd0\ub9cc \uc544\ub2c8\ub77c `Graph`\ub85c\ub3c4 \ud655\uc778 \ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n## Grafana\\n\\n`Prometheus`\ub97c \ud1b5\ud574 \uc8fc\uae30\uc801\uc73c\ub85c \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1 \ud560 \uc218 \uc788\uc9c0\ub9cc, \ud655\uc778\ud558\uae30\uc5d4 \uc5b4\ub824\uc6c0\uc774 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub9e4\ubc88 PromQL\uc744 \ud1b5\ud574 \uc6d0\ud558\ub294 \uc9c0\ud45c\ub97c \uc9c8\uc758\ud574\uc57c \ud558\uace0, \uc2dc\uac01\ud654\ub41c \uc790\ub8cc \ub610\ud55c \uadf8\ub798\ud504 \ud558\ub098\uac00 \uc804\ubd80\uc774\uae30 \ub54c\ubb38\uc5d0 \ubd88\ud3b8\ud568\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c `Prometheus`\uc5d0\uc11c \uc218\uc9d1\ud55c \uba54\ud2b8\ub9ad\uc744 \uc720\uc6a9\ud558\uac8c \uc2dc\uac01\ud654 \ud560 \uc218 \uc788\ub294 \uc2dc\uac01\ud654 \ub3c4\uad6c\ub85c\uc11c `Grafana`\ub97c \uc0ac\uc6a9\ud558\ub824 \ud569\ub2c8\ub2e4.\\n\\n### \uc124\uce58\\n\\n`Grafana` \uc5ed\uc2dc \ub3c4\ucee4\ub85c \uad6c\uc131\ud558\uace0\uc790 \ud569\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose-monitoring.yml\\n\\nversion: \'3\'\\n\\nservices:\\n  prometheus:\\n    image: prom/prometheus:latest\\n    container_name: prometheus\\n    ports:\\n      - \\"9090:9090\\"\\n    volumes:\\n       - ./prometheus.yml:/etc/prometheus/prometheus.yml\\n\\n# \ucd94\uac00\\n\\tgrafana:\\n    image: grafana/grafana:latest\\n    container_name: grafana\\n    user: \\"$UID:$GID\\"\\n    ports:\\n      - \\"3000:3000\\"\\n    volumes:\\n      - ./grafana-data:/var/lib/grafana\\n    depends_on:\\n      - prometheus\\n```\\n\\ngrafana\ub294 \uae30\ubcf8\uc801\uc73c\ub85c 3000\ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\\n\ub610, prometheus\ub97c datasource\ub85c \ucd94\uac00\ud560 \uc608\uc815\uc774\ub2e4 \ubcf4\ub2c8, depends_on \uc635\uc158\uc73c\ub85c prometheus \ucee8\ud14c\uc774\ub108\uac00 \uc120\ud589\ub418\ub3c4\ub85d \uc124\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n> **volumes\ub97c \uaf2d \uc124\uc815\ud558\uc154\uc57c \ud569\ub2c8\ub2e4!** \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\uac00 \ub0b4\ub824\uac00\ub3c4 Grafana\uc5d0\uc11c \uc124\uc815\ud55c \ub300\uc2dc\ubcf4\ub4dc\ub098 \ub370\uc774\ud130 \uc18c\uc2a4\uac00 \uc0ac\ub77c\uc9c0\uc9c0 \uc54a\ub3c4\ub85d \ud574\uc57c\ud569\ub2c8\ub2e4.\\n>\\n> \uc774\ub54c, grafana image\ub0b4 `/var/lib/grafana`\uc758 \uc4f0\uae30 \uc791\uc5c5\uc744 \uc704\ud574 `user: \\"$UID:$GID\\"`\ub97c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\\n>\\n> \uc800\ub3c4 \uc54c\uace0 \uc2f6\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\\n\\n`docker compose -f docker-compose-monitoring.yml up -d` \ub97c \ud1b5\ud574 \uc2e4\ud589 \ud55c \ub4a4,\\n\\n3000\ud3ec\ud2b8\ub85c \uc811\uc18d\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ud654\uba74\uc774 \ub098\uc635\ub2c8\ub2e4.\\n\\n![](./16-16-16.jpeg)\\n\\n\ucd08\uae30 \uacc4\uc815\uacfc \ube44\ubc00\ubc88\ud638\ub294 \ubaa8\ub450 \\"admin\\" \uc785\ub2c8\ub2e4.\\n\\n\ucd5c\ucd08 \ub85c\uadf8\uc778 \uc2dc, \ube44\ubc00\ubc88\ud638\ub97c \ubcc0\uacbd \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub85c\uadf8\uc778 \ud6c4 Administration -> Data soureces\uc5d0 \ub4e4\uc5b4\uc640\uc11c prometheus\ub97c \ub4f1\ub85d\ud569\ub2c8\ub2e4.\\n\\n![](./17-17-17.jpeg)\\n\\n\uc774\ud6c4 prometheus\ub97c \uc811\uc18d\ud588\ub358 url\uc744 \uc124\uc815\ud574\uc90d\ub2c8\ub2e4.\\n\\n![](./18-18-18.jpeg)\\n\\nData sources \uc5d0\uc11c \ucd94\uac00\ub41c \uac78 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c [Grafana Labs](https://grafana.com/grafana/dashboards)\uc5d0 \uac00\uc11c \ub2e4\uc591\ud55c Dashboards\ub97c \ud0d0\uc0c9\ud558\uace0 \uc120\ud0dd\ud558\uc5ec \uc801\uc6a9\ud558\uba74 \ub429\ub2c8\ub2e4.\\n\\n`Spring boot`\ub85c \uac80\uc0c9\ud55c \ub4a4, `Spring boot 2.1 System Monitor`\ub97c \uc120\ud0dd\ud569\ub2c8\ub2e4.\\n\\n![](./20-20-20.jpeg)\\n\\n<br />\\n\\n\ud574\ub2f9 \ub300\uc26c\ubcf4\ub4dc\uc758 ID\ub97c \ubcf5\uc0ac \ud55c \ub4a4,\\n![](./21-21-21.jpeg)\\n\\n<br />\\n\\n\uc544\ub798 Import \ub300\uc26c\ubcf4\ub4dc\ub97c \uc120\ud0dd\ud569\ub2c8\ub2e4.\\n\\n\uadf8 \ud6c4 \ubcf5\uc0ac\ud55c ID\ub97c \uc785\ub825\ud558\uba74,\\n\\n![](./22-22-22.jpeg)\\n\\nSpring Boot 2.1 System Monitor \uac00 \ubd88\ub7ec\uc640\uc9c0\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n![](./23-23-23.jpeg)\\n\\nDataSource\ub3c4 \ub4f1\ub85d\ud558\uc5ec \ucd94\uac00\ud558\uba74 \uc544\ub798\uc640 \uac19\uc774 \ub300\uc26c\ubcf4\ub4dc\ub97c \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./24-24-24.jpeg)\\n\\n![](./25-25-25.jpeg)\\n\\n\uc544\ub798 \uba54\ud2b8\ub9ad\uc744 \ud655\uc778\ud558\ub2e4 \ubcf4\uba74 `Jetty Statistics`\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub294\ub370\uc694.\\n![](./26-26-26.jpeg)\\n\\nSpring boot \uc5d0\uc11c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 tomcat was \uba54\ud2b8\ub9ad\uc73c\ub85c \ubcc0\uacbd\uc774 \ud544\uc694\ud574 \ubcf4\uc785\ub2c8\ub2e4.\\n\\n\ub2e4\uc2dc `application`\uc73c\ub85c \ub3cc\uc544\uc640\uc11c `application.yml`\uc5d0 \uc544\ub798 \uc635\uc158\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```yaml\\n# application.yml\\nserver:\\n  tomcat:\\n    mbeanregistry:\\n      enabled: true\\n```\\n\\n\uc774\ud6c4 Dashboard settings\uc5d0\uc11c \uc218\uc815\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\uc744 \ud569\ub2c8\ub2e4.\\n![](./27-27-27.jpeg)\\n\\n\uc774\ud6c4 Query\uc758 \uc774\ub984\uc744 `tomcat_threads_config_max_threads`\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\\n\\n![](./28-28-28.jpeg)\\n![](./29-29-29.jpeg)\\n\\n![](./30-30-30.jpeg)\\n\\n## \uc815\ub9ac\\n\\n\ubaa8\ub2c8\ud130\ub9c1\uc774 \uc774\ub8e8\uc5b4\uc9c0\ub294 \uacfc\uc815\uc744 \ub2e4\uc2dc \uc815\ub9ac\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n`Sping actuator`\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 metrics\ub97c `Micrometer` \ub97c \uad6c\ud604\ud55c prometheus\uc5d0\uac8c \uc81c\uacf5\ud558\uace0, prometheus\ub294 \uc8fc\uae30\uc801\uc73c\ub85c \uc9c0\ud45c\ub4e4\uc744 \ubaa8\uc544 \uc800\uc7a5\ud569\ub2c8\ub2e4.\\n\\n\uc774\ub7f0 prometheus\uc5d0 \uc800\uc7a5\ub418\uc5b4 \uc788\ub294 \ub370\uc774\ud130\ub97c \uc2dc\uac01\ud654 \ud234\uc778 `Grafana`\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub300\uc2dc\ubcf4\ub4dc\ub97c \uad6c\uc131\ud558\uc5ec \ubaa8\ub2c8\ud130\ub9c1 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uac04\ub2e8\ud558\uac8c \uc544\ub798\uc640 \uac19\uc740 \uad6c\uc131\uc774 \uac16\ucd94\uc5b4 \uc9d1\ub2c8\ub2e4.\\n\\n![](https://velog.velcdn.com/images/roycewon/post/6587d618-293b-442a-baf2-e225d0b3b2a8/image.png)"},{"id":"/royce/monitoring2/monitoring-2","metadata":{"permalink":"/team-blog/back-blog/royce/monitoring2/monitoring-2","source":"@site/@backBlog/royce/monitoring2/monitoring-2.mdx","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(2)","description":"Promtail\uacfc Loki\ub85c \ub85c\uadf8 \ud30c\uc77c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","date":"2023-08-14T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 14\uc77c","tags":[{"label":"\ub85c\uadf8","permalink":"/team-blog/back-blog/tags/\ub85c\uadf8"},{"label":"\ubaa8\ub2c8\ud130\ub9c1","permalink":"/team-blog/back-blog/tags/\ubaa8\ub2c8\ud130\ub9c1"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"}],"readingTime":8.22,"hasTruncateMarker":true,"authors":[{"name":"Royce Won","url":"https://github.com/taeyeonroyce","email":"skdlxmtpqms@gmail.com","imageURL":"https://avatars.githubusercontent.com/u/90550065?v=4","key":"taeyeonroyce"}],"frontMatter":{"date":"2023-08-14T00:00:00.000Z","authors":"taeyeonroyce","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(2)","description":"Promtail\uacfc Loki\ub85c \ub85c\uadf8 \ud30c\uc77c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30","keywords":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\ud504\ub86c\ud14c\uc77c","\ub3c4\ucee4","\ub85c\ud0a4"],"tags":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\uc778\ud504\ub77c"]},"prevItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(1)","permalink":"/team-blog/back-blog/royce/monitoring/monitoring-1"},"nextItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(3)","permalink":"/team-blog/back-blog/royce/monitoring3/monitoring-3"}},"content":"Promtail\uacfc Loki\ub85c \ub85c\uadf8 \ud30c\uc77c \ubaa8\ub2c8\ud130\ub9c1\ud558\uae30\\n\\n\x3c!--truncate--\x3e\\n\\n# \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(2)\\n\\n\uc548\ub155\ud558\uc138\uc694, \uc140\ub7fd\uc787\uc758 \ub85c\uc774\uc2a4\uc785\ub2c8\ub2e4.\\n\\n\uc774\uc804 \uae00\uc5d0 \uc774\uc5b4\uc11c \uba54\ud2b8\ub9ad \uc9c0\ud45c \ubfd0\ub9cc \uc544\ub2c8\ub77c logback\uc73c\ub85c \ub0a8\uae30\ub294 \ub85c\uadf8 \ud30c\uc77c\uc744 \ubaa8\ub2c8\ud130\ub9c1 \ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120, \uc800\ud76c \uc140\ub7fd\uc787\uc5d0\uc11c\ub294 log level\uc5d0 \ub098\ub204\uc5b4 \ub2e4\uc74c\uacfc \uac19\uc774 \ud30c\uc77c\uc744 \uc815\ub9ac\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n- `INFO` -> `logs/backend/info`\\n- `WARN` -> `logs/backend/warn`\\n- `ERROR` -> `logs/backend/error`\\n\\n\ub808\ubca8\uc5d0 \ub530\ub77c \uac01\uac01 \ub2e4\ub978 \ud3f4\ub354\uc5d0 \ub0a0\uc9dc\ubcc4, \uc0ac\uc774\uc988\ubcc4\ub85c \ubd84\ub9ac\ub418\uc5b4 \uc800\uc7a5\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```sh\\n# info.log\\n\\n01:09:19.973 [http-nio-8080-exec-2] INFO  c.c.c.l.r.RequestLogInterceptor - [Web Request START] : [\\n#  ...\\n\\n\\t[Method] = [GET]\\n\\t[URL] = [http://localhost:8080/api/celebs]\\n\\t[QueryString] = [null]\\n\\t[Params] = [\\n\\n\\t]\\n\\t[Body] = []\\n\\t[Controller Method] = [CelebController.findAll()]\\n]\\n01:09:19.982 [http-nio-8080-exec-2] INFO  com.celuveat.common.log.Logger                        - [f28a3f61(anonymous)]  |---\x3eCelebController.findAll()\\n01:09:19.984 [http-nio-8080-exec-2] INFO  com.celuveat.common.log.Logger                        - [f28a3f61(anonymous)]  |    |---\x3eCelebRepository.findAll()\\n01:09:20.044 [http-nio-8080-exec-2] INFO  com.celuveat.common.log.Logger                        - [f28a3f61(anonymous)]  |    |<---CelebRepository.findAll()                                                time=74ms\\n01:09:20.046 [http-nio-8080-exec-2] INFO  com.celuveat.common.log.Logger                        - [f28a3f61(anonymous)]  |<---CelebController.findAll()                                                     time=76ms\\n01:09:20.077 [http-nio-8080-exec-2] INFO  c.c.c.l.r.RequestLogInterceptor                       - [Web Request END] : [\\n\\t[ID] = [f28a3f61(anonymous)]\\n\\t[Status] = [200]\\n\\t[Headers] = [\\n\\t\\t[Vary] = [[Origin, Access-Control-Request-Method, Access-Control-Request-Headers]]\\n\\t]\\n\\t[Body] = [\\n\\t\\t[ ]\\n\\t]\\n\\t[Query Count] = [1]\\n\\t[Total Time] = [107ms]\\n]\\n```\\n\\n`Logback`\uc744 \ud1b5\ud574 \uc720\uc6a9\ud55c \uc815\ubcf4\ub4e4\uc744 \ub0a8\uae30\uc9c0\ub9cc, \ub9e4\ubc88 \uc11c\ubc84\uc5d0 \uc9c1\uc811 \ub4e4\uc5b4\uac00\uc11c \ud655\uc778\ud574\uc57c \ud55c\ub2e4\ub294 \ubd88\ud3b8\ud568\uc774 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ub0a0\uc9dc\uc640 \uc0ac\uc774\uc988, \ub808\ubca8 \ubcc4\ub85c\ub3c4 \ubd84\ub9ac\ub418\uc5b4 \uc788\uace0, \uac1c\ubc1c \ubc0f \uc6b4\uc601 \ud658\uacbd\ubcc4\ub85c\ub3c4 \ub85c\uadf8\uac00 \ubd84\ub9ac\ub418\uc5b4 \uc788\uc5b4 \ud1b5\ud569\uc801\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud558\ub294 \uac83\uc740 \uc0c1\ub2f9\ud788 \uc5b4\ub824\uc6e0\uc2b5\ub2c8\ub2e4.\\n\\n\ub610, \ub4a4\uc8fd\ubc15\uc8fd\uc73c\ub85c \uc11e\uc5ec \uc788\ub294 \ub85c\uadf8\ub4e4\uc744 \uc27d\uac8c \ud655\uc778\ud558\uae30 \uc5b4\ub824\uc6e0\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud558\uae30 \uc704\ud574 `Promtail`\uacfc `Loki`\ub97c \ub3c4\uc785\ud558\uae30\ub85c \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n## Promtail\uacfc Loki\\n\\nPromatil [\uacf5\uc2dd\ubb38\uc11c](https://grafana.com/docs/loki/latest/clients/promtail/)\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uba85\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n> Promtail is an agent which ships the contents of **local logs to a private Grafana Loki instance** or Grafana Cloud. It is usually deployed to every machine that has applications needed to be monitored.\\n>\\n> It primarily:\\n>\\n> - Discovers targets\\n> - Attaches labels to log streams\\n> - **Pushes them to the Loki instance.**\\n\\n\uac04\ub2e8\ud558\uac8c \ucd94\ub824\ubcf4\uba74, Promtail\uc740 \ubaa8\ub2c8\ud130\ub9c1\uc774 \ud544\uc694\ud55c \ub85c\uceec \uba38\uc2e0\uc5d0\uc11c `Loki instance`\uc5d0 \ub85c\uceec \ub85c\uadf8\ub97c \ud478\uc2dc\ud558\ub294 agent\ub77c\uace0 \ud569\ub2c8\ub2e4.\\n\\nLoki [\uacf5\uc2dd\ubb38\uc11c](https://grafana.com/docs/loki/latest/fundamentals/overview/)\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uba85\ud558\ub124\uc694.\\n\\n> Grafana Loki is a log aggregation tool, and it is the core of a fully-featured logging stack.\\n\\n\ub85c\uae45\uc5d0 \ud2b9\ud654\ub41c \uc9d1\uacc4 \ub3c4\uad6c\ub85c \uc774\ud574\ud558\uba74 \uc88b\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.![](2.jpeg)\\n\\n(https://grafana.com/docs/loki/latest/fundamentals/overview/)\\n\\n\uacf5\uc2dd\ubb38\uc11c\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 overview \uc785\ub2c8\ub2e4.\\nPromtail\uacfc \uac19\uc740 agent\uac00 app\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ub85c\uadf8\ub4e4\uc744 \uc218\uc9d1\ud558\uc5ec HTTP API\ub97c \ud1b5\ud574 `Loki`\uc5d0 \uc804\uc1a1\ud558\ub294 \uad6c\uc870\ub97c \ub744\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub300\ub7b5\uc801\uc778 \uad6c\uc870\ub97c \ud30c\uc545\ud588\uc73c\ub2c8, \ube60\ub974\uac8c \uc801\uc6a9\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n## \uc801\uc6a9\ud558\uae30\\n\\n\uc774\ubc88\uc5d0\ub3c4 `docker-compose-monitoring.yml`\uc5d0 \uad6c\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose-monitoring.yml\\n\\nversion: \\"3\\"\\n\\nservices:\\n  prometheus:\\n    image: prom/prometheus:latest\\n    container_name: prometheus\\n    ports:\\n      - \\"9090:9090\\"\\n    volumes:\\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\\n    depends_on:\\n      - celuveatdev\\n\\n  grafana:\\n    image: grafana/grafana:latest\\n    container_name: grafana\\n    user: \\"$UID:$GID\\"\\n    ports:\\n      - \\"3000:3000\\"\\n    volumes:\\n      - ./grafana-data:/var/lib/grafana\\n    depends_on:\\n      - prometheus\\n\\n  # \ucd94\uac00\ub428\\n  loki:\\n    image: grafana/loki:latest\\n    ports:\\n      - \\"3100:3100\\"\\n    command: -config.file=/etc/loki/local-config.yaml\\n\\n  promtail:\\n    image: grafana/promtail:latest\\n    volumes:\\n      - ./logs/backend:/logs\\n      - ./promtail-config.yml:/etc/promtail/config.yml\\n    command: -config.file=/etc/promtail/config.yml\\n```\\n\\n\uc6b0\uc120 `Loki`\uc5d0 \ub300\ud574 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. Loki \uc774\ubbf8\uc9c0\ub97c \ub2e4\uc6b4 \ubc1b\uace0, \ud3ec\ud2b8\ub97c \ubc14\uc778\ub529 \ud558\ub294\uac74 \ubcc4\ub85c \uc5b4\uc0c9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\\n\\n`command` \uc635\uc158\uc740 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\uac00 \uc2e4\ud589\ub41c \ud6c4 \uc2e4\ud589\ud558\ub294 \uba85\ub839\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n`-config.file=/etc/loki/local-config.yaml`\uc740 Loki \uac00 \uc2e4\ud589\ub420 \ub54c \uc0ac\uc6a9\ud560 \uc124\uc815 \ud30c\uc77c\uc744 \uc9c0\uc815\ud558\ub294 \uac83 \uc778\ub370, \uac74\ub4e4\uc77c \ud544\uc694\uac00 \uc5c6\uc5b4\uc11c \uae30\ubcf8\uac12\uc73c\ub85c \uc124\uc815\ud574\ub450\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n\ub2e4\uc74c\uc73c\ub85c `promtail`\uc785\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc811\uadfc\ud574\uc57c\ud560 `log` \ud30c\uc77c\ub4e4\uc774 \uc800\uc7a5\ub418\uc5b4\uc788\ub294 \ud638\uc2a4\ud2b8\uc758 `./logs/backend`\ub97c \ubd88\ub968 \ub9c8\uc6b4\ud2b8 \uc2dc\ucf1c\uc90d\ub2c8\ub2e4.\\n\\n\uc774\ud6c4 `promtail`\uc774 Log\ub97c \uc218\uc9d1\ud558\ub294 job\uc744 \uc815\uc758\ud558\ub294 `/etc/promtail/config.yml`\ub97c \uc9c1\uc811 \uc815\uc758\ud560 \uc218 \uc788\ub3c4\ub85d \uc774 \uc5ed\uc2dc\ub3c4 \ub9c8\uc6b4\ud2b8 \uc2dc\ucf1c\uc90d\ub2c8\ub2e4.\\n\\nLoki\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc0ac\uc6a9\ud560 \uc124\uc808 \ud30c\uc77c\uc744 \uae30\ubcf8\uac12\uc73c\ub85c \uc124\uc815\ud558\uc5ec \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub7fc, Log\ub97c \uc218\uc9d1\ud558\ub294 job\uc744 `promtail-config.yml`\uc5d0\uc11c \uc815\uc758\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\npositions:\\n  filename: /tmp/positions.yaml # \ub3d9\uae30\ud654 \uc791\uc5c5\uc744 \uc774\ub8e8\uae30 \uc704\ud574 promtail\uc774 \uc77d\uc740 \ub9c8\uc9c0\ub9c9 \ub85c\uadf8 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\ub294 \uacf3\\n\\nclients:\\n  - url: http://localhost:3100/loki/api/v1/push # push\ud560 Loki\uc758 \uc8fc\uc18c\\n\\nscrape_configs:\\n  - job_name: info\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: info_logs\\n          __path__: ./logs/info/*.log # info \ud3f4\ub354 \ub0b4\uc5d0 log \ud30c\uc77c\ub4e4 \ubaa8\ub450 \uc218\uc9d1\\n\\n  - job_name: warn\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: warn_logs\\n          __path__: ./logs/warn/*.log # warn \ud3f4\ub354 \ub0b4\uc5d0 log \ud30c\uc77c\ub4e4 \ubaa8\ub450 \uc218\uc9d1\\n\\n  - job_name: error\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: error_logs\\n          __path__: ./logs/error/*.log # error \ud3f4\ub354 \ub0b4\uc5d0 log \ud30c\uc77c\ub4e4 \ubaa8\ub450 \uc218\uc9d1\\n```\\n\\n\uad6c\uc131\uc774 \uc644\ub8cc\ub418\uba74, docker\uc744 \ub2e4\uc2dc \uc2e4\ud589\ud55c \ub4a4 Grafana\ub85c \ub4e4\uc5b4\uac11\ub2c8\ub2e4!\\n\\nLoki Datasource\ub97c \ucd94\uac00\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n![](3.jpeg)\\n\\n\uc120\ud0dd\uc744 \ud55c \ub4a4,\\n\\n![](4.jpeg)\\n\\nLoki\uc758 \uc8fc\uc18c\ub97c \uc785\ub825\ud558\uc5ec \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n\uc774\ud6c4 \uc0c8\ub85c\uc6b4 \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc791\uc131\ud569\ub2c8\ub2e4.\\n\\n![](5.jpeg)\\n\\n![](6.jpeg)\\n\\n![](7.jpeg)\\n\\n\uc6d0\ud558\ub294 job\uc744 \uc124\uc815\ud558\uba74 \ud574\ub2f9 job\uc774 \uc218\uc9d1\ud55c \ub85c\uadf8\ub4e4\uc744 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](8.jpeg)\\n\\nlog\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \ud55c \uc904 \ub2e8\uc704\ub85c \ubd84\ub9ac\ub418\uc5b4 \uc791\uc131\ub418\ub294\ub370\uc694.\\n\\n\uc800\ud76c celuveat\uc758 \ub85c\uae45 \ubc29\uc2dd\uc5d0 \ub9de\uac8c `multiline` \uc635\uc158\uc744 \ucd94\uac00\ud558\uc5ec \ud55c \ube14\ub7ed\uc758 \ub2e8\uc704\ub97c \uc870\uc815\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\npipeline_stages:\\n  - multiline:\\n      firstline: \'^\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{3} \\\\[.*\\\\] INFO  .* \\\\[Web Request (START|END)\\\\]\'\\n      max_wait_time: 1s\\n      max_lines: 500\\n```\\n\\n\ube14\ub7ed\uc758 \ub2e8\uc704\uac00 [Web Request START/END]\ub97c \uae30\uc900\uc73c\ub85c \ub098\ub220 \ubcfc \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n![](./9.jpeg)\\n\\n\ub610, error \ub85c\uadf8\uc758 \uacbd\uc6b0\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ucd94\uac00\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\npipeline_stages:\\n  - multiline:\\n      firstline: \'^\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{3} \\\\[.*\\\\] ERROR\'\\n      max_wait_time: 1s\\n      max_lines: 500\\n```\\n\\n![](./10.jpeg)\\n\\n\ucd5c\uc885 \ud615\ud0dc\\n\\n```yaml\\n# promtail-confing.yml\\n\\npositions:\\n  filename: /tmp/positions.yaml\\n\\nclients:\\n  - url: http://localhost:3100/loki/api/v1/push\\n\\nscrape_configs:\\n  - job_name: info\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: info_logs\\n          __path__: ./logs/info/*.log\\n    pipeline_stages:\\n      - multiline:\\n          firstline: \'^\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{3} \\\\[.*\\\\] INFO  .* \\\\[Web Request (START|END)\\\\]\'\\n          max_wait_time: 1s\\n          max_lines: 500\\n\\n  - job_name: warn\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: warn_logs\\n          __path__: ./logs/warn/*.log\\n\\n  - job_name: error\\n    static_configs:\\n      - targets:\\n          - localhost\\n        labels:\\n          job: error_logs\\n          __path__: ./logs/error/*.log\\n    pipeline_stages:\\n      - multiline:\\n          firstline: \'^\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{3} \\\\[.*\\\\] ERROR\'\\n          max_wait_time: 1s\\n          max_lines: 500\\n```\\n\\n## \ub2e4\uc74c\uc73c\ub85c\\n\\n\uc774\uc81c \ub85c\uadf8\ubc31\uc73c\ub85c \ub0a8\uae30\ub294 \ub85c\uadf8\ub4e4 \uae4c\uc9c0 \ubaa8\ub2c8\ud130\ub9c1\uc774 \uac00\ub2a5\ud574\uc84c\uc2b5\ub2c8\ub2e4.\\n\\nDocker\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube44\uad50\uc801 \uac04\ub2e8\ud558\uac8c \uc124\uce58\ud558\uc5ec \uad6c\uc131\ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ubb3c\ub860 \uc9c1\uc811 \uc124\uce58\ud574\ub3c4 \ub418\uc9c0\ub9cc, \ud604\uc7ac \uc778\uc2a4\ud134\uc2a4 \uc0c1\ud669\uc5d0 \ub530\ub77c \ubaa8\ub2c8\ud130\ub9c1 \uc11c\ubc84\ub97c \uc5b4\ub514\uc5d0 \uad6c\ucd95\ud558\uc5ec\uc57c \ud558\ub294 \uc9c0 \ud655\uc815\uc774 \ub418\uc9c0 \uc54a\uc544 \ube60\ub974\uac8c \uc774\uc2dd\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ud574\ubcf4\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ub610, \ub2e4\uc74c \ud3ec\uc2a4\ud305\uc774\uc5d0\uc11c \ub3c4\ucee4 \ub124\ud2b8\uc6cc\ud06c\ub97c \ud1b5\ud574\uc11c \ube44\uad50\uc801 \uc548\uc804\ud558\uac8c \ub0b4\ubd80 \ub124\ud2b8\uc6cc\ud06c\ub97c \ud1b5\ud574 meteric\uc815\ubcf4\ub4e4\uc744 \ub178\ucd9c \uc2dc\ud0a4\uc9c0 \uc54a\uace0 \ubaa8\ub2c8\ud130\ub9c1\uc774 \uac00\ub2a5\ud558\ub3c4\ub85d \uad6c\uc131\ud560 \uc608\uc815\uc785\ub2c8\ub2e4."},{"id":"/royce/monitoring3/monitoring-3","metadata":{"permalink":"/team-blog/back-blog/royce/monitoring3/monitoring-3","source":"@site/@backBlog/royce/monitoring3/monitoring-3.mdx","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(3)","description":"Docker network\ub85c \ub0b4\ubd80\ub9dd \ucc98\ub7fc \uc0ac\uc6a9\ud558\uae30","date":"2023-08-14T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 14\uc77c","tags":[{"label":"\ub85c\uadf8","permalink":"/team-blog/back-blog/tags/\ub85c\uadf8"},{"label":"\ubaa8\ub2c8\ud130\ub9c1","permalink":"/team-blog/back-blog/tags/\ubaa8\ub2c8\ud130\ub9c1"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"}],"readingTime":8.87,"hasTruncateMarker":true,"authors":[{"name":"Royce Won","url":"https://github.com/taeyeonroyce","email":"skdlxmtpqms@gmail.com","imageURL":"https://avatars.githubusercontent.com/u/90550065?v=4","key":"taeyeonroyce"}],"frontMatter":{"date":"2023-08-14T00:00:00.000Z","authors":"taeyeonroyce","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(3)","description":"Docker network\ub85c \ub0b4\ubd80\ub9dd \ucc98\ub7fc \uc0ac\uc6a9\ud558\uae30","keywords":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\ub3c4\ucee4"],"tags":["\ub85c\uadf8","\ubaa8\ub2c8\ud130\ub9c1","\uc778\ud504\ub77c"]},"prevItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(2)","permalink":"/team-blog/back-blog/royce/monitoring2/monitoring-2"},"nextItem":{"title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (3) docker\uc640 github actions\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-3/cicd3"}},"content":"\ubaa8\ub2c8\ud130\ub9c1\uc5d0 \ubcf4\uc548\uc744 \uc2e0\uacbd\uc4f0\uc790\\n\\n\x3c!--truncate--\x3e\\n\\n# \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(3)\\n\\n\uc548\ub155\ud558\uc138\uc694, \uc140\ub7fd\uc787\uc758 \ub85c\uc774\uc2a4\uc785\ub2c8\ub2e4.\\n\\n\uc774\uc804 \uae00\ub4e4\uc744 \ud1b5\ud574 \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc801\uc808\ud788 \uad6c\uc131\ud558\uc600\ub294\ub370\uc694.\\n\\n\uc774\ubc88\uc5d4 \ubcf4\uc548\uc801\uc778 \ubd80\ubd84\uc5d0 \ub300\ud574 \uc2e0\uacbd\uc4f0\uba70 \uac1c\uc120\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uba54\ud2b8\ub9ad\uc740 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ub300\ud55c \ub2e4\uc591\ud55c \uc9c0\ud45c\ub4e4\uc744 \ub098\ud0c0\ub0b4\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0, \uad00\ub9ac\uc790\uc785\uc7a5\uc5d0\uc11c\ub294 \uc720\uc6a9\ud55c \uc815\ubcf4\uc774\uba74\uc11c\ub3c4 \ub178\ucd9c\ub418\uba74 \uc704\ud5d8\ud560 \uc218 \uc788\ub294 \uc9c0\ud45c\uc785\ub2c8\ub2e4.\\n\\n\ud604\uc7ac `Spring Actuator`, `Prometheus` \ub294 \uc678\ubd80\uc5d0\uc11c \ub204\uad6c\ub4e0\uc9c0 \uc811\uc18d \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. `Granfana`\ub3c4 \uc811\uadfc\ud560 \uc218 \uc788\uc9c0\ub9cc, \uc790\uccb4\uc801\uc73c\ub85c \uc81c\uacf5\ud558\ub294 `ID/PW` \uc778\uc99d\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n`Spring Actuator` \uac19\uc740 \uacbd\uc6b0\uc5d0\ub294 Spring application \ub2e8\uc5d0\uc11c \ud574\ub2f9 \uacbd\ub85c (`/actuator`) \uc790\uccb4\uc5d0 \ub300\ud55c \ubcf4\uc548\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. `Intercetpor`\ub098 `Filter`\uc5d0\uc11c \ud574\ub2f9 url\uc5d0 \ub300\ud55c \uc778\uac00 \uc815\ubcf4\ub97c \uac80\uc99d\ud558\ub294 \uc2dd\uc73c\ub85c\uc694.\\n\\n\uadf8\ub7ec\uba74 `Prometheus`\uc5d0\uc11c Scrape \uc694\uccad\uc2dc \uc778\uc99d \uc815\ubcf4\ub97c \ucd94\uac00\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub807\ub2e4\uba74 `Prometheus`\uc5d0 \ub300\ud55c \uc790\uccb4\uc801\uc778 \uc811\uadfc\uc740 \uc5b4\ub5bb\uac8c \ub9c9\uc744 \uc218 \uc788\uc744\uae4c\uc694? \uc774 \ub610\ud55c \ubcf4\uc548\uc744 \ub454\ub2e4\uba74, Grafana\uc5d0\uc11c\uc758 \uc694\uccad\uc5d0\uc11c\ub3c4 \uc778\uc99d \uc815\ubcf4\ub97c \ucd94\uac00\uc801\uc73c\ub85c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n![img](https://velog.velcdn.com/images/roycewon/post/6587d618-293b-442a-baf2-e225d0b3b2a8/image.png)\\n\\n\uc774\ub7f0 \ud50c\ub85c\uc6b0\ub97c \ub530\ub77c \uc774\uc804 \ub2e8\uacc4\uc5d0\uc11c \ubcf4\uc548\uc744 \uc801\uc6a9\ud558\uba74 \uc601\ud5a5\uc744 \ub9ce\uc774 \ubc1b\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc800\ub294 \ubaa8\ub2c8\ud130\ub9c1 \ucee8\ud14c\uc774\ub108\ub4e4 \uac04\uc758 \ud1b5\uc2e0\uc740 \uac00\ub2a5\ud558\uace0, \uc678\ubd80\uc5d0\uc11c\ub294 Grafana\ub97c \ud1b5\ud574\uc11c\ub9cc \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ud574\ubcf4\ub824 \ud569\ub2c8\ub2e4.\\n\\n\ucd5c\uc885\uc801\uc778 \ubaa8\uc2b5\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4.\\n\\n![](./1.jpeg)\\n\\n\ubcf5\uc7a1\ud558\uae34 \ud558\uc9c0\ub9cc, \uacb0\uad6d Grafana\ub97c \ud1b5\ud574\uc11c\ub9cc \ubaa8\ub2c8\ud130\ub9c1 \uc815\ubcf4\uac00 \ub178\ucd9c \ub420 \uc218 \uc788\ub3c4\ub85d \uad00\ub9ac\ud558\ub824\uace0 \ud569\ub2c8\ub2e4.\\n\\n## Actuator \ud3ec\ud2b8 \ubc0f \uacbd\ub85c \ubd84\ub9ac\\n\\n\uc6b0\uc120 Spring actuator\uc758 prometheus endpoints\ub97c \ubd84\ub9ac\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\nActuator\ub294 \uae30\ubcf8\uc801\uc73c\ub85c ``/actuator/{endpoints}` \uc758 \ud615\ud0dc\ub97c \uac00\uc9c0\uae30 \ub54c\ubb38\uc5d0 \ube44\uad50\uc801 \uc27d\uac8c \uc608\uce21\ud558\uace0 \uc811\uadfc \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub530\ub77c\uc11c \uc544\ub798 \uc124\uc815\uc744 \ud1b5\ud574 \ud574\ub2f9 \ub9e4\ud2b8\ub9ad \uc9c0\ud45c\uc758 url\uc744 \ubd84\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\n# application.yml\\n\\nmanagement:\\n  endpoints:\\n    web:\\n      exposure:\\n        include: \\"prometheus\\"\\n  server:\\n    port: ${SECRET PORT}\\n    base-path: ${SECRET PATH}\\n```\\n\\n\uc774\uc81c `localhost:8080/actuator/prometheus` \ub294\\n\\n`localhost:{secret_port}/{secret_path}/actuator/prometheus` \uacbd\ub85c\ub85c \ub178\ucd9c\ub418\uac8c \ub429\ub2c8\ub2e4.\\n\\n![](./2.jpeg)\\n\\n_(port: 20808, base-path: secret \uc778 \uacbd\uc6b0)_\\n\\n> 8080\ub97c \uc0ac\uc6a9\ud558\ub294 \ud1b0\ucea3 context\uc640 \ubd84\ub9ac\ub418\uc5b4 \uc774\uc804 server.servlet.contextPath=\\"/api\\" \ub294 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c \ub2ec\ub77c\uc9c4 endpoint\uc5d0 \ub9de\uac8c prometheus\uc5d0\uc11c \uc124\uc815\uc744 \ubcc0\uacbd\ud574\uc8fc\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n## Docker network\\n\\n`Docker Network`\ub780 \uc2e4\ud589\ub41c \uac01\uac01\uc758 \ucee8\ud14c\uc774\ub108\ub07c\ub9ac \uc5f0\uacb0\ud558\uae30 \uc704\ud55c \ub17c\ub9ac\uc801\uc778 \ub124\ud2b8\uc6cc\ud06c\uc785\ub2c8\ub2e4.\\n\\nDocker Network\ub97c \uad6c\uc131\ud558\uba74 \uac19\uc740 \ub124\ud2b8\uc6cc\ud06c \uc548\uc5d0\uc11c\ub294 \uac01\uac01\uc758 IP\ub97c \uc9c0\uc815\ud560 \ud544\uc694 \uc5c6\uc774 `name`\ub9cc\uc73c\ub85c \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc774 \uac00\ub2a5\ud558\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub610\ud55c \uc544\uc6c3\ubc14\uc6b4\ub4dc \ud3ec\ud2b8\ub97c \uc624\ud508\ud558\uc9c0 \uc54a\uace0\ub3c4 \ub0b4\ubd80\uc801\uc73c\ub85c\ub9cc \ud1b5\uc2e0\ud558\uac8c \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc77c\uc885\uc758 private network\ub97c \uad6c\ud604 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uba3c\uc800, Sping application\uacfc monitoring \ud234\ub4e4\uc774 \uc0ac\uc6a9\ud560 network\ub97c \ud558\ub098 \uc0dd\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\n docker network create celuveat_network\\n```\\n\\n\uc774\ud6c4 `docker network ls`\ub97c \ud1b5\ud574 \uc0dd\uc131\ub41c \ub124\ud2b8\uc6cc\ud06c\ub97c \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./3.jpeg)\\n\\nDocker Network\uc5d0\ub294 3\uac00\uc9c0\uc758 \ub4dc\ub77c\uc774\ubc84\uac00 \uc788\ub294\ub370, \uae30\ubcf8\uc801\uc73c\ub85c `bridge`\ub85c \uc0dd\uc131\ub429\ub2c8\ub2e4.\\n(\ucc38\uace0: https://docs.docker.com/network/drivers/)\\n\\n\uc6b0\uc120 \ub3d9\uc77c\ud55c \ud638\uc2a4\ud2b8(ec2)\uc5d0\uc11c \ub3c4\ucee4 \uc774\ubbf8\uc9c0\uac04\uc758 \ud1b5\uc2e0\uc744 \uc704\ud574 \uc0ac\uc6a9\ub418\ubbc0\ub85c `bridge` driver\ub85c \uad6c\uc131\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\nDocker network\uc640 \ud568\uaed8 \uac01\uac01\uc758 \ucee8\ud14c\uc774\ub108\ub4e4\uc744 \uad6c\uc131\ud558\ub294 `docker-compose-monitoring.yml` \ud30c\uc77c\uc744 \uc218\uc815\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose-monitoring.yml\\n\\nversion: \\"3\\"\\n\\nservices:\\n  prometheus:\\n    image: prom/prometheus:latest\\n    container_name: prometheus\\n    networks:\\n      - celuveat_network\\n    #ports:\\n    #  - \\"9090:9090\\" \uc678\ubd80 \ud3ec\ud2b8 \ubc14\uc778\ub529 \uc81c\uac70\\n    volumes:\\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\\n    depends_on:\\n      - celuveatdev\\n\\n  grafana:\\n    image: grafana/grafana:latest\\n    container_name: grafana\\n    networks:\\n      - celuveat_network\\n    user: \\"$UID:$GID\\"\\n    ports:\\n      - \\"3000:3000\\"\\n    volumes:\\n      - ./grafana-data:/var/lib/grafana\\n    depends_on:\\n      - prometheus\\n\\n  loki:\\n    image: grafana/loki:latest\\n    networks:\\n      - celuveat_network\\n    # ports:\\n    #  - \\"3100:3100\\" \uc678\ubd80 \ud3ec\ud2b8 \ubc14\uc778\ub529 \uc81c\uac70\\n    command: -config.file=/etc/loki/local-config.yaml\\n\\n  promtail:\\n    image: grafana/promtail:latest\\n    networks:\\n      - celuveat_network\\n    volumes:\\n      - ./logs:/logs\\n      - ./promtail-config.yml:/etc/promtail/config.yml\\n    command: -config.file=/etc/promtail/config.yml\\n\\nnetworks:\\n  celuveat_network:\\n    external: true\\n```\\n\\n\uac01\uac01\uc758 \uc11c\ube44\uc2a4 \ub9c8\ub2e4 networks \uc635\uc158\uc744 \ucd94\uac00\ud558\uc5ec network\uc5d0 \uad6c\uc131 \uc2dc\ucf30\uace0,\\n\\n```yaml\\nnetworks:\\n  - celuveat_network\\n```\\n\\ncompose \ud30c\uc77c \ud558\ub2e8\uc5d0 \uc544\ub798 \uc635\uc158\uc744 \ud1b5\ud574 \uc774\ubc88 compose\ud30c\uc77c\uc5d0\uc11c \uad6c\uc131\ud558\ub294 \uac83\uc774 \uc544\ub2cc \uc874\uc7ac\ud558\ub294 network\uc784\uc744 \uba85\uc2dc\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\nnetworks:\\n  celuveat_network:\\n    external: true\\n```\\n\\n\ub610, \uc678\ubd80 \ud3ec\ud2b8 \ubc14\uc778\ub529 \uc5c6\uc774 private network\ub97c \ud1b5\ud574\uc11c \uc811\uadfc\ud558\ub824\uace0 \ud558\ub294 prometheus\uc758 \ud3ec\ud2b8 \ubc14\uc778\ub529 \uc635\uc158\ub3c4 \uc81c\uac70\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc5d0 \ub9de\uac8c Spring application\uc744 \uad6c\uc131\ud558\ub294 docker-compose.yml \ud30c\uc77c\ub3c4 \uc218\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\n# docker-compose.yml\\n\\nversion: \\"3\\"\\n\\nservices:\\n  celuveatdev:\\n    image: roycewon/celuvedev:0.0.1\\n    networks: # \ucd94\uac00\ub41c \uc635\uc158\\n      - celuveat_network\\n    container_name: celuveatdev\\n    ports:\\n      - \\"8080:8080\\"\\n    environment:\\n      - SPRING_PROFILES_ACTIVE=prod\\n    volumes:\\n      - /logs:/logs\\n\\nnetworks:\\n  celuveat_network:\\n    external: true\\n```\\n\\n## \uc124\uc815 \uc218\uc815\\n\\n\uc774\uc81c private \ub9dd\uc73c\ub85c \uc228\uc5b4\ubc84\ub9b0 prometheus\uc640 loki\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uc815 \uac12\ub4e4\uc744 \ubcc0\uacbd\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 docker network\ub97c \ud1b5\ud574 \uc774\uc81c ip\uac00 \uc544\ub2cc, \ucee8\ud14c\uc774\ub108 \uc774\ub984\uc73c\ub85c \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uba3c\uc800 prometheus -> spring application\uc5d0 \uc811\uadfc\ud558\uc5ec \uba54\ud2b8\ub9ad\uc744 \uc218\uc9d1\ud558\ub294 \uc124\uc815\uc744 \uc218\uc815\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\nscrape_configs:\\n  - job_name: \\"celuveatdev\\"\\n    metrics_path: \\"/{secret_base_path}/actuator/prometheus\\"\\n    scrape_interval: 5s\\n    static_configs:\\n      - targets: [\\"celuveatdev:{secret_port}\\"] # \ubcc0\uacbd\\n```\\n\\n\uc774\uc81c ip, localhost\uac00 \uc544\ub2cc `celuveatdev`\ub77c\ub294 \ucee8\ud14c\uc774\ub108 \uc774\ub984\uc73c\ub85c \uc9c0\uc815\ud558\ub3c4\ub85d \uc218\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4. \ub610, \uc55e\uc11c \ubcc0\uacbd\ud574\ub450\uc5c8\ub358 port\uc640 base-path\uc5d0 \ub9de\uac8c \uc218\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\ub2e4\uc74c\uc73c\ub85c log\ud30c\uc77c\uc744 \uc218\uc9d1\ud558\uc5ec loki\ub85c \ubcf4\ub0b4\ub294 promtail\uc758 \uac12\uc744 \ubcc0\uacbd\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc544\ub798 `clients.url` \uc635\uc158\ub9cc localhost(ip) -> loki \ub77c\ub294 \ucee8\ud14c\uc774\ub108 \uc774\ub984\uc73c\ub85c \uc9c0\uc815\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yaml\\nclients:\\n  - url: http://loki:3100/loki/api/v1/push\\n```\\n\\n\ub9c8\uc9c0\ub9c9\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\uc774 \uac00\ub2a5\ud55c grafana\uc785\ub2c8\ub2e4!\\n\\n\uc55e\uc11c \ud588\ub358 \uc801\uc6a9\ubc29\uc2dd\uacfc \ub3d9\uc77c\ud558\uac8c ip \ub300\uc2e0 container \uc774\ub984\uc73c\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4.\\n\\n![](./4.jpeg)\\n\\n![](./5.jpeg)\\n\\n\uc774\ud6c4 docker-compose\ub97c \uc7ac\uc2e4\ud589 \ud558\uba74 \ub300\uc2dc\ubcf4\ub4dc\uac00 \uc798 \uc791\ub3d9\ud558\ub294 \uac83\uc744 \ud655\uc778 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![](./6.jpeg)\\n\\n\uadf8\ub9ac\uace0 Prometheus\uc758 \uae30\ubcf8 \ud3ec\ud2b8\uc600\ub358 9090\uc73c\ub85c\ub294 \uc811\uadfc\uc774 \ubd88\uac00\ud569\ub2c8\ub2e4.\\n\\n![](./7.jpeg)\\n\\n8080\ud3ec\ud2b8\uc5d0\uc11c \ubd84\ub9ac\ud588\ub358 Spring actuator \uc5ed\uc2dc 8080\uc678\uc758 \ud3ec\ud2b8\uc5d0 \ud560\ub2f9\ub418\uc5c8\uae30 \ub54c\ubb38\uc5d0 \uc678\ubd80\uc5d0\uc11c \uc811\uadfc\ud560 \uc218 \uc5c6\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4!\\n\\n\ucee8\ud14c\uc774\ub108 \uc774\ub984\ub9cc\uc73c\ub85c \uac00\ub2a5\ud588\ub358 \uc774\uc720\ub294 \ub3c4\ucee4\uc5d0\uc11c \uc9c0\uc6d0\ud574\uc8fc\ub294 \ub0b4\uc7a5 DNS\uc11c\ubc84\uac00 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uba3c\uc800 docker network\uc5d0 \uc5f0\uacb0\ub418\uc5b4\uc788\ub294 dns\ub97c \ud0d0\uc0c9\ud558\uac8c \ub418\uae30 \ub54c\ubb38\uc774\uc8e0.\\n\\n## \uc815\ub9ac\\n\\n3\ubc88\uc758 \uae00\uc5d0 \uac78\uccd0 \ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\uc544\ub798\uc758 \uad6c\uc870\ub85c \uad6c\uc131\ud558\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n![](./1.jpeg)\\n\ubaa8\ub2c8\ud130\ub9c1 \ud234\uc774 \ub2e4\uc591\ud558\uc5ec \uc5b4\ub5a4 \ud234\uc744 \uc801\uc6a9\ud560 \uc9c0 \uc815\ub2f5\uc740 \uc5c6\uc9c0\ub9cc, \uc6b4\uc601\uc911\uc778 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud55c \ubaa8\ub2c8\ud130\ub9c1\uc740 \ubc18\ub4dc\uc2dc \ud544\uc694\ud55c \uac83\uc740 \ubd84\uba85\ud569\ub2c8\ub2e4.\\n\\n\ubaa8\ub2c8\ud130\ub9c1\uc5d0 \uc0ac\uc6a9\ub418\ub294 \uc9c0\ud45c\ub4e4\uc740 \uc720\uc6a9\ud558\uba74\uc11c\ub3c4 \uc704\ud5d8\uc774 \ub420 \uc218 \uc788\uae30\uc5d0 \ubcf4\uc548\uc801\uc740 \ubd80\ubd84\uc5d0 \uc2e0\uacbd\uc744 \uc4f0\uba70 \uad6c\uc131\ud558\uba74 \uc88b\uc744 \ub4ef \ud569\ub2c8\ub2e4!"},{"id":"/mallang/cicd-series/cicd-3/cicd3","metadata":{"permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-3/cicd3","source":"@site/@backBlog/mallang/cicd-series/cicd-3/cicd3.mdx","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (3) docker\uc640 github actions\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","date":"2023-08-07T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 7\uc77c","tags":[{"label":"CI/CD","permalink":"/team-blog/back-blog/tags/ci-cd"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"},{"label":"Github Actions","permalink":"/team-blog/back-blog/tags/github-actions"},{"label":"docker","permalink":"/team-blog/back-blog/tags/docker"}],"readingTime":33.435,"hasTruncateMarker":true,"authors":[{"name":"donghun Shin","url":"https://github.com/shin-mallang","email":"huipulci1@naver.com","imageURL":"https://avatars.githubusercontent.com/u/52229930?v=4","key":"shin-mallang"}],"frontMatter":{"date":"2023-08-07T00:00:00.000Z","authors":"shin-mallang","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (3) docker\uc640 github actions\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","keywords":["CI/CD","\uc778\ud504\ub77c"],"tags":["CI/CD","\uc778\ud504\ub77c","Github Actions","docker"]},"prevItem":{"title":"\ubaa8\ub2c8\ud130\ub9c1 \uc2dc\uc2a4\ud15c \uad6c\ucd95\uae30(3)","permalink":"/team-blog/back-blog/royce/monitoring3/monitoring-3"},"nextItem":{"title":"Submodule \ub3c4\uc785\ud558\uae30","permalink":"/team-blog/back-blog/royce/submodule/submodule"}},"content":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (3) docker\uc640 github actions\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654\\n\\n\x3c!--truncate--\x3e\\n\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uc11c\ub860\\n\\n\uc548\ub155\ud558\uc138\uc694. \uc140\ub7fd\uc787\uc758 \ubc31\uc5d4\ub4dc \ub9d0\ub791\uc785\ub2c8\ub2e4.\\n\\n\ub2e4\ub978 \ud300\ub4e4\uacfc \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc140\ub7fd\uc787 \ud300\ub3c4 \uc9c0\ub09c\uc8fc\uc5d0 \uc2e4\uc81c \uc11c\ubc84\uc5d0 \ubc30\ud3ec\ud558\ub294 \uacfc\uc815\uc744 \uc9c4\ud589\ud588\ub294\ub370\uc694, \uadf8 \uacfc\uc815\uc5d0\uc11c \uc11c\ubc84\uac00 \uac70\uc758 \uc8fd\uc5b4\uac00\ub294 \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4 \ud83d\ude22\\n\\n![front](./front-build.png)\\n\\n\uadf8 \ub2f9\uc2dc \uc11c\ubc84\uc758 \uc5ec\uc720 \uba54\ubaa8\ub9ac\ub97c \ud655\uc778\ud574\ubcf4\ub2c8 \uc774\ubbf8 `Swap Memory`\ub97c `2GB` \uc4f0\uace0 \uc788\ub294 \uc0c1\ud669\uc774\uc5c8\uc74c\uc5d0\ub3c4 `20~50mb` \uc815\ub3c4\ubc16\uc5d0 \ub0a8\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\\n\\n\uc774 \ubb38\uc81c\ub294 \uc77c\uc2dc\uc801\uc73c\ub85c \ubc1c\uc0dd\ud588\uc5b4\uc11c \uc9c0\uae08 \ub2e4\uc2dc \uc2e4\ud589\ud574\ubcf4\uba74 \ucd5c\uc18c 500Mb \uc815\ub3c4\uc758 \uc5ec\uc720 \uba54\ubaa8\ub9ac\uac00 \ub0a8\uac8c \ub418\ub294\ub370\uc694, <br/>\\n\uc9c0\uae08 \ub2f9\uc7a5\uc740 \ubb38\uc81c\uac00 \ub418\uc9c0 \uc54a\ub354\ub77c\ub3c4 \uc5b8\uc820\uac00\ub294 \ubb38\uc81c\uac00 \ub420 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc774\ub97c \ud574\uacb0\ud574\ubcf4\ub824 \ud569\ub2c8\ub2e4.\\n\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \ud574\uacb0 \ubc29\ubc95 \uc0dd\uac01\ud558\uae30\\n\uac00\uc7a5 \uac04\ub2e8\ud788 \uc0dd\uac01\ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc73c\ub85c\ub294 `Swap Memory`\ub97c \ub354 \ub9ce\uc774 \ud560\ub2f9\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n\ub2e4\uc74c [RedHat\uc758 \ubb38\uc11c](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_storage_devices/getting-started-with-swap_managing-storage-devices#recommended-system-swap-space_getting-started-with-swap)\uc5d0 \ub530\ub77c\\n\uc11c\ubc84\uc758 RAM\uc774 2GiB\uc778 \uc800\ud76c\ub294 2\ubc30\uc778 4GB \uc815\ub3c4\ub97c \ud560\ub2f9\ud558\ub294 \uac83\uc73c\ub85c \uac00\uc7a5 \ubb34\ub09c\ud558\uac8c \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.<br/>\\n\uc2a4\ud1a0\ub9ac\uc9c0 \uc6a9\ub7c9\ub3c4 20GB\ub97c \ud560\ub2f9\ud558\uc5ec \uc0ac\uc6a9\ud558\uace0 \uc788\uc73c\ubbc0\ub85c, 4GB\uc758 Swap Memory\ub85c \uc778\ud574 \ubb38\uc81c\uac00 \uc0dd\uae38 \uac83\uc774\ub77c\uace0\ub294 \ud310\ub2e8\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\\n\\n\uc704 \ubc29\ubc95\uc73c\ub85c \ud574\uacb0\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \uac04\ub2e8\ud558\uaca0\uc9c0\ub9cc, \uc774\uc655 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\uae40\uc5d0 \uae30\uc874\uc5d0 \ubd88\ud3b8\ud558\ub2e4\uace0 \ub290\uaf08\ub358 \ubd80\ubd84\ub4e4\ub3c4 \ubaa8\ub450 \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub2e4\ub978 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n\\n## \ud83e\uddd0 \ucd94\uac00\uc801\uc778 \ubd88\ud3b8 \uc0ac\ud56d\\n(\uc808\ub300 \ub3c4\ucee4 \uc4f0\uace0\uc2f6\uc5b4\uc11c \ub290\ub07c\ub294 \uc5b5\uc9c0 \ubd88\ud3b8\ud568\uc774 \uc544\ub2d8\uc744 \ubc1d\ud799\ub2c8\ub2e4)\\n\\n\uc140\ub7fd\uc787\uc740 \ubc30\ud3ec \uc790\ub3d9\ud654\ub97c \uc704\ud574 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc640 \ubc31\uc5d4\ub4dc\ubcc4\ub85c \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ub9cc\ub4e4\uc5b4\ub454 \ud6c4,\\nGithub Actions\uc758 Self Hosted Runner\ub97c \ud1b5\ud574 \uac01 \uc11c\ubc84\uc758 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub97c \uc704\ud574\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uc0ac\uc804 \uc791\uc5c5\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\\n 1. \uac01 \uc11c\ubc84(dev, prod)\uc5d0 `java`\uc640 `yarn`, `node` \ub4f1 \ud504\ub85c\uadf8\ub7a8\uc744 \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ud658\uacbd\uc774 \ubbf8\ub9ac \uc124\uc815\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n 2. \uac01 \uc11c\ubc84\uc5d0 \ud544\uc694\ud55c `\ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8`\ub97c \ubbf8\ub9ac \uc791\uc131\ud574\uc11c \ub123\uc5b4\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n 3. \ubc30\ud3ec \uacfc\uc815\uc5d0 \ubcc0\uacbd \uc0ac\ud56d\uc774 \uc0dd\uae34\ub2e4\uba74 \uac01 \uc11c\ubc84\uc758 \uc2a4\ud06c\ub9bd\ud2b8\ub97c `\ub3d9\uc77c\ud558\uac8c \ubcc0\uacbd`\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uc704\ub294 \ubaa8\ub450 \ub2e4 \uc140\ub7fd\uc787 \ud300\uc774 \ubc30\ud3ec\ub97c \uc9c4\ud589\ud558\uba70 \uacaa\uc5c8\ub358 \uc5b4\ub824\uc6c0\uacfc \uadc0\ucc2e\uc74c\uc774\uba70,\\n\ubb34\uc5c7\ubcf4\ub2e4 \ubb38\uc81c\uc778 \uc810\uc740 `\uc6b0\ud14c\ucf54 \uad50\uc721\uc7a5 \ub0b4\uc5d0\uc11c\ub9cc EC2\uc5d0 ssh \ub85c \uc811\uadfc`\ud560 \uc218 \uc788\uae30\uc5d0 \uc704 3\uac1c\uc758 \uc791\uc5c5 \ubaa8\ub450\\n\ud1f4\uadfc\ud55c \ub4a4 \uc9d1\uc5d0\uc11c\ub294 \uc218\ud589\ud560 \uc218 \uc5c6\ub2e4\ub294 \uac83\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n\uc6b0\ud14c\ucf54\uac00 \ub05d\ub09c \ub4a4 \ud504\ub85c\uc81d\ud2b8\ub97c \uc9c0\uc18d\ud558\uae30 \uc704\ud574 \uc11c\ubc84\ub97c \ub530\ub85c \uc0ac\uc6a9\ud560 \uacbd\uc6b0\uc5d0\ub3c4 \uc704\uc640 \uac19\uc740 \uc124\uc815\uc744 \ub610 \uc9c4\ud589\ud574 \uc8fc\uc5b4\uc57c \ud558\ub294\ub370\uc694,\\n\uc0c1\uc0c1\ub9cc \ud574\ub3c4 \ub108\ubb34 \uadc0\ucc2e\uc740 \ub098\uba38\uc9c0 \uc774\ub7ec\ud55c \ubd88\ud3b8\ud568\uc744 \ud574\uc18c\ud558\uace0\uc790 `\ud83d\udc33 Docker`\ub97c \ub3c4\uc785\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n\\n## \ud83e\uddd0 Docker\ub97c \uc0ac\uc6a9\ud55c CD \uc544\ud0a4\ud14d\ucc98\\n\uc774\ubc88\uc5d0 \uad6c\uc131\ud55c CD \uc544\ud0a4\ud14d\ucc98\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n![cicd](./cicd3.png)\\n\\n\uc804\uccb4\uc801\uc778 Flow\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n 1. main \ube0c\ub79c\uce58\uc5d0 pr\uc5d0 merge\ub418\ub294 \uc21c\uac04 github actions\uc758 CD workflow\uac00 \ub3d9\uc791\ud569\ub2c8\ub2e4.\\n 2. workflow\uc5d0\uc11c\ub294 Dockerfile\uc744 \ud1b5\ud574 react \ud639\uc740 spring \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc774\ubbf8\uc9c0\ub97c \uc0dd\uc131\ud55c \ub4a4 DockerHub\uc5d0 Push\ud569\ub2c8\ub2e4.\\n 3. \uc774\ud6c4 EC2\uc758 self hosted runners\ub97c \ub3d9\uc791\uc2dc\ucf1c DockerHub\uc5d0\uc11c Dockerfile\uc744 Pull \ubc1b\uc2b5\ub2c8\ub2e4.\\n 4. Pull \ubc1b\uc740 Dockerfile\uc744 \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c\ubd80\ud130 \uc704 \uc544\ud0a4\ud14d\ucc98\ub97c \ucc28\uadfc\ucc28\uadfc \uad6c\uc131\ud574 \ub098\uac00\ub3c4\ub85d \ud560\ud150\ub370\uc694, \uadf8 \uc804\uc5d0 Docker\uc5d0 \ub300\ud574\uc11c \uc815\ub9d0 \uac04\ub2e8\ud788\ub9cc \uc54c\uc544\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 [\uacf5\uc2dd\ubb38\uc11c](https://docs.docker.com/)\ub97c \ud3ec\ud568\ud55c \uc5ec\ub7ec \uc88b\uc740 \uc790\ub8cc\ub4e4\uc774 \uc788\uc73c\ubbc0\ub85c \uc774\ub4e4\uc744 \ucc38\uace0\ud574\uc8fc\uc2dc\uba74 \uc88b\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4.\ud83d\ude0e\\n\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Dockerfile\uc774 \ubb54\uac00\uc694?\\n`Docker Image`\ub97c \ub9cc\ub4e4\uae30 \uc704\ud55c \uc124\uc815 \ud30c\uc77c\uc785\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Docker Image\ub294 \ubb54\uac00\uc694?\\n\ucf54\ub4dc, \ub7f0\ud0c0\uc784, \uc2dc\uc2a4\ud15c \ub3c4\uad6c, \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc0f \uc124\uc815\uacfc \uac19\uc740 \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc744 \uc2e4\ud589\ud558\ub294 \ub370 \ud544\uc694\ud55c \ubaa8\ub4e0 \uac83\uc744 \ud3ec\ud568\ud558\ub294 \uc2e4\ud589 \uac00\ub2a5\ud55c \ud328\ud0a4\uc9c0\uc785\ub2c8\ub2e4.\\n`Docker Image`\ub97c \uc2e4\ud589\uc2dc\ud0b4\uc73c\ub85c\uc368 `Docker Container`\uac00 \uc0dd\uc131\ub429\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Docker Container\ub294 \ubb54\uac00\uc694?\\n\ucee8\ud14c\uc774\ub108\ub294 \uc774\ubbf8\uc9c0\uc758 \uc2e4\ud589 \uac00\ub2a5\ud55c \uc778\uc2a4\ud134\uc2a4\uc785\ub2c8\ub2e4.<br/>\\n\uc774\ubbf8\uc9c0\ub85c\ubd80\ud130 \ucee8\ud14c\uc774\ub108\uac00 \uc0dd\uc131\ub418\uba70, \ucee8\ud14c\uc774\ub108\ub294 \ucf54\ub4dc\uc640 \ubaa8\ub4e0 \uc885\uc18d\uc131\uc744 \ud328\ud0a4\uc9c0\ud654\ud558\uc5ec \uc751\uc6a9 \ud504\ub85c\uadf8\ub7a8\uc774 \ud558\ub098\uc758 \ucef4\ud4e8\ud305 \ud658\uacbd\uc5d0\uc11c \uc2e4\ud589\ub420 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4.<br/>\\n\\n\uc989 \uc27d\uac8c \ub9d0\ud574 \ucee8\ud14c\uc774\ub108 \uc18d\uc5d0 Spring \ub4f1\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \ub4e4\uc5b4\uc788\uace0, \ucee8\ud14c\uc774\ub108\ub97c \uc2e4\ud589\ud568\uc73c\ub85c\uc368 \ub0b4\ubd80\uc758 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc2e4\ud589\ub418\ub294 \uac83\uc774\ub77c \uc0dd\uac01\ud558\uba74 \ud3b8\ud569\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n## \ud83e\uddd0 \ubc31\uc5d4\ub4dc CD \ud50c\ub85c\uc6b0\ub97c \ub85c\uceec\uc5d0\uc11c \uc2e4\ud589\ud574\ubcf4\uae30\\nDocker\ub97c \ud1b5\ud55c CD workflow\ub97c \uc791\uc131\ud558\uae30 \uc804\uc5d0, \uc5b4\ub5a4 \uc2dd\uc73c\ub85c \ub3d9\uc791\ud558\ub294\uc9c0\ub97c \uc54c\uc544\uc57c\uaca0\uc8e0?<br/>\\n\uadf8\ub798\uc11c \uc6b0\uc120 \uc804\uccb4\uc801\uc778 \uacfc\uc815\uc744 \ub85c\uceec\uc5d0\uc11c \uc9c1\uc811 \uc9c4\ud589\ud55c \ub4a4, \ud574\ub2f9 \uacfc\uc815\uc744 \ubc14\ud0d5\uc73c\ub85c workflow\ub97c \uc791\uc131\ud558\uc5ec \uc2e4\ud589\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.<br/>\\n(\uc774 \uacfc\uc815\uc740 \ub85c\uceec\uc5d0 \ub3c4\ucee4\uac00 \uae54\ub824 \uc788\ub2e4\uace0 \uac00\uc815\ud558\uace0 \uc9c4\ud589\ud569\ub2c8\ub2e4. \uc774\uc5d0 \ub300\ud574\uc11c\ub294 \uc774\ubbf8 \uc5ec\ub7ec \ube14\ub85c\uadf8\ub098 \uacf5\uc2dd\ubb38\uc11c\uc5d0\uc11c \uc124\uce58\ubc95\uc744 \uc54c\ub824\uc8fc\uae30 \ub54c\ubb38\uc5d0 \ub118\uc5b4\uac00\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.)\\n\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Dockerfile \uc791\uc131\ud558\uae30\\n\\n\uc791\uc131\ub41c Dockerfile\uc740 \uc544\ub798\uc640 \uac19\uc2b5\ub2c8\ub2e4.\\n\\n```dockerfile\\nFROM amazoncorretto:17-alpine-jdk\\n\\nWORKDIR /app\\n\\nCOPY ./build/libs/celuveat-0.0.1-SNAPSHOT.jar /app/celuveat.jar\\n\\nCMD [\\"java\\", \\"-jar\\", \\"celuveat.jar\\"]\\n```\\n\\n\ud55c \uc904 \ud55c \uc904 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```dockerfile\\nFROM amazoncorretto:17-alpine-jdk\\n```\\n\\nDocker \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc \uae30\ubc18\uc774 \ub418\ub294 \uc774\ubbf8\uc9c0 \ub808\uc774\uc5b4\ub97c \uc815\uc758\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.<br/>\\n\uc800\ud76c\uc758 \ud504\ub85c\uc81d\ud2b8\ub294 \uc790\ubc14 17\ubc84\uc804\uc744 \uc0ac\uc6a9\ud558\ubbc0\ub85c amazoncorretto\uc758 jdk 17\ubc84\uc804\uc744 Base image\ub85c \uac00\uc9c0\uace0 \uc624\ub3c4\ub85d \ud569\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n\\n```dockerfile\\nWORKDIR /app\\n```\\n\\n\ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ub0b4\uc5d0\uc11c\uc758 \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac\ub97c `/app`\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.<br/>\\n\uc774\ud6c4 \uc9c4\ud589\ub418\ub294 \uc791\uc5c5\ub4e4\uc740 \ubaa8\ub450 `/app`  \ub0b4\ubd80\uc5d0\uc11c \uc9c4\ud589\ub429\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```dockerfile\\nCOPY ./build/libs/celuveat-0.0.1-SNAPSHOT.jar /app/celuveat.jar\\n```\\nCOPY\ub97c \ud1b5\ud574 \ucee8\ud14c\uc774\ub108 \uc678\ubd80\uc758 \ud30c\uc77c\uc744 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\ub85c \ubcf5\uc0ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ube4c\ub4dc\ub41c jar\ud30c\uc77c\uc740 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\uc5d0\uc11c \uc2e4\ud589\ud574\uc57c \ud558\ubbc0\ub85c, COPY \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \ucee8\ud14c\uc774\ub108\uc758 `/app \ub514\ub809\ud1a0\ub9ac(WORKDIR)`\uc758 \ub0b4\ubd80\ub85c \uc774\ub3d9\uc2dc\ucf1c\uc90d\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```dockerfile\\nCMD [\\"java\\", \\"-jar\\", \\"celuveat.jar\\"]\\n```\\nJar \ud30c\uc77c\uc744 \uc2e4\ud589\uc2dc\ud0a4\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Dockerfile\uc744 \ud1b5\ud574 Docker Image \ube4c\ub4dc\ud558\uae30\\n\\n\uc774\uc81c \uc704 Dockerfile\uc744 \ube4c\ub4dc\ud558\uc5ec Docker Image\ub97c \uc0dd\uc131\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\\nDockerfile\uc758 \uc704\uce58\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n![Dockerfile](./dockerfile1.png)\\n\\n<br/>\\n\\nDockerfile\uc744 \ud1b5\ud574 Docker Image\ub97c \ube4c\ub4dc\ud558\uae30 \uc804\uc5d0 Jar\ud30c\uc77c\uc744 \uc6b0\uc120 \ube4c\ub4dc\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n\\n```bash\\n./gradlew bootJar\\n```\\n\\n<br/>\\n<br/>\\n\\n\uc774\ud6c4 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud569\ub2c8\ub2e4.\\n\\n```bash\\ndocker build -t celuveat/celuveat ./\\n```\\n\\n`-t <name>:<tag>` : \ube4c\ub4dc\ud560 Image\uc758 \uc774\ub984\uacfc tag\ub97c \uc815\ud574\uc90d\ub2c8\ub2e4.<br/>\\n \uc774\ub54c tag\ub294 \uc0dd\ub7b5 \uac00\ub2a5\ud558\uba70, \uc774\ub984\uc758 \uacbd\uc6b0 \ud3b8\uc758\ub97c \uc704\ud574 \uc774\ud6c4 \uc0dd\uc131\ud560 DockerHub\uc758 namespace/repository\uc73c\ub85c \uc9c0\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4. <br/>\\n \uc800\ub294 tag\ub97c \uc0dd\ub7b5\ud588\uc73c\uba70, \uc774 \uacbd\uc6b0 `latest`\uac00 default tag\ub85c \ubd99\uc2b5\ub2c8\ub2e4.\\n\\n\\n\\n![build](./dockerbuild.png)\\n\\n\uc704\uc640 \uac19\uc774 \ubb38\uc81c \uc5c6\uc774 \uc131\uacf5\ud560 \uac83\uc778\ub370\uc694, \uc774\uc81c \uc0dd\uc131\ub41c \uc774\ubbf8\uc9c0\ub97c \ud655\uc778\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\\n\\n```bash\\ndocker images\\n```\\n\\n![images](./dockerimages.png)\\n\\n\uc704\uc640 \uac19\uc774 \uc774\ubbf8\uc9c0\ub3c4 \uc798 \uc0dd\uc131\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n\\n\uc774\uc81c \ud574\ub2f9 \uc774\ubbf8\uc9c0\ub97c DockerHub\uc5d0 \uc62c\ub9b0 \ub4a4, EC2\uc5d0\uc11c \uc774\ub97c \ub2e4\uc6b4\ubc1b\uc544 \uc2e4\ud589\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\uc6b0\uc120 \ud574\ub2f9 \uc774\ubbf8\uc9c0\uac00 \ubb38\uc81c\uc5c6\ub294\uc9c0 \ud655\uc778\ud574\ubcf4\uae30 \uc704\ud574 \ub85c\uceec\uc5d0\uc11c \uc2e4\ud589\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 DockerImage Local\uc5d0\uc11c \uc2e4\ud589\ud574\ubcf4\uae30\\n\\n\ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\\n\\n```bash\\ndocker run \\\\\\n-d \\\\\\n--rm \\\\\\n--name backend \\\\\\n-p 8080:8080 \\\\\\n-e \\"SPRING_PROFILE=local\\" \\\\\\nceluveat/celuveat\\n```\\n\\n- -d : \ubc31\uadf8\ub77c\uc6b4\ub4dc\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n- --name <\uc774\ub984> : \ucee8\ud14c\uc774\ub108\uc758 \uc774\ub984\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\\n- --rm : \ucee8\ud14c\uc774\ub108\uac00 \uc885\ub8cc\ub418\uba74 \uc790\ub3d9\uc73c\ub85c \ucee8\ud14c\uc774\ub108\ub97c \uc81c\uac70\ud569\ub2c8\ub2e4.\\n- -p 8080:8080 : \ud638\uc2a4\ud2b8\uc758 \ud3ec\ud2b8(\uc678\ubd80 \ud3ec\ud2b8)(\uc88c\uce21 8080)\ub97c \ucee8\ud14c\uc774\ub108\uc758 \ud3ec\ud2b8 8080\uc73c\ub85c \ub9e4\ud551\ud569\ub2c8\ub2e4.\\n- -e : \ud658\uacbd\ubcc0\uc218\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.\\n- celuveat/celuveat : \uc2e4\ud589\ud560 Docker Image\uc758 \uc774\ub984(\uc815\ud655\ud788\ub294 \ud0dc\uadf8)\uc744 \uba85\uc2dc\ud569\ub2c8\ub2e4.\\n\\n<br/>\\n\\n\uc704 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud588\uc744 \ub54c \ub2e4\uc74c\uacfc \uac19\uc774 \uc2e4\ud589\ub41c\ub2e4\uba74 \ubb38\uc81c\uac00 \uc5c6\ub294 \uac83\uc785\ub2c8\ub2e4.\\n![run](./dockerrun.png)\\n\\n<br/>\\n\\n\uc774\uc5b4\uc11c \uc798 \uc2e4\ud589\ub418\uc5c8\ub294\uc9c0 \ub85c\uadf8\ub97c \ud655\uc778\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\ndocker logs backend\\n```\\n![log](./dockerlog.png)\\n\\n\uc798 \uc2e4\ud589\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n\\n\uc774\uc81c \ub85c\uceec\uc5d0\uc11c \uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \uba48\ucd98 \ub4a4 \uc774\ub97c DockerHub\uc5d0 \uc62c\ub9ac\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \uba48\ucd9c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n```\\ndocker stop backend || true\\n```\\n\uc5ec\uae30\uc11c `backend`\ub294 `container`\uc758 \uc774\ub984\uc785\ub2c8\ub2e4.\\n- || true : \ub3c4\uc911\uc5d0 \uc624\ub958\uac00 \ubc1c\uc0dd\ud574\ub3c4 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc911\ub2e8\ud558\uc9c0 \uc54a\uace0 \uacc4\uc18d \uc9c4\ud589\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80DockerHub\uc5d0 Docker Image Push\ud558\uae30\\n\uc774\uc81c DockerHub\uc5d0 Docker Image\ub97c Push\ud558\ub294 \uacfc\uc815\uc744 \uc54c\uc544\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc774\ub97c \uc704\ud574 DockerHub\uc5d0 \uac00\uc785\ud55c \ub4a4, \ub2e4\uc74c\uacfc \uac19\uc774 Repository\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n![repo](./dockerhubrepository.png)\\n\\n<br/>\\n<br/>\\n\\n\ud574\ub2f9 Repository\uc5d0 push\ud558\ub294\uac83\uc740 \uac04\ub2e8\ud569\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n\\n```bash\\ndocker login\\n```\\n![login](./dockerlogin.png)\\n\\n\\n<br/>\\n<br/>\\n\\n```bash\\ndocker push celuveat/celuveat\\n```\\n\\n![push](./dockerhubpush.png)\\n\\n(\uc774\ub54c \ub9cc\uc57d build \uc2dc tag\ub97c \ub2e4\ub974\uac8c \uc8fc\uc5c8\ub2e4\uba74, \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 tag\ub97c \uc0c8\ub85c \ub2ec\uc544\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n```java\\ndocker tag <\ub85c\uceec\uc774\ubbf8\uc9c0\uc774\ub984>:<\ud0dc\uadf8> <dockerhub namespace>/<repository \uc774\ub984>:<\ud0dc\uadf8>\\n```\\n\ub610\ud55c \uc774\ub54c \ud0dc\uadf8\ub294 \uc0dd\ub7b5 \uac00\ub2a5\ud558\uba70, \uc0dd\ub7b5\ud558\ub294 \uacbd\uc6b0 latest\uac00 default\ub85c \ubd99\uc2b5\ub2c8\ub2e4.)\\n\\n<br/>\\n<br/>\\n\\npush \uc774\ud6c4 DockerHub\uc758 Repository\ub85c \ub4e4\uc5b4\uac00\ubcf4\uba74, \ub2e4\uc74c\uacfc \uac19\uc774 \uc774\ubbf8\uc9c0\uac00 push\ub418\uc5b4 \uc788\ub294\uac83\uc744 \ud655\uc778 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n![pushed](./pushed.png)\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 EC2\uc5d0\uc11c Image\ub97c Pull \ubc1b\uc544 \uc2e4\ud589\ud574\ubcf4\uae30\\n\uc774\uc81c EC2\uc5d0\uc11c DockerHub\uc5d0 \uc62c\ub77c\uac04 \uc774\ubbf8\uc9c0\ub97c Pull\ubc1b\uc544 \uc774\ub97c \uc2e4\ud589\uc2dc\ud0a4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.<br/>\\n\uc6b0\uc120 \uc774\ub97c \uc704\ud574 \ud14c\uc2a4\ud2b8\uc6a9 EC2\ub97c \ud558\ub098 \uc0c8\ub85c \uc0dd\uc131\ud574 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\nDocker\ub97c \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0 EC2\uc5d0 java\ub97c \ub530\ub85c \uc124\uce58\ud560 \ud544\uc694\ub294 \uc5c6\uc9c0\ub9cc, docker\ub294 \uc124\uce58\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.<br/>\\n[\ub2e4\uc74c \ubb38\uc11c](https://docs.docker.com/engine/install/ubuntu/)\uc5d0 \ub530\ub77c \uc124\uce58\ub97c \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n```bash\\nsudo apt-get update\\nsudo apt-get install ca-certificates curl gnupg\\n```\\n\\n```bash\\nsudo install -m 0755 -d /etc/apt/keyrings\\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\\nsudo chmod a+r /etc/apt/keyrings/docker.gpg\\n```\\n\\n```bash\\necho \\\\\\n  \\"deb [arch=\\"$(dpkg --print-architecture)\\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\\\\n  \\"$(. /etc/os-release && echo \\"$VERSION_CODENAME\\")\\" stable\\" | \\\\\\n  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\\n```\\n\\n```bash\\nsudo apt-get update\\n```\\n\\n```bash\\nsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\\n```\\n\\n<br/>\\n<br/>\\n\\n\uc774\uc81c DockerHub\uc5d0\uc11c image\ub97c pull \ubc1b\uc544 \uc0ac\uc6a9\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc800\ud76c\ub294 private repository\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c \uc6b0\uc120 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n```bash\\ndocker login\\n```\\n\\n\uadf8\ub7f0\ub370 \uc704 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud574\uc11c \uc778\uc99d\uc744 \uc9c4\ud589\ud558\uba74, \ub2e4\uc74c\uacfc \uac19\uc774 `permission denied` \uc624\ub958\uac00 \ub730 \uac83\uc785\ub2c8\ub2e4.\\n![denied](./permissiondenied.png)\\n\\n\uc704 \uc624\ub958\ub294 Docker\uc758 \ub370\ubaac \uc18c\ucf13 \ud30c\uc77c\uc778 `/var/run/docker.sock`\uc5d0 \ub300\ud55c \uc811\uadfc \uad8c\ud55c\uc774 \ubd80\uc871\ud558\uc5ec \ubc1c\uc0dd\ud558\ub294 \uc624\ub958\uc785\ub2c8\ub2e4.\\n\\n<br/>\\n\\n\uc774\ub97c \ud574\uacb0\ud558\ub294 \ubc29\ubc95\uc740 \ud06c\uac8c \ub450\uac00\uc9c0\uac00 \uc788\ub294\ub370, \ud558\ub098\ub294 `sudo`\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774\uace0, \ub2e4\ub978 \ud558\ub098\ub294 Docker \uadf8\ub8f9\uc5d0 \uc0ac\uc6a9\uc790\ub97c \ucd94\uac00\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.<br/>\\n\uc800\ub294 \ub450\ubc88\uc9f8 \ubc29\ubc95\uc73c\ub85c \ud574\uacb0\ud574 \ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.<br/>\\n\\n```bash\\nsudo usermod -aG docker $USER\\n```\\n\uc704\ub294 \ud604\uc7ac \uc0ac\uc6a9\uc790($USER)\ub97c docker \uadf8\ub8f9\uc5d0 \ucd94\uac00\ud558\ub294 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4.\\n\\n<br/>\\n\\n\uc774\ud6c4 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n```bash\\nnewgrp docker\\n```\\n\\n<br/>\\n\\n\uc774\uc81c \ub2e4\uc2dc \ub85c\uadf8\uc778\uc744 \uc2dc\ub3c4\ud558\uba74 \uc131\uacf5\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n![login](./dockerlogin2.png)\\n\\n<br/>\\n<br/>\\n\\n\\nDockerHub\uc5d0\uc11c Image\ub97c Pull \ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\ndocker pull celuveat/celuveat\\n```\\n(\ub9cc\uc57d \ud0dc\uadf8\ub97c \ubd99\uc5ec\uc8fc\uc5c8\ub2e4\uba74 \ud0dc\uadf8\ub3c4 \uac19\uc774 \uba85\uc2dc\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4. \uba85\uc2dc\ud558\uc9c0 \uc54a\uc73c\uba74 latest\uac00 default\ub85c \ubd99\uc2b5\ub2c8\ub2e4.)\\n\\n![pulled](./dockerpulled.png)\\n\\n<br/>\\n\\n\uc774\uc81c \ud574\ub2f9 \uc774\ubbf8\uc9c0\ub97c \uc2e4\ud589\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n```bash\\ndocker run \\\\\\n-d \\\\\\n--rm \\\\\\n--name backend \\\\\\n-p 8080:8080 \\\\\\n-e \\"SPRING_PROFILE=local\\" \\\\\\nceluveat/celuveat\\n```\\n\\n![docker run2](./dockerun2.png)\\n\\n\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc798 \uc2e4\ud589\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\uc774\uc81c \uc774\ub97c stop \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc885\ub8cc\ud574\uc900 \ud6c4, \ud14c\uc2a4\ud2b8\ub97c \ub05d\ub9c8\uce58\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n## \ud83e\uddd0 \ubc31\uc5d4\ub4dc CD workflow \uc791\uc131\ud558\uae30\\n\uc774\uc81c \uc704 \uacfc\uc815\uc744 Github Actions\uc640 self-hosted runners\ub97c \ud1b5\ud574 \uc790\ub3d9\ud654\ud560 \uc218 \uc788\ub3c4\ub85d workflow\ub97c \uc791\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n(dev\uc640 prod\ub294 \ub300\uccb4\ub85c \ub3d9\uc77c\ud558\ubbc0\ub85c, prod\uc6a9 workflow\ub9cc\uc744 \uc791\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.)\\n\\n```yml\\nname: \u2728 Celuveat backend PROD CD \u2728\\n\\nenv:\\n  PROFILE: prod\\n  IMAGE_TAG: back-prod-${{ secrets.APP_VERSION_TAG }}\\n  DOCKER_CONTAINER_NAME: backend\\n  DOCKER_HUB_REPOSITORY: celuveat/celuveat\\n\\non:\\n  workflow_dispatch:\\n  push:\\n    branches:\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  backend-docker-build-and-push:\\n    runs-on: ubuntu-latest\\n    defaults:\\n      run:\\n        working-directory: ./backend\\n\\n    steps:\\n      - name: \u2728 Checkout repository\\n        uses: actions/checkout@v3\\n        with:\\n          submodules: true\\n          token: ${{ secrets.ACTION_TOKEN }}\\n\\n      - name: \u2728 JDK 17 \uc124\uc815\\n        uses: actions/setup-java@v3\\n        with:\\n          java-version: \'17\'\\n          distribution: \'temurin\'\\n\\n      - name: \u2728 Gradlew \uad8c\ud55c \uc124\uc815\\n        run: chmod +x ./gradlew\\n\\n      - name: \u2728 Jar \ud30c\uc77c \ube4c\ub4dc\\n        run: ./gradlew bootJar\\n\\n      - name: \u2728 DockerHub\uc5d0 \ub85c\uadf8\uc778\\n        uses: docker/login-action@v2\\n        with:\\n          username: ${{ secrets.DOCKER_HUB_USERNAME }}\\n          password: ${{ secrets.DOCKER_HUB_PASSWORD }}\\n\\n      - name: \u2728 Docker Image \ube4c\ub4dc \ud6c4 DockerHub\uc5d0 Push\\n        uses: docker/build-push-action@v4\\n        with:\\n          context: ./backend\\n          file: ./backend/Dockerfile\\n          push: true\\n          platforms: linux/arm64\\n          tags: ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n\\n  backend-docker-pull-and-run:\\n    runs-on: [self-hosted, prod]\\n    if: ${{ needs.backend-docker-build-and-push.result == \'success\' }}\\n    needs: [ backend-docker-build-and-push ]\\n    steps:\\n      - name: \u2728 DockerHub\uc5d0\uc11c Image Pull\\n        run: |\\n          docker login --username ${{ secrets.DOCKER_HUB_USERNAME }} --password ${{ secrets.DOCKER_HUB_PASSWORD }}\\n          docker pull ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n          docker stop ${{ env.DOCKER_CONTAINER_NAME }} || true\\n          docker container prune -f\\n          docker image prune -f\\n\\n      - name: \u2728 Docker Image \uc2e4\ud589\\n        run: |\\n          docker run \\\\\\n            -d \\\\\\n            --name ${{ env.DOCKER_CONTAINER_NAME }} \\\\\\n            -p 8080:8080 \\\\\\n            -e \\"SPRING_PROFILES_ACTIVE=${{ env.PROFILE }}\\" \\\\\\n            ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n```\\n\\n\\n\uc774\ub97c \ud558\ub098\ud558\ub098 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nenv:\\n  PROFILE: prod\\n  IMAGE_TAG: back-prod-${{ secrets.APP_VERSION_TAG }}\\n  DOCKER_CONTAINER_NAME: backend\\n  DOCKER_HUB_REPOSITORY: celuveat/celuveat\\n```\\nyml \ub0b4\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ubcc0\uc218\ub4e4\uc744 \uc815\uc758\ud574\uc8fc\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n- PROFILE: \uc2a4\ud504\ub9c1\uc744 \uc2e4\ud589\ud560 \ub54c `SPRING_PROFILES_ACTIVE`\uc758 \uac12\uc73c\ub85c \uc904 \uac12\uc785\ub2c8\ub2e4. \ud504\ub85c\ub355\uc158\uc6a9 workflow\uc774\ubbc0\ub85c `prod`\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.\\n- IMAGE_TAG: \ub3c4\ucee4 \uc774\ubbf8\uc9c0\ub97c \ud658\uacbd&\ubc84\uc804\ubcc4\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud55c \ud0dc\uadf8\ub97c \ub9cc\ub4dc\ub294 \ubd80\ubd84\uc73c\ub85c, `prod-1.0.0` \uc758 \ud615\uc2dd\uc73c\ub85c \uc0dd\uc131\ub429\ub2c8\ub2e4.\\n- DOCKER_CONTAINER_NAME: Docker Image \ub85c\ubd80\ud130 \uc0dd\uc131\ub420 Container\uc758 \uc774\ub984\uc744 \uc815\uc758\ud574\uc8fc\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n- DOCKER_HUB_REPOSITORY: DockerHub Repository\uc758 namespace/repository\uc774\ub984 \uc785\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\non:\\n  workflow_dispatch:\\n  push:\\n    branches:\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n```\\n\ud574\ub2f9 \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \uc5b8\uc81c \ub3d9\uc791\ud560\uc9c0\ub97c \uc815\uc758\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.<br/>\\nmain \ube0c\ub79c\uce58\uc5d0 push\uac00 \ubc1c\uc0dd\ud558\uc600\uc744 \ub54c, backend\uc758 \ud558\uc704 \ub514\ub809\ud1a0\ub9ac\uc5d0 \ubcc0\uacbd\uc774 \uc0dd\uacbc\uc744 \uacbd\uc6b0 \ud574\ub2f9 workflow\uac00 \ub3d9\uc791\ud569\ub2c8\ub2e4.\\n\\n- workflow_dispatch: \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc218\ub3d9\uc73c\ub85c \ud2b8\ub9ac\uac70\ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n\\n```yml\\njobs:\\n  backend-docker-build-and-push:\\n    # ...\\n\\n  backend-docker-pull-and-run:\\n    # ...\\n```\\nworkflow\uc5d0\uc11c \uc2e4\ud589\ud560 \uc791\uc5c5(job)\ub4e4\uc744 \uc815\uc758\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n\ud574\ub2f9 workflow\uc5d0\uc11c\ub294 `backend-docker-build-and-push`\uc640 `backend-docker-pull-and-run` \ub77c\ub294 \uc774\ub984\uc758 \uc791\uc5c5\uc774 \ub450\uac1c \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nbackend-docker-build-and-push:\\n  runs-on: ubuntu-latest\\n  defaults:\\n    run:\\n      working-directory: ./backend\\n```\\n- backend-docker-build-and-push : \uc791\uc5c5\uc774 \uc218\ud589\ub418\ub294 \ud658\uacbd\uc740 ubuntu-latest\uc785\ub2c8\ub2e4.\\n- defaults.run.working-directory: ./backend : defaults \ub97c \ud1b5\ud574 \uc544\ub798\uc758 \ub2e8\uacc4\uc5d0\uc11c \uacf5\ud1b5\uc73c\ub85c \uc0ac\uc6a9\ub418\ub294 \uc124\uc815\uc744 \uc9c0\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\ud574\ub2f9 \uc791\uc5c5\uc5d0\uc11c\ub294 `working-directory`\ub97c \uc124\uc815\ud558\uc5ec \uc774\ud6c4\uc758 \ub2e8\uacc4\ub4e4\uc740 \ubaa8\ub450 `./backend` \ub514\ub809\ud1a0\ub9ac \ub0b4\uc5d0\uc11c \uc2e4\ud589\ub429\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nsteps:\\n  - name: \u2728 Checkout repository\\n    uses: actions/checkout@v3\\n    with:\\n      submodules: true\\n      token: ${{ secrets.ACTION_TOKEN }}\\n```\\non\uc5d0 \uc815\uc758\ub41c main \ube0c\ub79c\uce58\ub85c checkout\ud558\uba70, \ub3d9\uc2dc\uc5d0 submodules\uc744 \ud3ec\ud568\ud558\uc5ec \uac00\uc838\uc624\ub3c4\ub85d \uc124\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub54c Secret\uc5d0 ACTION_TOKEN\uc73c\ub85c \uc815\uc758\ub41c \uac12\uc744 \uc0ac\uc6a9\ud558\ub294\ub370, \ud574\ub2f9 \uac12\uc740 \uc544\ub798\uc640 \uac19\uc774 \ubc1c\uae09\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![token1](./token1.png)\\n(\uae43\ud5c8\ube0c\uc758 \uc6b0\uce21 \uc0c1\ub2e8 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0\ub97c \ud074\ub9ad -> Settings)\\n\\n<br/>\\n<br/>\\n\\n![token2](./token2.png)\\n(Developer Settings \ud074\ub9ad)\\n\\n<br/>\\n<br/>\\n\\n![token3](./token3.png)\\n(Personal Access Token -> Tokens (classic) -> Generate new token -> Generate new token (classic))\\n\\n\\n<br/>\\n<br/>\\n\\n![token4](./token4.png)\\n`repo`\uc5d0 \ub300\ud574\uc11c\ub9cc \uccb4\ud06c\ud574\uc8fc\uc2dc\uba74 \ub429\ub2c8\ub2e4.\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uc0dd\uc131\ub41c Token\uc744 Repository Secret\uc73c\ub85c \uc124\uc815\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4.<br/>\\n(workflow\ub97c \uc0ac\uc6a9\ud560 Repository -> Settings -> Secrets and variables -> New repository secret\uc744 \ud1b5\ud574 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.)\\n\\n\\n<br/>\\n<br/>\\n\\n```yml\\n- name: \u2728 JDK 17 \uc124\uc815\\n  uses: actions/setup-java@v3\\n  with:\\n    java-version: \'17\'\\n    distribution: \'temurin\'\\n```\\n\\n\uc0ac\uc6a9\ud560 \uc790\ubc14 \ubc84\uc804\uc744 \uc124\uc815\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n17\ubc84\uc804\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n\\n```yml\\n- name: \u2728 Gradlew \uad8c\ud55c \uc124\uc815\\n  run: chmod +x ./gradlew\\n\\n- name: \u2728 Jar \ud30c\uc77c \ube4c\ub4dc\\n  run: ./gradlew bootJar\\n```\\n\\ngradlew \uc2e4\ud589 \uad8c\ud55c\uc744 \ubd80\uc5ec\ud55c \ud6c4 jootJar\uc744 \ud1b5\ud574 jar \ud30c\uc77c\uc744 \ube4c\ub4dc\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\n- name: \u2728 DockerHub\uc5d0 \ub85c\uadf8\uc778\\n  uses: docker/login-action@v2\\n  with:\\n    username: ${{ secrets.DOCKER_HUB_USERNAME }}\\n    password: ${{ secrets.DOCKER_HUB_PASSWORD }}\\n```\\nSecrets\uc5d0 \uc815\uc758\ud55c username\uacfc password\ub97c \ud1b5\ud574 DockerHub\uc5d0 \ub85c\uadf8\uc778\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n\\n```yml\\n- name: \u2728 Docker Image \ube4c\ub4dc \ud6c4 DockerHub\uc5d0 Push\\n  uses: docker/build-push-action@v4\\n  with:\\n    context: ./backend\\n    file: ./backend/Dockerfile\\n    push: true\\n    platforms: linux/arm64\\n    tags: ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n```\\n- [docker/build-push-action@v4](https://github.com/docker/build-push-action)\ub97c \ud1b5\ud574 DockerHub\uc5d0 \uc774\ubbf8\uc9c0\ub97c push\ud558\ub294 \uacfc\uc815\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n- context: Docker Image\ub97c \ube4c\ub4dc\ud560 \ucee8\ud14d\uc2a4\ud2b8 \uacbd\ub85c\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. ./backend\ub97c \ud1b5\ud574 \ubc31\uc5d4\ub4dc \ub514\ub809\ud1a0\ub9ac\ub85c \uc9c0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n- file: \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud560 Dockerfile\uc758 \uc704\uce58\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\\n- push: DockerHub\uc5d0 \uc774\ubbf8\uc9c0\ub97c \ud478\uc26c\ud560\uc9c0 \uc5ec\ubd80\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. true\ub85c \uc124\uc815\ud558\uc5ec \ud478\uc26c\ud558\ub3c4\ub85d \ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n- \ube4c\ub4dc\ud560 \uc774\ubbf8\uc9c0 \ud50c\ub7ab\ud3fc\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc800\ud76c\uc758 \uc11c\ubc84\ub294 ubuntu(Linux/UNIX) 64-bit(ARM) \uc774\ubbc0\ub85c linux/arm64\ub85c \uc9c0\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n- \ube4c\ub4dc\ub420 \uc774\ubbf8\uc9c0\uc758 \ud0dc\uadf8\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n\uc704 \uacfc\uc815\uc744 \uc9c4\ud589\ud558\uba74 DockerHub\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc774\ubbf8\uc9c0\uac00 \uc62c\ub77c\uac00\uac8c\ub429\ub2c8\ub2e4.\\n\\n![pushed](./dockerhubpushed.png)\\n\\n\uc774\uc5b4\uc11c EC2\uc5d0\uc11c Self hosted Runner\ub97c \ud1b5\ud574 \ud574\ub2f9 \uc774\ubbf8\uc9c0\ub97c Pull \ubc1b\uc544 \uc2e4\ud589\ud558\ub294 \ubd80\ubd84\uc744 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nbackend-docker-pull-and-run:\\n  runs-on: [self-hosted, prod]\\n  if: ${{ needs.backend-docker-build-and-push.result == \'success\' }}\\n  needs: [ backend-docker-build-and-push ]\\n```\\n- runs-on: \uc791\uc5c5\uc774 \uc2e4\ud589\ub420 \ud658\uacbd\uc744 \uc9c4\ud589\ud569\ub2c8\ub2e4. prod \ud658\uacbd\uc758 self-hosted-runner\ub97c \uc2e4\ud589\uc2dc\ud0a4\uae30 \uc704\ud574 \uc774\uc640 \uac19\uc774 \uc9c0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n(prod\ub294 \uc774\uc804 \uae00\uc5d0\uc11c \uc0b4\ud3b4\ubcf4\uc558\ub4ef\uc774, \uc9c1\uc811 self hosted runners\uc5d0 \uc9c1\uc811 \ubd99\uc5ec\uc900 label\uc785\ub2c8\ub2e4.)\\n- if: \uc774\uc804 \uc791\uc5c5\uc778 backend-docker-build-and-push\uac00 \uc131\uacf5\ud588\uc744 \uacbd\uc6b0\uc5d0\ub9cc \uc2e4\ud589\ub418\ub3c4\ub85d if\ub97c \ud1b5\ud574 \uc870\uac74\uc744 \uc9c0\uc815\ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n- needs: \ud574\ub2f9 \uc791\uc5c5\uc774 \uc758\uc874\ud558\ub294 \uc791\uc5c5\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \ud574\ub2f9 \uc791\uc5c5\uc740 backend-docker-build-and-push \ub4a4\uc5d0 \uc2e4\ud589\ub418\uc57c \ud558\ubbc0\ub85c needs\ub97c \ud1b5\ud574 \uc9c0\uc815\ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nsteps:\\n  - name: \u2728 DockerHub\uc5d0\uc11c Image Pull\\n    run: |\\n      docker login --username ${{ secrets.DOCKER_HUB_USERNAME }} --password ${{ secrets.DOCKER_HUB_PASSWORD }}\\n      docker pull ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n      docker stop ${{ env.DOCKER_CONTAINER_NAME }} || true\\n      docker container prune -f\\n      docker image prune -f\\n```\\n- docker login ~ : dockerhub\uc5d0 \ub85c\uadf8\uc778\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n- docker pull ~ : \uc774\uc804 \uc791\uc5c5\uc5d0\uc11c dockerhub\uc5d0 push\ud55c \uc774\ubbf8\uc9c0\ub97c pull\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.\\n- docker stop ~ : EC2\uc5d0 \uc2e4\ud589\uc911\uc778 docker container(\uc5ec\uae30\uc11c\ub294 Spring Application)\uac00 \uc788\uc73c\uba74 \uc774\ub97c \uc885\ub8cc\ud569\ub2c8\ub2e4.\\n  - || true \ub97c \ud1b5\ud574 backend\ub77c\ub294 \ucee8\ud14c\uc774\ub108\uac00 \uc5c6\ub354\ub77c\ub3c4 \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\uace0 \uc9c4\ud589\ud558\ub3c4\ub85d \ud569\ub2c8\ub2e4.\\n- docker container prune -f: \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \ub3c4\ucee4 \ucee8\ud14c\uc774\ub108\ub97c \uc81c\uac70\ud569\ub2c8\ub2e4. -f\ub97c \ud1b5\ud574 \uc0ac\uc6a9\uc790\uc758 \ud655\uc778\uc744 \ubb3b\uc9c0 \uc54a\uace0 \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n- docker image prune -f: \uc774\ub984 \uc5c6\ub294 \ubaa8\ub4e0 \uc774\ubbf8\uc9c0\ub97c \uc0ad\uc81c\ud569\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n\\n```yml\\n- name: \u2728 Docker Image \uc2e4\ud589\\n  run: |\\n    docker run \\\\\\n      -d \\\\\\n      --name ${{ env.DOCKER_CONTAINER_NAME }} \\\\\\n      -p 8080:8080 \\\\\\n      -e \\"SPRING_PROFILES_ACTIVE=${{ env.PROFILE }}\\" \\\\\\n      ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n```\\n\\n\uc704 \uc635\uc158\ub4e4\uc740 \ubaa8\ub450 \uc774\uc804\uc5d0 \uc124\uba85\ud55c \uc635\uc158\ub4e4\uc774\ubbc0\ub85c \ub530\ub85c \uc124\uba85\ud558\uc9c0 \uc54a\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub807\uac8c \ud574\uc11c \ubc31\uc5d4\ub4dc\uc758 CD \uc124\uc815\uc774 \ub05d\ub0ac\uc2b5\ub2c8\ub2e4. \uc774\uc5b4\uc11c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c \ub118\uc5b4\uac00\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n\\n## \ud83e\uddd0 \ud504\ub860\ud2b8\uc5d4\ub4dc Dockerfile \uc791\uc131\ud558\uae30\\n```dockerfile\\nFROM node:18-alpine\\n\\nWORKDIR /app\\n\\nCOPY package.json yarn.lock .\\n\\nRUN yarn install\\n\\nCOPY . .\\n\\nRUN yarn build\\n\\nCMD [\\"yarn\\", \\"start\\", \\"--port\\", \\"3000\\"]\\n```\\n\ud55c \uc904 \ud55c \uc904 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nFROM node:18-alpine\\n```\\n\\nDocker \uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc2dc \uae30\ubc18\uc774 \ub418\ub294 \uc774\ubbf8\uc9c0 \ub808\uc774\uc5b4\ub97c \uc815\uc758\ud558\ub294 \ubd80\ubd84\uc785\ub2c8\ub2e4.<br/>\\n\uc800\ud76c\uc758 \ud504\ub85c\uc81d\ud2b8\ub294 node 18.16.1\ubc84\uc804\uc744 \uc0ac\uc6a9\ud558\ubbc0\ub85c node:18-alpine\uc744 \uc0ac\uc6a9\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nWORKDIR /app\\n```\\n\\n\ub3c4\ucee4 \ucee8\ud14c\uc774\ub108 \ub0b4\uc5d0\uc11c\uc758 \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac\ub97c `/app`\uc73c\ub85c \uc124\uc815\ud569\ub2c8\ub2e4.<br/>\\n\uc774\ud6c4 \uc9c4\ud589\ub418\ub294 \uc791\uc5c5\ub4e4\uc740 \ubaa8\ub450 `/app`  \ub0b4\ubd80\uc5d0\uc11c \uc9c4\ud589\ub429\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nCOPY package.json yarn.lock .\\n```\\n\uc774 \ubd80\ubd84\uc740 \uc0ac\uc6a9\uc790\uc758 \ucef4\ud4e8\ud130(\ud638\uc2a4\ud2b8)\uc758 package.json\uacfc yarn.lock \ud30c\uc77c\uc744\\n\ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\ub85c \ubcf5\uc0ac\ud569\ub2c8\ub2e4.\\n\uc774 \ub450 \ud30c\uc77c\ub9cc \uba3c\uc800 \uc218\ud589\ud558\ub294 \uc774\uc720\ub294 \uc131\ub2a5\uc0c1\uc758 \uc774\uc720 \ub54c\ubb38\uc778\ub370, \uc704 \ub450 \ud30c\uc77c\uc744 \uc790\uc8fc \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uba3c\uc800 \ubcf5\uc0ac\ud558\uc5ec \ub3c4\ucee4 \ub808\uc774\uc5b4\ub97c \uce90\uc2f1\ud574\ub450\uba74 \uc774\ud6c4 \ube4c\ub4dc\uac00 \ub354 \ube68\ub77c\uc9d1\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nRUN yarn install\\n```\\n\\nyarn install \uba85\ub839\uc744 \uc2e4\ud589\ud558\uc5ec package.json\uc5d0 \uba85\uc2dc\ub41c \uc885\uc18d\uc131\ub4e4\uc744 \uc124\uce58\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nCOPY . .\\n```\\n\\n\uc774 \ubd80\ubd84\uc740 \uc0ac\uc6a9\uc790\uc758 \ucef4\ud4e8\ud130(\ud638\uc2a4\ud2b8)\uc758 \ubaa8\ub4e0 \ud30c\uc77c\uc744 \ucee8\ud14c\uc774\ub108 \ub0b4\ubd80\ub85c \ubcf5\uc0ac\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nRUN yarn build\\n```\\n\\n\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ube4c\ub4dc\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n```dockerfile\\nCMD [\\"yarn\\", \\"start\\", \\"--port\\", \\"3000\\"]\\n```\\n3000\ubc88 \ud3ec\ud2b8\ub85c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \ud504\ub860\ud2b8\uc5d4\ub4dc CD workflow \uc791\uc131\ud558\uae30\\n```yml\\nname: \ud83c\udf54 Celuveat frontend PROD CD \ud83c\udf54\\n\\nenv:\\n  PROFILE: prod\\n  IMAGE_TAG: front-prod-${{ secrets.APP_VERSION_TAG }}\\n  DOCKER_CONTAINER_NAME: frontend\\n  DOCKER_HUB_REPOSITORY: celuveat/celuveat\\n\\non:\\n  workflow_dispatch:\\n  push:\\n    branches:\\n      - main\\n    paths:\\n      - \\"frontend/**\\"\\n\\njobs:\\n  frontend-build-and-push:\\n    runs-on: ubuntu-latest\\n    defaults:\\n      run:\\n        working-directory: ./frontend\\n\\n    steps:\\n      - name: \ud83c\udf54 Checkout repository\\n        uses: actions/checkout@v3\\n\\n      - name: \ud83c\udf54 .env \ud30c\uc77c \uc138\ud305\\n        run: |\\n          touch .env\\n          echo GOOGLE_MAP_API_KEY=${{ secrets.GOOGLE_MAP_API_KEY }} > .env\\n          echo BASE_URL=${{ secrets.PROD_BASE_URL }} >> .env\\n\\n      - name: \ud83c\udf54 DockerHub\uc5d0 \ub85c\uadf8\uc778\\n        uses: docker/login-action@v2\\n        with:\\n          username: ${{ secrets.DOCKER_HUB_USERNAME }}\\n          password: ${{ secrets.DOCKER_HUB_PASSWORD }}\\n\\n      # Dockerfile\uc5d0\uc11c yarn \uc0ac\uc6a9\ud558\ub824\uba74 \ud544\uc694\ud568\\n      - name: \ud83c\udf54 Set up Docker Buildx\\n        uses: docker/setup-buildx-action@v2\\n\\n      - name: \ud83c\udf54 Docker Image \ube4c\ub4dc \ud6c4 DockerHub\uc5d0 Push\\n        uses: docker/build-push-action@v4\\n        with:\\n          context: ./frontend\\n          file: ./frontend/Dockerfile\\n          push: true\\n          platforms: linux/arm64\\n          tags: ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n          cache-from: type=gha\\n          cache-to: type=gha,mode=max\\n\\n  frontend-docker-pull-and-run:\\n    runs-on: [self-hosted, prod]\\n    if: ${{ needs.frontend-build-and-push.result == \'success\' }}\\n    needs: [ frontend-build-and-push ]\\n\\n    steps:\\n      - name: \ud83c\udf54 DockerHub\uc5d0\uc11c Image Pull\\n        run: |\\n          docker login --username ${{ secrets.DOCKER_HUB_USERNAME }} --password ${{ secrets.DOCKER_HUB_PASSWORD }}\\n          docker pull ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n          docker stop ${{ env.DOCKER_CONTAINER_NAME }} || true\\n          docker container prune -f\\n          docker image prune -f\\n\\n      - name: \ud83c\udf54 Docker Image \uc2e4\ud589\\n        run: |\\n          docker run \\\\\\n            -d \\\\\\n            --name ${{ env.DOCKER_CONTAINER_NAME }} \\\\\\n            -p 3000:3000 \\\\\\n            ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n```\\n\\n- cache-from, cache-to: \ub2e4\uc74c \uae00\uc5d0\uc11c \uc790\uc138\ud788 \uc124\uba85\ud560 \uc608\uc815\uc774\uc9c0\ub9cc, \uac04\ub2e8\ud558\uac8c\ub294 \ub3c4\ucee4 \ub808\uc774\uc5b4\uc758 \uce90\uc2f1\uc744 \uc704\ud574 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\uc774\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc73c\uba74 \ub9e4\ubc88 10\ubd84\uc815\ub3c4 \uac78\ub9ac\ub294 \ube4c\ub4dc \uc2dc\uac04\uc774 (yarn install\uc758 \uce90\uc2f1\uc73c\ub85c \uc778\ud574) \uc808\ubc18\uac00\ub7c9 \uc904\uc5b4\ub4e4\uac8c \ub429\ub2c8\ub2e4.\\n\\n\ub098\uba38\uc9c0 \ubd80\ubd84\uc740 \ubc31\uc5d4\ub4dc\uc640 \uac70\uc758 \ub3d9\uc77c\ud558\ubbc0\ub85c \ubcc4\ub2e4\ub978 \uc124\uba85 \uc5c6\uc774 \ub9c8\uce58\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n<br/>\\n\\n## \ud83e\uddd0Gradle Caching\uc744 \ud1b5\ud55c \uc18d\ub3c4 \ud5a5\uc0c1\\n\\n\ud604\uc7ac github actions\uc758 workflow\uac00 \uc804\uccb4 \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294\ub370 \uac78\ub9ac\ub294 \uc2dc\uac04\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n![no-caching-1](./no-caching-1.png)\\n![no-caching-2](./no-caching-2.png)\\n![no-caching-3](./no-caching-3.png)\\n![no-caching-4](./no-caching-4.png)\\n\\n\ud3c9\uade0\uc801\uc73c\ub85c 1\ubd84 10\ucd08 \uc815\ub3c4\uc758 \uc2dc\uac04\uc774 \uac78\ub9ac\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub97c \uc904\uc774\uae30 \uc704\ud574 Gradle Caching\uc744 \ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n<br/>\\n\\n### \ud83d\ude80 Gradle Caching\uc774\ub780?\\n(\ucc38\uace0 - [\uacf5\uc2dd\ubb38\uc11c](https://docs.gradle.org/current/userguide/core_dependency_management.html#sec:dependency-mgmt-in-gradle))<br/>\\nGradle\uc740 \ube4c\ub4dc \uc2dc\uc5d0 \uc791\uc5c5(Task)\uc758\uc874\uc131 \ud328\ud0a4\uc9c0\ub4e4\uc744 \ubaa8\ub450 \uac00\uc838\uc628 \ub4a4, \uc774\ub4e4\uc744 dependency cache\ub77c \ubd88\ub9ac\ub294 \ub85c\uceec \uce90\uc2dc\uc5d0 \ubcf4\uad00\ud558\uc5ec\\n\uc774\ud6c4 \ud638\ucd9c\uc5d0\uc11c \ubd88\ud544\uc694\ud55c \ub124\ud2b8\uc6cc\ud06c \ud638\ucd9c\uc744 \ubc29\uc9c0\ud558\ub294 \uc804\ub7b5\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub7ec\ub098 Github Actions\uc758 workflow\uc5d0\uc11c\ub294 \ub9e4 \uc2e4\ud589\ub9c8\ub2e4 \uc0c8\ub86d\uac8c \uc758\uc874\uc131\ub4e4\uc744 \uac00\uc9c0\uace0 \uc624\uac8c \ub429\ub2c8\ub2e4.<br/>\\n\uc758\uc874\uc131\uc744 \uac00\uc838\uc624\uae30 \uc704\ud574 \ub300\uccb4\ub85c \ub124\ud2b8\uc6cc\ud06c \ud638\ucd9c\uc744 \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0, \ud574\ub2f9 \uacfc\uc815\uc774 \uc5c6\uc5b4\uc9c4\ub2e4\uba74 \uc804\uccb4 \ube4c\ub4dc \uc2dc\uac04\uc774 \ub9e4\uc6b0 \ub2e8\ucd95\ub420 \uac83\uc774\ub77c \uc608\uc0c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ud55c\ubc88 Gradle Caching\uc744 \uc801\uc6a9\ud558\uc5ec \uc131\ub2a5 \ud5a5\uc0c1\uc774 \uc5bc\ub9c8\ub098 \uc774\ub8e8\uc5b4\uc9c0\ub294\uc9c0 \ud655\uc778\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\ubc29\ubc95\uc740 \ub9e4\uc6b0 \uac04\ub2e8\ud569\ub2c8\ub2e4.\\n```yml\\n- name: \u2728 Gradle Caching\\n  uses: actions/cache@v3\\n  with:\\n    path: |\\n        ~/.gradle/caches\\n        ~/.gradle/wrapper\\n    key: ${{ runner.os }}-gradle-${{ hashFiles(\'**/*.gradle*\', \'**/gradle-wrapper.properties\') }}\\n    restore-keys: |\\n        ${{ runner.os }}-gradle-\\n```\\n\\n\uc704 \ucf54\ub4dc\ub97c \ucd94\uac00\ud574\uc8fc\uba74 \ub418\ub294\ub370\uc694, \uc774\ub97c \uc801\uc6a9\ud55c \uc804\uccb4 workflow\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br/>\\n<br/>\\n\\n```yml\\nname: \u2728 Celuveat backend PROD CD \u2728\\n\\nenv:\\n  PROFILE: prod\\n  IMAGE_TAG: back-prod-${{ secrets.APP_VERSION_TAG }}\\n  DOCKER_CONTAINER_NAME: backend\\n  DOCKER_HUB_REPOSITORY: celuveat/celuveat\\n\\non:\\n  workflow_dispatch:\\n  push:\\n    branches:\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  backend-docker-build-and-push:\\n    runs-on: ubuntu-latest\\n    defaults:\\n      run:\\n        working-directory: ./backend\\n\\n    steps:\\n      - name: \u2728 Checkout repository\\n        uses: actions/checkout@v3\\n        with:\\n          submodules: true\\n          token: ${{ secrets.ACTION_TOKEN }}\\n\\n      - name: \u2728 JDK 17 \uc124\uc815\\n        uses: actions/setup-java@v3\\n        with:\\n          java-version: \'17\'\\n          distribution: \'temurin\'\\n\\n      - name: \u2728 Gradle Caching\\n        uses: actions/cache@v3\\n        with:\\n          path: |\\n              ~/.gradle/caches\\n              ~/.gradle/wrapper\\n          key: ${{ runner.os }}-gradle-${{ hashFiles(\'**/*.gradle*\', \'**/gradle-wrapper.properties\') }}\\n          restore-keys: |\\n              ${{ runner.os }}-gradle-\\n\\n      - name: \u2728 Gradlew \uad8c\ud55c \uc124\uc815\\n        run: chmod +x ./gradlew\\n\\n      - name: \u2728 Jar \ud30c\uc77c \ube4c\ub4dc\\n        run: ./gradlew bootJar\\n\\n      - name: \u2728 DockerHub\uc5d0 \ub85c\uadf8\uc778\\n        uses: docker/login-action@v2\\n        with:\\n          username: ${{ secrets.DOCKER_HUB_USERNAME }}\\n          password: ${{ secrets.DOCKER_HUB_PASSWORD }}\\n\\n      - name: \u2728 Docker Image \ube4c\ub4dc \ud6c4 DockerHub\uc5d0 Push\\n        uses: docker/build-push-action@v4\\n        with:\\n          context: ./backend\\n          file: ./backend/Dockerfile\\n          push: true\\n          platforms: linux/arm64\\n          tags: ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n\\n  backend-docker-pull-and-run:\\n    runs-on: [self-hosted, prod]\\n    if: ${{ needs.backend-docker-build-and-push.result == \'success\' }}\\n    needs: [ backend-docker-build-and-push ]\\n    steps:\\n      - name: \u2728 DockerHub\uc5d0\uc11c Image Pull\\n        run: |\\n          docker login --username ${{ secrets.DOCKER_HUB_USERNAME }} --password ${{ secrets.DOCKER_HUB_PASSWORD }}\\n          docker pull ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n          docker stop ${{ env.DOCKER_CONTAINER_NAME }} || true\\n          docker container prune -f\\n          docker image prune -f\\n\\n      - name: \u2728 Docker Image \uc2e4\ud589\\n        run: |\\n          docker run \\\\\\n            -d \\\\\\n            --name ${{ env.DOCKER_CONTAINER_NAME }} \\\\\\n            -p 8080:8080 \\\\\\n            -e \\"SPRING_PROFILES_ACTIVE=${{ env.PROFILE }}\\" \\\\\\n            ${{ env.DOCKER_HUB_REPOSITORY }}:${{ env.IMAGE_TAG }}\\n```\\n\\n<br/>\\n<br/>\\n\\n\uce90\uc2f1\uc744 \uc801\uc6a9\ud55c github actions\uc758 workflow\uac00 (jar \ud30c\uc77c\uc758 \ubcc0\uacbd \uc5c6\uc774) \uc804\uccb4 \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294\ub370 \uac78\ub9ac\ub294 \uc2dc\uac04\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n#### \uccab \uc2e4\ud589\\n![yes-caching-1](./yes-caching-1.png)\\n\\n#### \uc774\ud6c4 \uc2e4\ud589\\n![yes-caching-2](./yes-caching-2.png)\\n![yes-caching-3](./yes-caching-3.png)\\n![yes-caching-4](./yes-caching-4.png)\\n![yes-caching-5](./yes-caching-5.png)\\n\\n<br/>\\n\\n\uac04\ub2e8\ud55c \uadf8\ub798\uc774\ub4e4 \uce90\uc2f1\ub9cc\uc73c\ub85c\ub3c4 (\uccab \uc2e4\ud589 \uc81c\uc678) \uc131\ub2a5\uc774 \ub300\ub7b5 25%\uc815\ub3c4 \ud5a5\uc0c1\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\\n<br/>\\n<br/>\\n<br/>\\n\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uc774\ubc88 \uae00\uc5d0\uc11c\ub294 \uc800\ud76c \uc140\ub7fd\uc787 \ud300\uc758 Docker\ub97c \ud1b5\ud55c CD \ud658\uacbd \uad6c\ucd95 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4.\\n\\n\uc77d\uc5b4\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4 \ud83d\ude0a\\n\\n<br/>\\n<br/>\\n<br/>"},{"id":"/royce/submodule/submodule","metadata":{"permalink":"/team-blog/back-blog/royce/submodule/submodule","source":"@site/@backBlog/royce/submodule/submodule.mdx","title":"Submodule \ub3c4\uc785\ud558\uae30","description":"Submodule\uc744 \ud1b5\ud574 ssh \uc811\uc18d \uc5c6\uc774 secret \uac12 \uad00\ub9ac\ud558\uae30","date":"2023-08-02T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 2\uc77c","tags":[{"label":"\uc11c\ube0c\ubaa8\ub4c8","permalink":"/team-blog/back-blog/tags/\uc11c\ube0c\ubaa8\ub4c8"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"},{"label":"Github","permalink":"/team-blog/back-blog/tags/github"}],"readingTime":8.435,"hasTruncateMarker":true,"authors":[{"name":"Royce Won","url":"https://github.com/taeyeonroyce","email":"skdlxmtpqms@gmail.com","imageURL":"https://avatars.githubusercontent.com/u/90550065?v=4","key":"taeyeonroyce"}],"frontMatter":{"date":"2023-08-02T00:00:00.000Z","authors":"taeyeonroyce","title":"Submodule \ub3c4\uc785\ud558\uae30","description":"Submodule\uc744 \ud1b5\ud574 ssh \uc811\uc18d \uc5c6\uc774 secret \uac12 \uad00\ub9ac\ud558\uae30","keywords":["Secret-Key","\uc778\ud504\ub77c","\uc11c\ube0c\ubaa8\ub4c8"],"tags":["\uc11c\ube0c\ubaa8\ub4c8","\uc778\ud504\ub77c","Github"]},"prevItem":{"title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (3) docker\uc640 github actions\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-3/cicd3"},"nextItem":{"title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (2) Git \uc11c\ube0c\ubaa8\ub4c8 \ub3c4\uc785","permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-2/cicd2"}},"content":"Submodule\uc744 \ud1b5\ud574 ssh \uc811\uc18d \uc5c6\uc774 secret \uac12 \uad00\ub9ac\ud558\uae30\\n\\n\x3c!--truncate--\x3e\\n\\n# Submodule\uc744 \ud1b5\ud574 ssh \uc811\uc18d \uc5c6\uc774 secret \uac12 \uad00\ub9ac\ud558\uae30\\n\\n\uc548\ub155\ud558\uc138\uc694, \uc140\ub7fd\uc787\uc758 \ub85c\uc774\uc2a4\uc785\ub2c8\ub2e4.\\n\\n\uc774\ubc88 \uae00\uc5d0\uc11c\ub294 `Submodule`\uc744 \ud1b5\ud574 Secret \uc815\ubcf4\ub4e4\uc744 \ub178\ucd9c\uc2dc\ud0a4\uc9c0 \uc54a\uc73c\uba74\uc11c \uc9c0\uc18d\uc801\uc778 \ubc30\ud3ec\ub97c \uc720\uc9c0\ud558\ub294 \uacfc\uc815\uc5d0 \ub300\ud574 \uc18c\uac1c\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n> \ub178\ucd9c\ub418\uba74 \uc548\ub418\uc9c0\ub9cc, \ube4c\ub4dc\ub098 \ubc30\ud3ec\uc2dc \ud544\uc694\ud55c \uac12\ub4e4\uc744 `[Secret \uc815\ubcf4]` \ub77c\ub294 \ub2e8\uc5b4\ub97c \uc0ac\uc6a9\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n## \uae30\uc874 \ubc29\uc2dd\\n\\n\uc140\ub7fd\uc787 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 \ub2e4\uc591\ud55c Secret \uac12\ub4e4\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n\uc544\ub798 dev\ud658\uacbd\uc5d0\uc11c\uc758 profile\ud30c\uc77c\uc744 \uba3c\uc800 \ubcf4\uc2dc\uc8e0.\\n\\n`application-dev.yml`\\n\\n```yml\\nspring:\\n  datasource:\\n    url: ${DB_URL}\\n    username: ${DB_USERNAME}\\n    password: ${DB_PASSWORD}\\n    driver-class-name: ${DB_DRIVER_CLASS_NAME}\\n\\n  jpa:\\n    show-sql: true\\n    properties:\\n      hibernate:\\n        format_sql: true\\n        use_sql_comments: true\\n        highlight_sql: true\\n\\n    hibernate:\\n      ddl-auto: validate\\n\\ncors:\\n  allowedOrigins: ${CORS_ALLOW_ORIGINS}\\n```\\n\\n\uc800\ud76c\ub294 `Secret \uc815\ubcf4`\ub4e4\uc5d0 \ud658\uacbd\ubcc0\uc218\uba85\uc744 \uc124\uc815\ud574 \ub450\uc5c8\uace0, \ubc30\ud3ec\ub418\ub294 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc544\ub798\uc640 \uac19\uc774 \ud658\uacbd\ubcc0\uc218 \uc120\uc5b8\uc744 \ud1b5\ud574 \uad00\ub9ac\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```sh\\nexport DB_URL=jdbc:test12312\\nexport DB_USERNAME=sa\\nexport DB_PASSWORD=\\nexport DB_DRIVER_CLASS_NAME=driver\\n...\\n```\\n\\n\uc774\ub7ec\ud55c \ubc29\uc2dd\uc744 \ud1b5\ud574 \ubc30\ud3ec\ub418\ub294 \ud658\uacbd/\uc11c\ubc84\uc5d0 \ub530\ub77c \uc6d0\ud558\ub294 \uac12\ub4e4\uc744 \ud560\ub2f9 \ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n## \ubb38\uc81c\uc810\\n\\n\uc704 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\ub2e4 \uac1c\uc120\uc758 \ud544\uc694\uc131\uc744 \ub290\ub080 \uc0c1\ud669\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n### \uac12\uc744 \uc218\uc815\ud560 \ub54c \ub9c8\ub2e4 `ssh`\ud504\ub85c\ud1a0\ucf5c\uc744 \ud1b5\ud574 \ud574\ub2f9 \uc11c\ubc84\uc5d0 \uc811\uc18d\ud558\uc5ec \ubcc0\uacbd\ud574\uc57c \ud55c\ub2e4.\\n\\n\uc6b0\uc544\ud55c\ud14c\ud06c\ucf54\uc2a4\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 ec2 instance\uc5d0 \uc124\uc815\ub41c \ubcf4\uc548 \uc815\ucc45\uc5d0 \ub530\ub77c \ucea0\ud37c\uc2a4 \ub0b4\uc5d0\uc11c\ub9cc `ssh` \uc5f0\uacb0\uc774 \uac00\ub2a5\ud55c \uc0c1\ud669\uc785\ub2c8\ub2e4.\\n\\n\ubb3c\ub9ac\uc801 \uacf5\uac04\uc774 \ud55c\uc815\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc5d0, \uc798\ubabb\ub41c \ud658\uacbd\ubcc0\uc218 \uc124\uc815\ub85c \uc778\ud574 \ubc1c\uc0dd\ud55c \uc624\ub958\ub098 \ubc84\uadf8\ub97c \uc218\uc815\ud558\ub824\uba74 \uc989\uac01\uc801\uc778 \ub300\uc751\uc5d0 \uc5b4\ub824\uc6c0\uc774 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n### local\uc5d0\uc11c \uc2e4\ud589\ud558\ub294 \uacbd\uc6b0, \uba85\uc2dc\ub41c \ud658\uacbd\ubcc0\uc218\ub4e4\uc744 \ubaa8\ub450 \uc120\uc5b8\ud574\uc57c \ud55c\ub2e4.\\n\\n\ubc31\uc5d4\ub4dc \ud06c\ub8e8\ub4e4\uc774 \uac1c\uac1c\uc778\uc758 \ud658\uacbd\uc5d0\uc11c \ud574\ub2f9 \uac12\uc73c\ub85c \ud14c\uc2a4\ud2b8\ub97c \ud558\uac70\ub098 \uc2e4\ud589\ud558\ub824\uba74 \ubaa8\ub4e0 `Secret` \uac12\ub4e4\uc744 \uac1c\uac1c\uc778\uc758 \ud658\uacbd\uc5d0\uc11c \uc8fc\uc785\ud558\uac70\ub098 \uc120\uc5b8\ud574\uc57c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ub9cc\uc57d, \uc0c8\ub85c\uc6b4 `Secret` \uac12\uc774 \uc874\uc7ac\ud558\ub294 PR\uc774 \ucd94\uac00\ub41c\ub2e4\uba74, \ubaa8\ub4e0 \ud06c\ub8e8\ub4e4\uc5d0\uac8c \ud574\ub2f9 \uac12\uc774 \uacf5\uc720\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub9cc \ucd94\uac00\ub41c \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uac70\ub098 \ud14c\uc2a4\ud2b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc5ec\ub7ec \uac12\ub4e4\uc774 \uc874\uc7ac\ud55c\ub2e4\uba74, \ud06c\ub8e8\ub4e4\uac04\uc758 `Secret`\uac12 \uacf5\uc720 \ubc0f \ub3d9\uae30\ud654 \uacfc\uc815\uc5d0\uc11c \uac12\uc774 \ub204\ub77d\ub418\uac70\ub098 \uc8fc\uc785\uc744 \ud558\uc9c0 \uc54a\ub294 \ub4f1\uc758 \uc2e4\uc218\ub97c \ub9e4\ubc88 \uac10\ub0b4\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc800\ud76c\ub294 `git submodule`\uc744 \ud1b5\ud574 `Secret` \uac12\ub4e4\uc744 \uad00\ub9ac \ubc0f \uacf5\uc720\ud558\uae30\ub85c \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n## Submodule \uc0dd\uc131\\n\\nSubmodule\uc740 git\uc758 \ub808\ud3ec\uc9c0\ud1a0\ub9ac \ud558\uc704\uc5d0 \ub2e4\ub978 \uc800\uc7a5\uc18c\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud55c \ub3c4\uad6c\uc785\ub2c8\ub2e4.\\n\\n\uc0c1\uc704 \uac1c\ub150\uc758 Repository\uc640 \ud558\uc704 \uac1c\ub150\uc758 submodule\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n[\uc0c1\uc704 Repository]\uc5d0 submodule\uc744 \ub4f1\ub85d\ud558\uba74, \uc0c1\uc704 Repository\uc5d0\uc11c submoulde\ub97c \ud558\uc704 \ub514\ub809\ud1a0\ub9ac\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc800\ud76c\ub294 [2023-celuveat repository](https://github.com/woowacourse-teams/2023-celuveat)\uc5d0 secret \uac12\ub4e4\uc774 \uc800\uc7a5\ub418\uc5b4\uc788\ub294 \ub2e4\ub978 repository\ub97c submodule\ub85c \ub4f1\ub85d\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uba3c\uc800, \uc11c\ube0c \ubaa8\ub4c8\ub85c \ub4f1\ub85d\ud560 `private repository`\ub97c \uc0dd\uc131\ud558\uace0 \uc0ac\uc6a9\ud560 \uac12\ub4e4\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\uc774\ub54c, \uc2e4\uc81c \uc0ac\uc6a9\ub418\ub294 \uac12\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n`application-dev.yml`\\n\\n```yaml\\nspring:\\n  datasource:\\n    url: jdbc:mysql://ip:3306/db\\n    username: dbusername\\n    password: dbpassword\\n    driver-class-name: com.mysql.cj.jdbc.Driver\\n\\n  jpa:\\n    show-sql: true\\n    properties:\\n      hibernate:\\n        format_sql: true\\n        use_sql_comments: true\\n        highlight_sql: true\\n\\n    hibernate:\\n      ddl-auto: validate\\n\\ncors:\\n  allowedOrigins: \\"localhost:3000\\"\\n```\\n\\n---\\n\\n\uadf8 \ud6c4, 2023-celuveat repository(\uc0c1\uc704 Repository)\uc5d0 \uc11c\ube0c\ubaa8\ub4c8\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4. \uac04\ub2e8\ud558\uac8c submodule\uc744 \ub4f1\ub85d\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```sh\\ngit submodule add https://github.com/celuveat/backend-submodule.git\\n```\\n\\nsubmodule\uc744 \ub4f1\ub85d\ud558\uace0 \ub098\uba74, `.gitmodules`\ub77c\ub294 \ud30c\uc77c\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4.\\n\\n`.gitmodules`\\n\\n```shell\\n[submodule \\"backend/backend-submodule\\"]\\n\\t\\tpath = backend/backend-submodule\\n\\t\\turl = git@github.com:celuveat/backend-submodule.git\\n```\\n\\nurl\uc5d0 \uc9c0\uc815\ub41c `Repository`\uc758 \uac12\ub4e4\uc774 `backend/backend-submodule`\uc5d0 \ucd94\uac00\ub418\uc5c8\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.\\n\\n_\uc774\ub54c, url\uc5d0 `HTTPS`\uac00 \uc544\ub2cc `SSH` path\ub97c \ub4f1\ub85d\ud558\uc5ec \ucd94\ud6c4 \uc778\uc99d\ud0a4\ub97c \ud1b5\ud574 private repository\uc758 \uac12\uc744 \ubd88\ub7ec\uc62c \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4._\\n\\n`\uc0c1\uc704 Repository`\ub97c \ud655\uc778\ud574\ubcf4\uba74 \ucd94\uac00\ub41c\uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n![submodule_init](./submodule_init.png)\\n\\n\uc774\ub807\uac8c \uc0c1\uc704 Repository\uc5d0 \uc11c\ube0c \ubaa8\ub4c8\uc758 \uac12\ub4e4\uc744 \ub514\ub809\ud1a0\ub9ac\ucc98\ub7fc \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n## Submodule \uac12 \uc0ac\uc6a9\ud558\uae30\\n\\n\ub2e8\uc21c\ud788 `git pull`\uc744 \ud55c\ub2e4\uba74 \uc11c\ube0c\ubaa8\ub4c8\uc758 \uac12\ub4e4\uc744 \ucc3e\uc544\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\n\\n![idea_submodule_init](./idea_submodule_init.png)\\n\\n\uc11c\ube0c\ubaa8\ub4c8\uc758 \ucee4\ubc0b\uc744 \ubd88\ub7ec\uc640\uc57c \ud558\ub294\ub370\uc694. \uc544\ub798 \ucee4\ub9e8\ub4dc\ub85c submodule\uc758 \uac12\uc744 \uc5c5\ub370\uc774\ud2b8 \ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4.\\n\\n```shell\\n# \ucd5c\ucd08 \uc2e4\ud589 \uc2dc\\ngit submoudle init\\n```\\n\\n```sh\\ngit submodule update --remote\\n```\\n\\n\uc2e4\ud589\ud558\uba74 `git@github.com: Permission denied (publickey).`\uc640 \ud568\uaed8 \uc624\ub958\ub97c \ub9c8\uc8fc\ud558\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uc55e\uc120 \uacfc\uc815\uc5d0\uc11c SSH path\ub85c \uc11c\ube0c\ubaa8\ub4c8 Repository\ub97c \ub4f1\ub85d\ud558\uc600\uae30 \ub54c\ubb38\uc5d0, \ub4f1\ub85d\ud55c key\uac00 \uc5c6\uc5b4 \uad8c\ud55c \ubb38\uc81c\ub97c \ub9c8\uc8fc\ud55c \uac83 \uc785\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc778\uc99d\uc5d0 \uc0ac\uc6a9\ub420 Key\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.\\n\\n```shell\\nssh-keygen -t rsa\\n```\\n\\n\ubaa8\ub450 enter\ub97c \ub204\ub974\uba70 \uc791\uc5c5\uc744 \uae30\ub2e4\ub9ac\uba74 `rsa.pub`\uc774 \uc0dd\uc131\ub41c \uacbd\ub85c\uac00 \ucd9c\ub825\ub418\uba70 \uc644\ub8cc\ub429\ub2c8\ub2e4.\\n\\n![key-gen](./key-gen.png)\\n\\n\uc0dd\uc131\ub41c public key\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n```shell\\ncat ~/.ssh/id_rsa.pub\\n```\\n\\n\uc0dd\uc131\ub41c Key\ub97c **\ubaa8\ub450** \ubcf5\uc0ac\ud55c \ub4a4\\n`github\uacc4\uc815 \ud504\ub85c\ud544` -> `Settings` -> `SSH and GPG key` \uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\uc774\ub54c github \uacc4\uc815\uc740 private repository\uc778 \uc11c\ube0c \ubaa8\ub4c8\uc5d0 \ub300\ud55c \uad8c\ud55c\uc774 \uc874\uc7ac\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n\ub4f1\ub85d\uc774 \uc644\ub8cc\ub418\uc5c8\ub2e4\uba74, \ub2e4\uc2dc \ub3cc\uc544\uc640\uc11c \uc11c\ube0c\ubaa8\ub4c8\uc758 \uac12\uc744 \ubd88\ub7ec\uc635\ub2c8\ub2e4.\\n\\n```shell\\ngit submodule update --remote\\n```\\n\\n![idea_submodule](./idea_submodule.png)\\n\\n\uc798 \ubd88\ub7ec\uc640\uc9c4 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ud558\uc9c0\ub9cc, \ud574\ub2f9 \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc874\uc7ac\ud55c\ub2e4\uba74 Spring application\uc774 \ub3d9\uc791\ud560 \ub54c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc704\uc640 \uac19\uc740 \uad6c\uc870\uc5d0\uc11c \ube4c\ub4dc\uac00 \ubc1c\uc0dd\ud560 \ub54c, submodule\uc744 \ud1b5\ud574 \ubc1b\uc544\uc628 `application.yml`\uac12 \ub4e4\uc744 \uac10\uc9c0 \uac00\ub2a5\ud55c \uc704\uce58\uc778 `src.main.resources` \ud558\uc704\ub85c \uc62e\uae30\ub294 \uc791\uc5c5\uc744 \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n`build.gradle`\uc5d0 \uc544\ub798 \ucf54\ub4dc\ub97c \ucd94\uac00\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n```groovy\\nprocessResources.dependsOn(\'copySecret\')\\n\\ntasks.register(\'copySecret\', Copy) {\\n    from \'./backend-submodule\' // \uc11c\ube0c\ubaa8\ub4c8 \ub514\ub809\ud1a0\ub9ac \uacbd\ub85c\\n    include \\"application*.yml\\"  // \ubcf5\uc0ac\ud560 \ud30c\uc77c\ub4e4\\n    into \'./src/main/resources\'  // \ubcf5\uc0ac \uc704\uce58\\n}\\n\\n```\\n\\n\ud574\ub2f9 \ucf54\ub4dc\ub97c \ucd94\uac00\ud55c \ub4a4 \ube4c\ub4dc \uc791\uc5c5\uc744 \uc218\ud589\ud558\uba74, \uc9c0\uc815\ud574\ub454 \uacbd\ub85c\uc5d0 \uc131\uacf5\uc801\uc73c\ub85c \ubcf5\uc0ac\ub429\ub2c8\ub2e4.\\n\\n![idea_after_build](./idea_after_build.png)\\n\\n> src.main.resources \uacbd\ub85c\ub97c .gitignore\uc5d0 \ubbf8\ub9ac \ub4f1\ub85d\ud574 \ub450\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n## \uc815\ub9ac\\n\\n`submodule`\uc744 \ub3c4\uc785\ud558\uc5ec Secret \uac12\ub4e4\uc744 \ub178\ucd9c\uc2dc\ud0a4\uc9c0 \uc54a\uc73c\uba74\uc11c\ub3c4 \uc27d\uac8c \uacf5\uc720\ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\ud574\ub2f9 \uac12\ub4e4\uc758 \ud615\uc0c1\uad00\ub9ac \uc5ed\uc2dc \uac00\ub2a5\ud574\uc84c\uace0, \uc811\uadfc \uad8c\ud55c\ub9cc \uc788\ub2e4\uba74 \uc5b4\ub514\uc11c\ub4e0 \ud574\ub2f9 \uac12\ub4e4\uc744 \uc218\uc815\ud558\uc5ec \ubc30\ud3ec\uc2dc \uc0ac\uc6a9\ub418\ub294 \uac12\ub4e4\ub3c4 \uc870\uc815\ud560 \uc218 \uc788\uac8c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n`git pull` \uacfc `git submodule update --remote` \ub450 \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \uc5b4\ub290 \ud658\uacbd\uc5d0\uc11c\ub3c4 Secret \uac12\ub4e4\uc744 \ud3ec\ud568\ud558\uc5ec application\uc744 \uc2e4\ud589 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."},{"id":"/mallang/cicd-series/cicd-2/cicd2","metadata":{"permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-2/cicd2","source":"@site/@backBlog/mallang/cicd-series/cicd-2/cicd2.mdx","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (2) Git \uc11c\ube0c\ubaa8\ub4c8 \ub3c4\uc785","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","date":"2023-08-01T00:00:00.000Z","formattedDate":"2023\ub144 8\uc6d4 1\uc77c","tags":[{"label":"CI/CD","permalink":"/team-blog/back-blog/tags/ci-cd"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"},{"label":"Github Actions","permalink":"/team-blog/back-blog/tags/github-actions"},{"label":"git submodules","permalink":"/team-blog/back-blog/tags/git-submodules"}],"readingTime":8.73,"hasTruncateMarker":true,"authors":[{"name":"donghun Shin","url":"https://github.com/shin-mallang","email":"huipulci1@naver.com","imageURL":"https://avatars.githubusercontent.com/u/52229930?v=4","key":"shin-mallang"}],"frontMatter":{"date":"2023-08-01T00:00:00.000Z","authors":"shin-mallang","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (2) Git \uc11c\ube0c\ubaa8\ub4c8 \ub3c4\uc785","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","keywords":["CI/CD","\uc778\ud504\ub77c"],"tags":["CI/CD","\uc778\ud504\ub77c","Github Actions","git submodules"]},"prevItem":{"title":"Submodule \ub3c4\uc785\ud558\uae30","permalink":"/team-blog/back-blog/royce/submodule/submodule"},"nextItem":{"title":"OAuth2.0 \ub3c4\uc785\uae30","permalink":"/team-blog/back-blog/mallang/oauth/oauth"}},"content":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (2) Git \uc11c\ube0c\ubaa8\ub4c8 \ub3c4\uc785\\n\\n\x3c!--truncate--\x3e\\n\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uc11c\ub860\\n\\n\uc548\ub155\ud558\uc138\uc694. \uc140\ub7fd\uc787\uc758 \ubc31\uc5d4\ub4dc \ub9d0\ub791\uc785\ub2c8\ub2e4.\\n\\n3\ucc28 \ub370\ubaa8\ub370\uc774\ub97c \uc55e\ub450\uace0 \ud504\ub85c\ub355\uc158 \uc11c\ubc84\ub97c \uc900\ube44\ud558\ub2e4 \ubcf4\ub2c8, \uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc29\uc2dd\uc5d0 \ubcc0\uacbd \uc0ac\ud56d\uc774 \uc0dd\uaca8\uc11c \uc774\ub97c \uacf5\uc720\ud558\uae30 \uc704\ud574 \ucc3e\uc544\uc654\uc2b5\ub2c8\ub2e4 \ud83d\ude0e\\n\\n\uccab\ubc88\uc9f8 \ubcc0\uacbd\uc810\uc740 **Git Submodule**\uc744 \ub3c4\uc785\ud588\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4. <br/>\\n\\n\uae30\ub2a5\uc774 \ucd94\uac00\ub428\uc5d0 \ub530\ub77c **Dev** \ud658\uacbd\uacfc **Prod** \ud658\uacbd\uc5d0\uc11c \uac01\uac01 \uc124\uc815\ud574 \uc8fc\uc5b4\uc57c \ud558\ub294 \ubcc0\uc218\ub4e4\uc774 \ub9ce\uc544\uc9c0\ub2e4 \ubcf4\ub2c8<br/>\\n\uc774\ub4e4\uc774 **\ucd94\uac00\ub418\uac70\ub098 \ubcc0\uacbd\ub420 \ub54c\ub9c8\ub2e4** \ub9e4\ubc88 **\uc11c\ubc84\uc5d0 \ub4e4\uc5b4\uac00 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \ucd94\uac00\ud558\uace0 \uc218\uc815**\ud574\uc8fc\ub294 \uc791\uc5c5\uc774 \ub9ce\uc774 \ubc88\uac70\ub85c\uc6e0\uc2b5\ub2c8\ub2e4.<br/>\\n\ub610\ud55c \ubc18\ub4dc\uc2dc \uc6b0\ud14c\ucf54 \uad50\uc721\uc7a5\uc5d0\uc11c\ub9cc ec2 \uc11c\ubc84\uc5d0 ssh \ub85c \uc811\uadfc\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\ub418\uc5b4\uc788\uae30 \ub54c\ubb38\uc5d0, **\uc9d1\uc5d0 \uac04 \uc0c1\ud669\uc5d0\uc11c \uc124\uc815\uc744 \ubc14\uafb8\uc5b4 \uc904 \ubc29\ubc95\uc774 \uc5c6\uc5c8\uc2b5\ub2c8\ub2e4**.\\n\\n\uc774\ub7ec\ud55c \ubb38\uc81c\uc810\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc800\ud76c\ub294 **Git Submodule**\uc744 \ub3c4\uc785\ud588\ub294\ub370\uc694,\\n\uc11c\ube0c\ubaa8\ub4c8\uc5d0 \ub300\ud55c \uae30\ubcf8\uc801\uc778 \uc124\uba85\uc740 [\ub9d0\ub791\uc774\uc758 \ube14\ub85c\uadf8](https://ttl-blog.tistory.com/1346)\uc5d0 \ub098\uc640\uc788\uc73c\ubbc0\ub85c \ud574\ub2f9 \uae00\uc5d0\uc11c\ub294 \uc0dd\ub7b5\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\ub300\uc2e0 \uc11c\ube0c \ubaa8\ub4c8\uc744 \ub3c4\uc785\ud558\uba74\uc11c \ubc1c\uc0dd\ud588\ub358 \uc774\uc288\ub4e4\uc744 \ud574\uacb0\ud558\ub294 \uacfc\uc815\uc744 \uc11c\uc220\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n\ub450\ubc88\uc9f8 \ubcc0\uacbd\uc810\uc740 **\ud504\ub85c\ub355\uc158 \uc11c\ubc84\ub97c \uc704\ud55c \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc791\uc131**\ub41c \uac83\uc785\ub2c8\ub2e4. <br/>\\n\\n\uc774\uc804 \uae00\uc5d0\uc11c \uc791\uc131\ud558\uc9c0 \uc54a\uc740 **Prod \uc11c\ubc84\ub97c \uc704\ud55c CD workflow** \uc124\uc815\uc744 \uc911\uc2ec\uc801\uc73c\ub85c \uc0b4\ud3b4\ubcf4\uace0,<br/>\\n\ud558\ub098\uc758 Git Repository\uc5d0\uc11c `dev`\uc640 `prod` \uc11c\ubc84\ub97c \uad6c\ubd84\ud558\uc5ec \ubc30\ud3ec\ud558\ub3c4\ub85d \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 Submodule \uc801\uc6a9 \ud2b8\ub7ec\ube14\uc288\ud305\\n\\n\uc800\ud76c \ud300\uc740 CD\ub97c `Github Actions Self-hosted Runners`\ub97c \ud1b5\ud574 \uc218\ud589\ud558\ub294\ub370\uc694,\\n\uc774\ub54c Workflow\ub97c \ub2e4\uc2dc \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n```yml\\nname: \u2728 Celuveat backend DEV CD \u2728\\n\\non:\\n  push:\\n    branches:\\n      - develop-backend\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  deploy-backend:\\n    runs-on: self-hosted\\n\\n    steps:\\n      - name: \u2728 Run Backend Deploy Script\\n        run: |\\n          cd ~\\n          sudo ./deploy-backend.sh\\n```\\n\\n\ub9c8\uc9c0\ub9c9 \ubd80\ubd84\uc744 \ubcf4\uba74 \uc544\uc2dc\uaca0\uc9c0\ub9cc, `sudo`\ub97c \ud1b5\ud574\uc11c \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\ub294\ub370\uc694, \uc774\ub54c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.\\n\\n[\ub9d0\ub791\uc774\uc758 Git Submodule \uc124\uba85 \uae00](https://ttl-blog.tistory.com/1346)\uc758\\n[EC2\uc5d0\uc11c Private Repository\uc5d0 \ub300\ud55c \uc778\uc99d \ubb38\uc81c \ud574\uacb0\ud558\uae30](https://ttl-blog.tistory.com/1346#%F0%9F%A7%90%20EC2%EC%97%90%EC%84%9C%20Private%20Repository%EC%97%90%20%EB%8C%80%ED%95%9C%20%EC%9D%B8%EC%A6%9D%20%EB%AC%B8%EC%A0%9C%20%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0-1)\\n\ubd80\ubd84\uc744 \ubcf4\uace0 \ub611\uac19\uc774 \uc801\uc6a9\ud558\uc600\ub294\ub370, git submodule update\ub97c \ud558\ub294 \uacfc\uc815\uc5d0\uc11c `Permission denied (publickey)` \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc5d0 \ub300\ud55c \uc6d0\uc778\uc744 \ucc3e\uc544\ubcf4\ub2c8, git \uc5d0\uc11c sudo \uba85\ub839\uc744 \ub418\ub3c4\ub85d \uc0ac\uc6a9\ud574\uc11c\ub294 \uc54a\ub294\uac83\uc744 \uad8c\uc7a5\ud55c\ub2e4\uace0 \ud558\uba70,\\n`sudo \uc5c6\uc774 ssh \ud0a4\ub97c \uc0dd\uc131`\ud55c \ub2e4\uc74c `sudo git push`\uc640 \uac19\uc740 \uba85\ub839\uc744 \uc0ac\uc6a9\ud558\uba74 `\uc0dd\uc131\ud55c \uac83\uacfc \ub3d9\uc77c\ud55c \ud0a4\uac00 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294\ub2e4`\uace0\\n[\ub2e4\uc74c \ubb38\uc11c](https://docs.github.com/ko/authentication/troubleshooting-ssh/error-permission-denied-publickey)\uc5d0 \ub098\uc640\uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \uc65c \ubb38\uc81c\uc778\uac00?\\n\\n`sudo` \uba85\ub839\uc744 \ud1b5\ud574 \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\ud558\uac8c \ub418\uba74, `\uc258 \uc2a4\ud06c\ub9bd\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \ubaa8\ub4e0 \uba85\ub839\uc5b4`\uac00 `sudo \uad8c\ud55c`\uc73c\ub85c \uc2e4\ud589\ub418\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uadf8\ub7f0\ub370 \uc774\ub54c \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\uc5d0\ub294 \ub2e4\uc74c \uba85\ub839\uc5b4\uac00 \uc874\uc7ac\ud588\uc2b5\ub2c8\ub2e4.\\n\\n```bash\\n# ...\uc0dd\ub7b5\\n\\ngit submodule update\\n\\n# ...\uc0dd\ub7b5\\n```\\n\\n\uc989 \uc704 \uba85\ub839\uc774 \uc2e4\uc81c\ub85c\ub294 `sudo git submodule update`\ub85c \uc2e4\ud589\ub418\ub294 \uac83\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\nEC2\uc5d0\uc11c Private repository\uc5d0 \ub300\ud55c \uc778\uc99d \ucc98\ub9ac\ub97c \uc704\ud574 \uc11c\ube0c\ubaa8\ub4c8\uc758 URL\uc744 **ssh**\ub85c \uc124\uc815\ud558\uc600\uae30\uc5d0\\n`git submodule update`\ub97c \uc704\ud574\uc11c\ub294 `ssh key`\uac00 \ud544\uc694\ud55c \uc0c1\ud669\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub7ec\ub098 \uc704 \ubb38\uc11c\uc758 \uc124\uba85\uc5d0 \ub098\uc640\uc788\ub4ef\uc774 `sudo \uc5c6\uc774 ssh \ud0a4\ub97c \uc0dd\uc131`\ud55c \ub2e4\uc74c `sudo git update submodule` \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc600\uae30\uc5d0,\\n`\uc0dd\uc131\ud55c \uac83\uacfc \ub3d9\uc77c\ud55c \ud0a4\uac00 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uc544` \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\ub358 \uac83\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \uc5b4\ub5bb\uac8c \ud574\uacb0\ud558\ub098\uc694?\\n\\n\uac04\ub2e8\ud569\ub2c8\ub2e4.\\nsudo \uc5c6\uc774 ssh \ud0a4\ub97c \uc0dd\uc131\ud55c \uac83\uc774 \ubb38\uc81c\uc600\uae30 \ub54c\ubb38\uc5d0, `sudo \uba85\ub839\uc5b4\uc640 \ud568\uaed8 ssh \ud0a4\ub97c \uc0dd\uc131`\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4.\\n\\n\uc774\ub54c sudo \uba85\ub839\uc5b4\ub85c \uc0dd\uc131\ub41c \ud0a4\ub294 `cat ~/.ssh/id_rsa.pub`\ub85c\ub294 \ubc14\ub85c \ubcfc \uc218 \uc5c6\uc73c\uba70,\\n\\n`sudo su` \uba85\ub839\uc744 \ud1b5\ud574 root \uacc4\uc815\uc73c\ub85c \uc804\ud658 \ud6c4 `cat ~/.ssh/id_rsa.pub`\ub97c \uc2e4\ud589\ud574 \uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n(\ud574\ub2f9 \uacfc\uc815\ub3c4 \ube14\ub85c\uadf8 \uae00\uc5d0 \uc5c5\ub370\uc774\ud2b8 \ud574\ub450\uc5c8\uc73c\ub2c8, \uc0c1\uc138\ud55c \uc124\uba85\uc740 \ube14\ub85c\uadf8\ub97c \ucc38\uc870\ud574\uc8fc\uc2dc\uba74 \uac10\uc0ac\ud558\uaca0\uc2b5\ub2c8\ub2e4.)\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uac1c\ubc1c \uc11c\ubc84(Dev)\uc640 \ud504\ub85c\ub355\uc158 \uc11c\ubc84(Prod)\uc758 \ubc30\ud3ec \uc790\ub3d9\ud654\ud558\uae30\\n\\n\ud504\ub85c\ub355\uc158 \uc11c\ubc84\ub97c \ud3ec\ud568\ud55c \uc800\ud76c\uc758 CI/CD \uad6c\uc870\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n![cicd](./cicd.png)\\n\\n\uad6c\uc870\ub97c \ubcf4\uba74 \uc54c \uc218 \uc788\ub4ef\uc774, `develop-frontend` \ube0c\ub79c\uce58\uc640 `develop-backend` \ube0c\ub79c\uce58\uc5d0 PR\uc774 Merge\ub418\uba74,<br/>\\n`dev \uc11c\ubc84`\uc758 frontend\uc640 backend\uc758 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uac01\uac01 \uc2e4\ud589\uc2dc\ud0a4\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\ub610\ud55c `main` \ube0c\ub79c\uce58\uc5d0 PR\uc774 Merge\ub418\uba74 `prod \uc11c\ubc84`\uc758 frontend\uc640 backend\uc758 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc2e4\ud589\uc2dc\ud0b5\ub2c8\ub2e4.\\n\\n\uc774\ub54c `dev \uc11c\ubc84`\uc640 `prod \uc11c\ubc84` \ubaa8\ub450 `self-hosted runners`\ub97c \uac01\uac01 \uc2e4\ud589\ud558\uace0 \uc788\ub294 \uc0c1\ud0dc\uc785\ub2c8\ub2e4.\\n\\n\uc774 \uc0c1\ud669\uc5d0\uc11c \uc5b4\ub5bb\uac8c `workflow`\uc5d0 \ub530\ub77c \ud2b9\uc815 \uc11c\ubc84\uc758 `self-hosted runners`\ub9cc \uc2e4\ud589\ud560 \uc218 \uc788\uc744\uae4c\uc694? <br/>\\n(\ub354 \uc815\ud655\ud788\ub294 \uc5b4\ub5bb\uac8c **PR\uc774 Merge\ub418\ub294 \ube0c\ub79c\uce58\uc5d0 \ub530\ub77c** \ud2b9\uc815 `self-hosted runners`\ub9cc \uc2e4\ud589\ub418\ub3c4\ub85d \uc124\uc815\ud560 \uc218 \uc788\uc744\uae4c\uc694?)\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 Runners \uc758 Label \ud65c\uc6a9\ud558\uae30\\n\\n([\ub2e4\uc74c \ubb38\uc11c](https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/using-self-hosted-runners-in-a-workflow#using-custom-labels-to-route-jobs)\ub97c \ucc38\uace0\ud558\uc5ec \uc124\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.)\\n\\n`Actions`\uc758 `Runners`\ub294 `Label`\uc744 \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![label](./runner-label.png)\\n\\n\uc704 \uc0ac\uc9c4\uacfc \uac19\uc774, \uc800\ud76c\ub294 dev \uc11c\ubc84\uc640 prod \uc11c\ubc84\uc758 Runner \uc5d0 \ub300\ud558\uc5ec, \uac01\uac01 `dev`\uc640 `prod`\ub77c\ub294 label\uc744 \ubd99\uc5ec\uc8fc\uc5b4 \uc774\ub4e4\uc744 \uad6c\ubd84\uc9c0\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub9ac\uace0 \ubc31\uc5d4\ub4dc\uc758 DEV \uc11c\ubc84\uc6a9 CD workflow\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n#### \ud83d\ude80 \ubc31\uc5d4\ub4dc DEV\uc6a9 CD workflow\\n\\n```yml\\nname: \u2728 Celuveat backend DEV CD \u2728\\n\\non:\\n  push:\\n    branches:\\n      - develop-backend\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  deploy-backend:\\n    runs-on: [self-hosted, dev] ## \ucd94\uac00\\n\\n    steps:\\n      - name: \u2728 Run Backend Deploy Script\\n        run: |\\n          cd ~\\n          sudo sh deploy-backend.sh\\n```\\n\\n<br />\\n<br />\\n\\n\uc774\ud6c4 \ubc31\uc5d4\ub4dc\uc758 PROD \uc11c\ubc84\uc6a9 CD workflow\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \uc791\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n#### \ud83d\ude80 \ubc31\uc5d4\ub4dc PROD\uc6a9 CD workflow\\n\\n```yml\\nname: \u2728 Celuveat backend PROD CD \u2728\\n\\non:\\n  push:\\n    branches:\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  deploy-backend:\\n    runs-on: [self-hosted, prod]\\n\\n    steps:\\n      - name: \u2728 Run Backend Deploy Script\\n        run: |\\n          cd ~\\n          sudo sh deploy-backend.sh\\n```\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83d\ude0e \ub9c8\ubb34\ub9ac\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uc140\ub7fd\uc787 \ud300\uc758 \ubcc0\uacbd\ub41c CI/CD \uc544\ud0a4\ud14d\ucc98\ub97c \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4.\\n\\n\uc0dd\uac01\ubcf4\ub2e4 \uc81c \ube14\ub85c\uadf8\ub85c \uc11c\ube0c\ubaa8\ub4c8 \uad00\ub828 \ub0b4\uc6a9\uc744 \ub118\uc5b4\uac00\ub2c8 \uc815\ub9ac\ud560 \ub0b4\uc6a9\uc774 \uc5bc\ub9c8 \uc5c6\uc5c8\ub124\uc694 :)\\n\\n\uc77d\uc5b4\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4 \ud83d\ude0a\\n\\n<br />\\n<br />\\n<br />"},{"id":"/mallang/oauth/oauth","metadata":{"permalink":"/team-blog/back-blog/mallang/oauth/oauth","source":"@site/@backBlog/mallang/oauth/oauth.mdx","title":"OAuth2.0 \ub3c4\uc785\uae30","description":"OAuth2.0 \ub3c4\uc785\uae30","date":"2023-07-31T00:00:00.000Z","formattedDate":"2023\ub144 7\uc6d4 31\uc77c","tags":[{"label":"OAuth2.0","permalink":"/team-blog/back-blog/tags/o-auth-2-0"},{"label":"\uc18c\uc15c \ub85c\uadf8\uc778","permalink":"/team-blog/back-blog/tags/\uc18c\uc15c-\ub85c\uadf8\uc778"}],"readingTime":53.7,"hasTruncateMarker":true,"authors":[{"name":"donghun Shin","url":"https://github.com/shin-mallang","email":"huipulci1@naver.com","imageURL":"https://avatars.githubusercontent.com/u/52229930?v=4","key":"shin-mallang"}],"frontMatter":{"date":"2023-07-31T00:00:00.000Z","authors":"shin-mallang","title":"OAuth2.0 \ub3c4\uc785\uae30","description":"OAuth2.0 \ub3c4\uc785\uae30","keywords":["OAuth2.0","\uc18c\uc15c \ub85c\uadf8\uc778"],"tags":["OAuth2.0","\uc18c\uc15c \ub85c\uadf8\uc778"]},"prevItem":{"title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (2) Git \uc11c\ube0c\ubaa8\ub4c8 \ub3c4\uc785","permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-2/cicd2"},"nextItem":{"title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (1) \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-1/cicd"}},"content":"OAuth2.0 \ub3c4\uc785\uae30\\n\\n\x3c!--truncate--\x3e\\n\\n<br />\\n<br />\\n\\n> \uc774 \uae00\uc740 \ubc31\uc5d4\ub4dc \ud06c\ub8e8 \ub9d0\ub791\uc774\uac00 \uc791\uc131\ud588\uae30 \ub54c\ubb38\uc5d0, \ud504\ub860\ud2b8 \ucf54\ub4dc\ub294 \ub2e4\uc18c \uc5c9\ub9dd\uc9c4\ucc3d\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\nOAuth2.0\uc758 \uac1c\ub150\uc5d0 \ub300\ud574\uc11c\ub294 \uc774\ubbf8 \ub9ce\uc740 \ube14\ub85c\uadf8\ub4e4\uc5d0\uc11c \ub2e4\ub8e8\uace0 \uc788\uc73c\ubbc0\ub85c \ud574\ub2f9 \uae00\uc5d0\uc11c\ub294 \ub2e4\ub8e8\uc9c0 \uc54a\uc74c\uc744 \uba3c\uc800 \ubc1d\ud799\ub2c8\ub2e4.\\n\\n\ud574\ub2f9 \uae00\uc5d0\uc11c\ub294 (\uc801\uc5b4\ub3c4 \uc81c\uac00 \uc0b4\ud3b4\ubcf4\uc558\ub358) \ub300\ubd80\ubd84\uc758 \ube14\ub85c\uadf8\uc5d0\uc11c \uc560\ub9e4\ud558\uac8c \uc124\uba85\ub418\uc5b4\uc788\ub294 **\ud504\ub860\ud2b8\uc5d4\ub4dc\uc640 \ubc31\uc5d4\ub4dc\uc758 \uc5ed\ud560**\uacfc, \uc774\ub97c \uc2e4\uc81c\ub85c \uc5b4\ub5bb\uac8c \uad6c\ud604\ud558\ub294\uc9c0\ub97c \uc9d1\uc911\uc801\uc73c\ub85c \ub2e4\ub8f0 \uac83\uc785\ub2c8\ub2e4.\\n\\n\ub610\ud55c \ub2e8\uc21c\ud788 \uad6c\ud604\ud558\uace0 \ub05d\ub0b4\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \uc0c8\ub85c\uc6b4 \ud0c0\uc0ac \ud50c\ub7ab\ud3fc\uc744 \ucd94\uac00\ud558\ub294 \uacfc\uc815\ub3c4 \uac04\ub2e8\ud558\uac8c \ucc98\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d **\uc720\uc5f0\ud558\uace0 \ud655\uc7a5 \uac00\ub2a5\ud55c \uad6c\uc870**\ub97c \uac00\uc9c4 \ucf54\ub4dc\ub97c \uc791\uc131\ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc18c\uc2a4 \ucf54\ub4dc\ub294 [\ud574\ub2f9 Repository](https://github.com/shin-mallang/oauth-login-sample) \uc5d0\uc11c \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 OAuth 2.0 \ud50c\ub85c\uc6b0 \uc815\ub9ac\\n\\n\ucc98\uc74c OAuth 2.0\uc744 \uc811\ud558\uace0 \uacf5\ubd80\ud558\ub2e4 \ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uadf8\ub9bc\uacfc \uc124\uba85\uc744 \ud754\ud558\uac8c \ub9c8\uc8fc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![OAuth2-flow](./oauth-flow.png)\\n\\n\uc704 \uc124\uba85\uc740 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc640 \ubc31\uc5d4\ub4dc\uc758 \uc5ed\ud560\uc774 \ubd88\ubd84\uba85\ud558\ub2e4\ub294 \ubb38\uc81c\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc704 \uac1c\ub150\uc744 \ucc98\uc74c \uc811\ud558\uace0 \uad6c\ud604\ud558\ub824\ub294 \uc0ac\ub78c\ub4e4\uc744 \ub300\ubd80\ubd84 \ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c\uc790\uc640 \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790\uc77c\ud150\ub370, \uc774\ub4e4\uc758 \uc5ed\ud560\uc740 \uc5b4\ub5bb\uac8c \uad6c\ubd84\ub418\uc5b4\uc9c8\uae4c\uc694?\\n\\nOAuth2.0 \uc5d0 \ub300\ud574 \uc124\uba85\ud558\ub294 \uae00\ub4e4\uc744 \ucc3e\uc544\ubcf4\uba74, \uc774\ub4e4\uc758 \uc5ed\ud560\uc744 \ub2e8\uc21c\ud788 Client\ub85c\ub9cc \ubb49\ub6b1\uadf8\ub824 \uc124\uba85\ud558\ub294 \uae00\ub4e4\uc774 \ub300\ubd80\ubd84\uc774\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub7ec\uba74 \uc800\uac19\uc740 \ubc14\ubcf4 \uac1c\ubc1c\uc790 \uc785\uc7a5\uc5d0\uc11c\ub294 \uad6c\ud604\ud558\uae30\uac00 \uc27d\uc9c0 \uc54a\uaca0\uc8e0... \ud83d\ude22\\n\\n\uadf8\ub798\uc11c \uc800\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c\uc790\uc640 \ubc31\uc5d4\ub4dc \uac1c\ubc1c\uc790\uc758 \uc5ed\ud560\uc744 \uc870\uae08 \ub354 \uad6c\ubd84\uc9c0\uc5b4 Client\uc758 \uc5ed\ud560\uc5d0 \uc9d1\uc911\ud558\uace0\uc790 \ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uad6c\ud604\ud558\ub294 \ubc29\ubc95\\n\\nOAuth2.0 \uc744 \ud1b5\ud55c \ub85c\uadf8\uc778\uc744 \uad6c\ud604\ud558\ub294 \ubc29\ubc95\uc740 \ud06c\uac8c **Redirect URI**\ub97c **\ubc31\uc5d4\ub4dc**\ub85c \uc124\uc815\ud558\ub294 \ubc29\ubc95\uacfc **\ud504\ub860\ud2b8\uc5d4\ub4dc**\ub85c \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \ub098\ub269\ub2c8\ub2e4.\\n\\n\uac01\uac01\uc758 \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604\ud588\uc744 \ub54c \uc7a5\uc810\uacfc \ud55c\uacc4\uc810\uc5d0 \ub300\ud574 \uc124\uba85\ud558\uace0, \uc774\ub4e4 \uc911 **\ud504\ub860\ud2b8\uc5d4\ub4dc**\ub85c Redirect URI\ub97c \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n(\uc774\ub54c \ubaa8\ub4e0 \uc0c1\ud669\uc5d0\uc11c \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\uc744 \ud55c\ub2e4\ub294 \uac00\uc815\uc744 \ud1b5\ud574 \uc7a5\uc810\uacfc \ub2e8\uc810\uc744 \uc54c\uc544\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4. \ud68c\uc6d0\uac00\uc785 \ud50c\ub85c\uc6b0\ub294 \uc704 \uadf8\ub9bc\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4.)\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 Redirect URI\ub97c \ubc31\uc5d4\ub4dc\ub85c \uc124\uc815\ud558\uae30\\n\\n\ud070 \ud750\ub984\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> 1\\\\. \uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud55c\ub2e4.\\n>\\n> 2\\\\. (\ubc84\ud2bc\uc744 \ub204\ub974\uba74) \ud504\ub860\ud2b8\uc5d4\ub4dc\ub294 \ubc31\uc5d4\ub4dc\uc758 \ud2b9\uc815 URI\ub85c \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n>\\n> 3\\\\. \ubc31\uc5d4\ub4dc\ub294 \uc774\ub97c \ucc98\ub9ac\ud558\uc5ec cliend_id, redirect_uri \ub4f1\uc744 \ud3ec\ud568\ud558\uc5ec \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84(Authorization Server)\uc758 Auth Code \ubc1c\uae09 URL\ub85c Redirect \uc2dc\ud0a8\ub2e4.\\n> \uc774\ub807\uac8c \ub418\uba74 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uc5d0\uc11c \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n>\\n> 4\\\\. \uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\uace0, \uc815\ubcf4 \uc0ac\uc6a9\uc5d0 \ub3d9\uc758\ud55c\ub2e4.\\n>\\n> 5\\\\. \ud574\ub2f9 \uc815\ubcf4\ub294 Authorization Server\uc5d0 \uc804\ub2ec\ub418\uba70, \uc774\ud6c4 \uc0ac\uc804\uc5d0 \ub4f1\ub85d\ud55c \ubc31\uc5d4\ub4dc\uc758 Redirect URI\ub85c Auth Code\uc640 \ud568\uaed8 Redirected \ub41c\ub2e4.\\n>\\n> 6\\\\. \ubc31\uc5d4\ub4dc\ub294 @GetMapping \ub4f1\uc73c\ub85c Redirect URI\ub85c \ub4e4\uc5b4\uc624\ub294 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\ub3c4\ub85d \uad6c\ud604\ud55c\ub2e4.\\n>\\n> - \uc694\uccad\uc758 Query String\uc73c\ub85c\ubd80\ud130 Code\ub97c \ucd94\ucd9c\ud55c\ub2e4.\\n> - \ud574\ub2f9 Code\ub97c \uac00\uc9c0\uace0 AccessToken\uc744 \ubc1b\uc544\uc628\ub2e4.\\n> - \ud574\ub2f9 AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubc1b\uc544\uc640 \ud68c\uc6d0\uac00\uc785&\ub85c\uadf8\uc778 \uc2dc\ud0a8\ub2e4.\\n> - \ub85c\uadf8\uc778 \uc774\ud6c4 \ubc1c\uae09\ub41c \uc778\uc99d \uc815\ubcf4(session \ud639\uc740 token)\uc744 \ucffc\ub9ac \ud30c\ub77c\ubbf8\ud130\ub85c \ucd94\uac00\ud558\uc5ec \ud504\ub860\ud2b8\uc5d4\ub4dc\uc758 \ub85c\uadf8\uc778 \uc131\uacf5\uc744 \ucc98\ub9ac\ud558\ub294 URL\ub85c Redirect \uc2dc\ud0a8\ub2e4.\\n\\nRedirect URI\ub97c \ubc31\uc5d4\ub4dc\ub85c \uc124\uc815\ud558\uba74, \ud504\ub860\ud2b8\ub294 \uc544\ubb34\ub7f0 \ucc98\ub9ac\ub97c \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub429\ub2c8\ub2e4.\\n\\n\ubc31\uc5d4\ub4dc \ub0b4\ubd80\uc5d0\uc11c Auth Code\ub97c \ud1b5\ud574 AccessToken\uc744 \uac00\uc838\uc624\uace0, \uc774\uc5b4\uc11c AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790\uc758 \uc815\ubcf4\uae4c\uc9c0 \uac00\uc838\uc628 \ub4a4 \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uadf8\ub7ec\ub098 \ub85c\uadf8\uc778 \uc131\uacf5 \uc774\ud6c4 Header\ub098 Body\uc5d0 token \ub4f1\uc758 \uc815\ubcf4\ub97c \ub123\uc5b4\uc8fc\ub294 \uacbd\uc6b0 CORS \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud558\uc5ec \uc804\ub2ec\ud560 \uc218 \uc5c6\ub294 \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.\\n\\n![CORS \ubc1c\uc0dd \ud654\uba74](./cors.png)\\n\\n\uadf8\ub798\uc11c \uc774 \uacbd\uc6b0, \ud68c\uc6d0\uac00\uc785 \ud639\uc740 \ub85c\uadf8\uc778 \ucc98\ub9ac \uc644\ub8cc \uc2dc \uc0dd\uc131\ub418\ub294 \uc778\uc99d \uc815\ubcf4(JWT \ud639\uc740 \uc138\uc158 \ub4f1)\uc744 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0 \uc804\ub2ec\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc624\uc9c1 Query String\uc744 \ud1b5\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \ud615\ud0dc\ub85c \uc804\ub2ec\ud558\ub294 \ubc29\ubc95\ubc16\uc5d0 \uc5c6\uc2b5\ub2c8\ub2e4.\\n\\n> \\\\[\ub85c\uadf8\uc778 \uc774\ud6c4 Redirect\ud560 \ud504\ub860\ud2b8\uc5d4\ub4dc URL\\\\]?accessToken={\ub85c\uadf8\uc778 \ud6c4 \ubc1c\uae09\ud55c \uc561\uc138\uc2a4 \ud1a0\ud070(or \uc138\uc158 ID)}\\n\\n\ub354 \ud070 \ubb38\uc81c\uc810\uc740 Redirect\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uc548\ub4dc\ub85c\uc774\ub4dc\uc640 \uac19\uc740 \ubaa8\ubc14\uc77c \ud658\uacbd\uc758 \uacbd\uc6b0 \uc774 \ubc29\ubc95\uc73c\ub85c\ub294 \ud68c\uc6d0\uac00\uc785\uacfc \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud560 \uc218 \uc5c6\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc774\ub7ec\ud55c \uacbd\uc6b0\ub77c\uba74 \ubc18\ub4dc\uc2dc Redirect URI\ub97c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c \uc124\uc815\ud558\uace0 \ucc98\ub9ac\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uc989 \uc774 \ubc29\ubc95\uc758 \ud2b9\uc9d5\uc744 \uc815\ub9ac\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n- \uc778\uc99d \uc815\ubcf4(\ud1a0\ud070, \uc138\uc158)\uc744 Query String\uc73c\ub85c \uc804\ub2ec\ud558\ub294 \ubc29\ubc95\ubc16\uc5d0 \uc5c6\ub2e4.\\n- \uc548\ub4dc\ub85c\uc774\ub4dc\uc640 \uac19\uc774 Redirect \ud560 \uc218 \uc5c6\ub294 \ubaa8\ubc14\uc77c \ud658\uacbd\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4.\\n\\n\uc774\uc81c Redirect URI\ub97c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c \uc124\uc815\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 Redirect URI\ub97c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c \uc124\uc815\ud558\uae30\\n\\n\uc774 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud558\ub294 \ud50c\ub85c\uc6b0\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> 1\\\\. \uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud55c\ub2e4.\\n>\\n> 2\\\\. (\ubc84\ud2bc\uc744 \ub204\ub974\uba74) \ud504\ub860\ud2b8\uc5d4\ub4dc\ub294 \ubc31\uc5d4\ub4dc\uc758 \ud2b9\uc815 URI\ub85c \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n>\\n> 3\\\\. \ubc31\uc5d4\ub4dc\ub294 \uc774\ub97c \ucc98\ub9ac\ud558\uc5ec cliend_id, redirect_uri \ub4f1\uc744 \ud3ec\ud568\ud558\uc5ec \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84(Authorization Server)\uc758 Auth Code \ubc1c\uae09 URL\ub85c\xa0 Redirect \uc2dc\ud0a8\ub2e4.\xa0\\n> \uc774\ub807\uac8c \ub418\uba74 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uc5d0\uc11c \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \uc81c\uacf5\ud55c\ub2e4.\\n>\\n> 4\\\\. \uc0ac\uc6a9\uc790\uac00 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\uace0, \uc815\ubcf4 \uc0ac\uc6a9\uc5d0 \ub3d9\uc758\ud55c\ub2e4. --- \uc5ec\uae30\uae4c\uc9c0 \ub3d9\uc77c\\n>\\n> 5\\\\. \ud574\ub2f9 \uc815\ubcf4\ub294 Authorization Server\uc5d0 \uc804\ub2ec\ub418\uba70, \uc774\ud6c4 \uc0ac\uc804\uc5d0 \ub4f1\ub85d\ud55c **\ud504\ub860\ud2b8\uc5d4\ub4dc**\uc758 Redirect URI\ub85c Auth Code\uc640 \ud568\uaed8 Redirected \ub41c\ub2e4.\\n>\\n> 6\\\\. \ud504\ub860\ub4dc\uc5d4\ub4dc\ub294 \ud574\ub2f9 Redirect URI\ub85c \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74, Query String\uc5d0\uc11c code\ub97c \ucd94\ucd9c\ud558\uc5ec \ubc31\uc5d4\ub4dc\uc758 code\ub97c \ud1b5\ud574 \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\ub294 API\ub85c \uc694\uccad\uc744 \uc804\uc1a1\ud55c\ub2e4.\\n>\\n> 7\\\\. \ubc31\uc5d4\ub4dc\ub294 @PostMapping(Get\ub3c4 \uc0c1\uad00\uc5c6\uace0 \ubb50 \uc544\ubb34\ud2bc) \ub4f1\uc73c\ub85c \ud574\ub2f9 \uc694\uccad\uc744 \ucc98\ub9ac(code\ub97c \ud1b5\ud574 \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778)\ud55c\ub2e4.\\n>\\n> - \uc694\uccad\uc758 Query String\uc73c\ub85c\ubd80\ud130 Code\ub97c \ucd94\ucd9c\ud55c\ub2e4.\\n> - \ud574\ub2f9 Code\ub97c \uac00\uc9c0\uace0 AccessToken\uc744 \ubc1b\uc544\uc628\ub2e4.\\n> - \ud574\ub2f9 AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubc1b\uc544\uc640 \ud68c\uc6d0\uac00\uc785&\ub85c\uadf8\uc778 \uc2dc\ud0a8\ub2e4.\\n> - \ub85c\uadf8\uc778 \uc774\ud6c4 \ubc1c\uae09\ub41c \uc778\uc99d \uc815\ubcf4(session \ud639\uc740 token)\uc744 Header, Cookie, Body \ub4f1\uc5d0 \ub2f4\uc5d0 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0 \ubc18\ud658\ud55c\ub2e4.\\n\\n<br />\\n\\n\uc704 \ubc29\ubc95\uc740 Redirect URI\ub97c \ubc31\uc5d4\ub4dc\ub85c \uc124\uc815\ud588\uc744 \ub54c\uc758 \ub2e8\uc810\uc744 \ubaa8\ub450 \ud574\uacb0\ud569\ub2c8\ub2e4.\\n\\n\uc989 \uc774 \ubc29\ubc95\uc758 \ud2b9\uc9d5\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n- \uc778\uc99d \uc815\ubcf4(\ud1a0\ud070, \uc138\uc158)\uc744 \uc5ec\ub7ec \ubc29\ubc95(Query String, Header, Body)\uc73c\ub85c \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.\\n- \uc548\ub4dc\ub85c\uc774\ub4dc\uc640 \uac19\uc774 Redirect \ud560 \uc218 \uc5c6\ub294 \ubaa8\ubc14\uc77c \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.\\n\\n\uc774\uc81c\ubd80\ud130 \ud574\ub2f9 \ubc29\ubc95\uc744 \ud1b5\ud574 \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud574 \ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc81c\uc77c \uc26c\uc6b4 \uce74\uce74\uc624\ubd80\ud130 \uc2dc\uc791\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uce74\uce74\uc624 Developers\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub4f1\ub85d\\n\\nKakao Developers([https://developers.kakao.com/](https://developers.kakao.com/))\uc5d0 \uc811\uc18d\ud569\ub2c8\ub2e4.\\n\\n![kakao1](./kakao1.png)\\n\\n**\ub0b4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158**\uc744 \ud074\ub9ad\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao2](./kakao2.png)\\n\\n**\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucd94\uac00\ud558\uae30**\ub97c \ud074\ub9ad\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao3](./kakao3.png)\\n\\n**\uc571 \uc774\ub984**\uacfc **\uc0ac\uc5c5\uc790\uba85**\uc744 \uc785\ub825\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao4](./kakao4.png)\\n\\n**\uc571 \uc124\uc815** - **\uc694\uc57d \uc815\ubcf4** \ud654\uba74\uc5d0 \ubcf4\uc774\ub294 **REST API** **\ud0a4** \ub97c \uc5b4\ub514\uc5d4\uac00 \uc801\uc5b4\ub450\uc138\uc694!\\n\\n\ud574\ub2f9 \ud0a4\ub97c **client_id**\ub77c\uace0 \ubd80\ub985\ub2c8\ub2e4.\\n\\n\uc800\ub294 \uc774\uc81c\ubd80\ud130 \uc774\ub97c **mallang-kakao-client-id** \ub85c \uac00\uc815\ud558\uace0 \uc9c4\ud589\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n(\uc0dd\uac01\ud574\ubcf4\ub2c8 \uc5b4\ucc28\ud53c \ub178\ucd9c\ub418\ub294 \uac12\uc774\ub77c \uad73\uc774 \uac00\ub9b4 \ud544\uc694\ub294 \uc5c6\uc5c8\ub124\uc6a9..)\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao5](./kakao5.png)\\n\\n**\uc81c\ud488 \uc124\uc815** - **\uce74\uce74\uc624 \ub85c\uadf8\uc778**\uc73c\ub85c \uc774\ub3d9\ud558\uc5ec **\ud65c\uc131\ud654 \uc0c1\ud0dc**\ub97c OFF \uc5d0\uc11c **ON**\uc73c\ub85c \ubc14\uafd4\uc90d\ub2c8\ub2e4.\\n\\n\uc774\ud6c4 **Redirect URI \ub4f1\ub85d** \ubc84\ud2bc\uc744 \ud074\ub9ad\ud574\uc8fc\uc138\uc694.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao6](./kakao6.png)\\n\\nRedirect URI\ub97c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c \uc124\uc815\ud560 \uac83\uc774\ubbc0\ub85c, auth code\ub97c \ud1b5\ud574 \ubc31\uc5d4\ub4dc\ub85c \ub85c\uadf8\uc778 \uc694\uccad\uc744 \ubcf4\ub0bc **\ud504\ub860\ud2b8\uc5d4\ub4dc**\uc758 **URI**\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.\\n\\n\uadf8\ub0e5 \uc800 \ub530\ub77c **http://localhost:3000/oauth/redirected/kakao** \ub97c \uc124\uc815\ud558\ub294 \uac83\uc774, \uc55e\uc73c\ub85c \ucf54\ub4dc \uc9c4\ud589\uc744 \ub530\ub77c\uc624\ub294 \uac83\uc5d0 \uc788\uc5b4\uc11c \uc81c\uc77c \uc27d\uae30 \ub54c\ubb38\uc5d0, \uc77c\ub2e8 \ub530\ub77c \ud558\uc2dc\ub294 \uac83\uc744 \ucd94\ucc9c\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao7](./kakao7.png)\\n\\n**\uce74\uce74\uc624 \ub85c\uadf8\uc778** - **\ubcf4\uc548**\uc73c\ub85c \uc774\ub3d9\ud558\uc5ec **Client Secret**\uc744 \uc0dd\uc131\ud574\uc90d\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao8](./kakao8.png)\\n\\n\uc0dd\uc131\ub41c **Client Secret**\uc744 \uc5b4\ub518\uac00\uc5d0 \uc798 \uc801\uc5b4 \ub450\uc2dc\uace0, **\ud65c\uc131\ud654 \uc0c1\ud0dc**\ub97c \uc0ac\uc6a9\uc548\ud568\uc5d0\uc11c **\uc0ac\uc6a9\ud568**\uc73c\ub85c \ubcc0\uacbd\ud574\uc8fc\uc138\uc694.\\n\\n\uc800\ub294 \uc774\uc81c\ubd80\ud130 \uc774\ub97c **mallang-kakao-secret-key** \ub85c \ubd80\ub974\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao9](./kakao9.png)\\n\\n**\uce74\uce74\uc624 \ub85c\uadf8\uc778** - **\ub3d9\uc758\ud56d\ubaa9**\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\n\\n\uc774\uacf3\uc5d0\uc11c\ub294 \uc0ac\uc6a9\ud560 \uc0ac\uc6a9\uc790\uc758 \uc815\ubcf4\ub97c \uc124\uc815\ud574\uc8fc\uba74 \ub418\ub294\ub370\uc694, \uc774\ubc88 \uc2e4\uc2b5\uc5d0\uc11c\ub294 **\ub2c9\ub124\uc784**(profile_nickname)\uacfc **\ud504\ub85c\ud544 \uc0ac\uc9c4**(profile_image)\ub9cc\uc744 \uc124\uc815\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n![kakao10](./kakao10.png)\\n\\n\uc704\uc640 \uac19\uc774 **\ud544\uc218 \ub3d9\uc758**\ub97c \ud074\ub9ad\ud55c \ub4a4 \uc800\uc7a5\ud574\uc8fc\uc138\uc694.\\n\\n\uc5ec\uae30\uae4c\uc9c0 \ud558\uba74 \uae30\ubcf8\uc801\uc778 \uc124\uc815\uc774 \ub05d\ub0ac\uace0, \uc5ec\uae30\uc11c \uc0dd\uc131\ud55c \uc815\ubcf4\ub4e4\uc744 \uc815\ub9ac\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> REST API \ud0a4(client_id) : mallang-kakao-client-id<br/>\\n> Client Secret : mallang-kakao-secret-key<br/>\\n> Redirect URI : http://localhost:3000/oauth/redirected/kakao<br/>\\n> \ub3d9\uc758 \ud56d\ubaa9 : \ub2c9\ub124\uc784(profile_nickname), \ud504\ub85c\ud544 \uc0ac\uc9c4(profile_image)\\n\\n\uc774\uc81c \ud504\ub860\ud2b8\uc5d4\ub4dc \ucf54\ub4dc\ub97c \uc791\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \ud504\ub860\ud2b8\uc5d4\ub4dc \ucf54\ub4dc \uc791\uc131 (React)\\n\\n\ud30c\uc77c\uc740 index.js, App.js, KakaoRedirectPage.js, LoginPage.js 4\uac1c\uc785\ub2c8\ub2e4.\\n\\n\ud504\ub860\ud2b8\uc5d4\ub4dc \ud328\ud0a4\uc9c0\ub97c \uc5b4\ub5bb\uac8c \ub098\ub220\uc57c \ud560 \uc9c0 \ubab0\ub77c\uc11c \uadf8\ub0e5 \ud558\ub098\uc5d0 \ub54c\ub824\ubc15\uc558\uc2b5\ub2c8\ub2e4.\\n\\n![code1](./code1.png)\\n\\n<br />\\n<br />\\n<br />\\n\\n### index.js\\n\\n```js\\nimport React from \\"react\\";\\nimport ReactDOM from \\"react-dom/client\\";\\nimport App from \\"./App\\";\\n\\nconst root = ReactDOM.createRoot(document.getElementById(\\"root\\"));\\nroot.render(<App />);\\n```\\n\\n\uc774\uac74 \uba54\uc778 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### App.js\\n\\n```js\\nimport { BrowserRouter, Routes, Route } from \\"react-router-dom\\";\\nimport LoginPage from \\"./LoginPage\\";\\nimport KakaoRedirectPage from \\"./KakaoRedirectPage\\";\\n\\nconst App = () => {\\n  return (\\n    <div className=\\"App\\">\\n      <BrowserRouter>\\n        <Routes>\\n          <Route path=\\"/\\" element={<LoginPage />}></Route>\\n          <Route\\n            path=\\"/oauth/redirected/kakao\\"\\n            element={<KakaoRedirectPage />}\\n          ></Route>\\n        </Routes>\\n      </BrowserRouter>\\n    </div>\\n  );\\n};\\n\\nexport default App;\\n```\\n\\n\ub77c\uc6b0\ud130\ub97c \ud1b5\ud574\uc11c /\ub85c \ub4e4\uc5b4\uc624\ub294 \uc694\uccad\uc740 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \ubcf4\uc5ec\uc8fc\uace0,\\n\\n**/oauth/redirected/kakao**\ub85c \ub4e4\uc5b4\uc624\ub294 \uc694\uccad\uc740 KakaoRedirectPage\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.\\n\\n\uc774\ub54c **/oauth/redirected/kakao** \ub294 \uce74\uce74\uc624 \ub85c\uadf8\uc778 API\uc5d0 **Redirect URI**\ub85c \uc124\uc815\ud55c URI\uc785\ub2c8\ub2e4.\\n\\n(\uc800\ub294 Redirect URI\ub97c http://localhost:3000**/oauth/**redirected**/kakao**\ub85c \uc124\uc815\ud588\uc5c8\uc2b5\ub2c8\ub2e4.)\\n\\n<br />\\n<br />\\n<br />\\n\\n### LoginPage.js\\n\\n```js\\nimport React from \\"react\\";\\n\\nconst LoginPage = () => {\\n  const handleButtonClick = () => {\\n    window.location.href = \\"http://localhost:8080/oauth/kakao\\";\\n  };\\n\\n  return (\\n    <div\\n      style={{\\n        display: \\"flex\\",\\n        justifyContent: \\"center\\",\\n        alignItems: \\"center\\",\\n        height: \\"100vh\\",\\n      }}\\n    >\\n      <button\\n        onClick={handleButtonClick}\\n        style={{\\n          padding: \\"10px 20px\\",\\n          fontSize: \\"18px\\",\\n          borderRadius: \\"5px\\",\\n          cursor: \\"pointer\\",\\n        }}\\n      >\\n        \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778\\n      </button>\\n    </div>\\n  );\\n};\\n\\nexport default LoginPage;\\n```\\n\\n\uadf8\ub0e5 \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 \ubc84\ud2bc \ud558\ub098 \uc788\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4.\\n\\n\ub85c\uadf8\uc778 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 http://localhost:8080**/oauth/kakao**\ub85c \uc774\ub3d9\ud558\uac8c \ub418\ub294\ub370\uc694, \uc774\ub294 \ubc31\uc5d4\ub4dc\uc5d0\uc11c \ucc98\ub9ac\ud558\uba70 cliend_id, redirect_uri \ub4f1\uc744 \ud3ec\ud568\ud558\uc5ec **\uce74\uce74\uc624 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub85c Redirect** \uc2dc\ucf1c\uc90d\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### KakaoRedirectPage.js\\n\\n```js\\nimport React, { useEffect } from \\"react\\";\\nimport { useLocation, useNavigate } from \\"react-router-dom\\";\\nimport axios from \\"axios\\";\\n\\nconst KakaoRedirectPage = () => {\\n  const location = useLocation();\\n  const navigate = useNavigate();\\n\\n  const handleOAuthKakao = async (code) => {\\n    try {\\n      // \uce74\uce74\uc624\ub85c\ubd80\ud130 \ubc1b\uc544\uc628 code\ub97c \uc11c\ubc84\uc5d0 \uc804\ub2ec\ud558\uc5ec \uce74\uce74\uc624\ub85c \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\ud55c\ub2e4\\n      const response = await axios.get(\\n        `http://localhost:8080/oauth/login/kakao?code=${code}`\\n      );\\n      const data = response.data; // \uc751\ub2f5 \ub370\uc774\ud130\\n      alert(\\"\ub85c\uadf8\uc778 \uc131\uacf5: \\" + data);\\n      navigate(\\"/success\\");\\n    } catch (error) {\\n      navigate(\\"/fail\\");\\n    }\\n  };\\n\\n  useEffect(() => {\\n    const searchParams = new URLSearchParams(location.search);\\n    const code = searchParams.get(\\"code\\"); // \uce74\uce74\uc624\ub294 Redirect \uc2dc\ud0a4\uba74\uc11c code\ub97c \ucffc\ub9ac \uc2a4\ud2b8\ub9c1\uc73c\ub85c \uc900\ub2e4.\\n    if (code) {\\n      alert(\\"CODE = \\" + code);\\n      handleOAuthKakao(code);\\n    }\\n  }, [location]);\\n\\n  return (\\n    <div>\\n      <div>Processing...</div>\\n    </div>\\n  );\\n};\\n\\nexport default KakaoRedirectPage;\\n```\\n\\n\ud574\ub2f9 \ud398\uc774\uc9c0\ub294 App.js\uc5d0 \uc758\ud574 **/oauth/redirected/kakao**\ub85c \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74 \ubcf4\uc5ec\uc9c8 \ud654\uba74\uc785\ub2c8\ub2e4.\\n\\n\ud574\ub2f9 \ud654\uba74\uc740 \ubcf4\uc5ec\uc9c0\uc790\ub9c8\uc790 http://localhost:8080/oauth/login/kakao\ub85c \uc694\uccad\uc744 \ubcf4\ub0c5\ub2c8\ub2e4.\\n\\n\uc774\ub294 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uc5d0 \uc758\ud574 \ub9ac\ub2e4\uc774\ub809\ud2b8\ub418\ub294 \ud398\uc774\uc9c0\ub85c, \ub9ac\ub2e4\uc774\ub809\ud2b8 \ub418\ub294 \ub3d9\uc2dc\uc5d0 \ucffc\ub9ac \ud30c\ub77c\ubbf8\ud130\ub85c **code**\uac00 \ud568\uaed8 \uc804\ub2ec\ub418\ub294\ub370\uc694, \uc774\ub97c \ucd94\ucd9c\ud558\uc5ec \ubc31\uc5d4\ub4dc \uc11c\ubc84\uc5d0 \ud568\uaed8 \uc804\ub2ec\ud569\ub2c8\ub2e4.\\n\\n\uc6d0\ub798\ub294 AccessToken\ub4f1\uc744 \ubc31\uc5d4\ub4dc \uc11c\ubc84\ub85c\ubd80\ud130 \ubc1b\uaca0\uc9c0\ub9cc, \uc5ec\uae30\uc11c\ub294 \ucf54\ub4dc\uac00 \ub108\ubb34 \uae38\uc5b4\uc9c0\uae30\ub54c\ubb38\uc5d0 \ub2e8\uc21c Id\ub97c \ubc18\ud658\ud558\ub294 \uac83\uc73c\ub85c \ud0c0\ud611\ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uad6c\uccb4\uc801\uc778 \ub3d9\uc791 \uacfc\uc815\uc740 \ubc31\uc5d4\ub4dc \ucf54\ub4dc\uae4c\uc9c0 \uc791\uc131\ud55c \ub4a4 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \ubc31\uc5d4\ub4dc \ucf54\ub4dc \uc791\uc131 (Spring)\\n\\n\ucd08\uae30 \uc124\uc815\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n![code2](./code2.png)\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 build.gradle\\n\\n```groovy\\nplugins {\\n    id \'java\'\\n    id \'org.springframework.boot\' version \'3.1.2\'\\n    id \'io.spring.dependency-management\' version \'1.1.2\'\\n}\\n\\ngroup = \'mallang\'\\nversion = \'0.0.1-SNAPSHOT\'\\n\\njava {\\n    sourceCompatibility = \'17\'\\n}\\n\\nconfigurations {\\n    compileOnly {\\n        extendsFrom annotationProcessor\\n    }\\n}\\n\\nrepositories {\\n    mavenCentral()\\n}\\n\\ndependencies {\\n    implementation \'org.springframework.boot:spring-boot-starter-data-jpa\'\\n    implementation \'org.springframework.boot:spring-boot-starter-web\'\\n\\n    // Http Interface\\n    implementation \'org.springframework.boot:spring-boot-starter-webflux\'\\n\\n    compileOnly \'org.projectlombok:lombok\'\\n\\n    runtimeOnly \'com.h2database:h2\'\\n\\n    // FOR @ConfigurationProperties\\n    annotationProcessor \\"org.springframework.boot:spring-boot-configuration-processor\\"\\n\\n    annotationProcessor \'org.projectlombok:lombok\'\\n\\n    testImplementation \'org.springframework.boot:spring-boot-starter-test\'\\n    testImplementation \'io.rest-assured:rest-assured:5.3.0\'\\n}\\n\\ntasks.named(\'test\') {\\n    useJUnitPlatform()\\n}\\n\\n// FOR @ConfigurationProperties\\ntasks.named(\'compileJava\') {\\n    inputs.files(tasks.named(\'processResources\'))\\n}\\n```\\n\\n\ubcc4\ub2e4\ub978 \uc124\uba85 \uc5c6\uc774 \ub118\uc5b4\uac00\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 application.yml\\n\\n```yml\\nlogging:\\n  level:\\n    org.hibernate.orm.jdbc.bind: TRACE\\n\\nspring:\\n  jpa:\\n    show-sql: true\\n    properties:\\n      hibernate:\\n        format_sql: true\\n        use_sql_comments: true\\n        highlight_sql: true\\n\\n    hibernate:\\n      ddl-auto: create\\n```\\n\\n\uc774\uac83\ub3c4 \ubcc4\ub2e4\ub978 \uc124\uba85 \uc5c6\uc774 \ub118\uc5b4\uac00\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\ub300\uccb4\ub85c \ub85c\uadf8\ub97c \ub0a8\uae30\uae30 \uc704\ud55c \uc124\uc815\uc785\ub2c8\ub2e4.\\n\\n\ucd08\uae30 \uc124\uc815\uc740 \ub05d\ub0ac\uace0, \uc774\uc81c\ubd80\ud130 \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uac83\uc778\ub370\uc694, \ucc98\uc74c\uc5d0\ub294 \uac04\ub2e8\ud788 \uad6c\ud604\ud55c \ub4a4 \ub9ac\ud329\ud1a0\ub9c1 \ud558\ub294 \uacfc\uc815\uc744 \ubcf4\uc5ec\ub4dc\ub9b4\uae4c \uc2f6\uc5c8\uc9c0\ub9cc \ub108\ubb34 \ub8e8\uc988\ud574\uc9c8 \uc218 \uc788\uc744 \uac83 \uac19\uc544\uc11c, \uc870\uae08 \ubcf5\uc7a1\ud558\ub354\ub77c\ub3c4 \ucd5c\uc885 \ud615\ud0dc\uc758 \ucf54\ub4dc\ub97c \ubcf4\uc5ec\ub4dc\ub9ac\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \uad6c\ud604 \uc21c\uc11c\\n\\n\uad6c\ud604 \uc21c\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> 1\\\\. \uc0ac\uc6a9\uc790\uac00 \ud504\ub860\ud2b8\uc5d4\ub4dc\ub97c \ud1b5\ud574 http://localhost:8080**/oauth/kakao**\ub85c \uc811\uc18d\ud558\uba74 \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 \ud654\uba74\uc73c\ub85c Redirect \uc2dc\ud0a4\ub294 \uacfc\uc815\uc744 \uad6c\ud604\ud55c\ub2e4.\\n>\\n> \uc0ac\uc6a9\uc790\uac00 \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 & \uc815\ubcf4 \uc81c\uacf5 \ub3d9\uc758\ub97c \uc9c4\ud589\ud55c \uc774\ud6c4 \uce74\uce74\uc624\ud1a1 \uc778\uc99d \uc11c\ubc84\uc5d0\uc11c \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c Auth Code\ub97c \ud3ec\ud568\ud558\uc5ec Redirect \uc2dc\ud0a8\ub2e4.\\n>\\n> \ud504\ub860\ud2b8\uc5d4\ub4dc\ub294 Redirect \ub418\ub294 \uc21c\uac04 Auth Code\ub97c \uaebc\ub0b4\uc11c http://localhost:8080**/oauth/login/kakao**?**code={\ubc1b\uc740 Auth Code}**\ub85c POST \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4.\\n>\\n> 2\\\\. /oauth/login/**kakao**\ub85c auth code\uc640 \ud568\uaed8 POST \uc694\uccad\uc774 \ub3c4\ucc29\ud558\uba74 \ubc31\uc5d4\ub4dc\ub294 \ubc1b\uc740\xa0**auth code**\uc640 \ud568\uaed8 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uc5d0 **AccessToken**\uc744 \uc694\uccad\ud558\uc5ec \ubc1c\uae09\ubc1b\ub294\ub2e4.\\n>\\n> 3\\\\. \ubc1b\uc544\uc628 AccessToken\uc744 \uac00\uc9c0\uace0 \uce74\uce74\uc624\uc5d0 \ub4f1\ub85d\ub41c \ud68c\uc6d0 \uc815\ubcf4(\ub2c9\ub124\uc784, \ud504\ub85c\ud544 \uc0ac\uc9c4)\ub97c \uc870\ud68c\ud55c\ub2e4.\\n>\\n> 4\\\\. \ubc1b\uc544\uc628 \uc815\ubcf4\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud55c\ub2e4. \uc774\ub54c \ud68c\uc6d0\uac00\uc785 \ub418\uc5b4\uc788\uc9c0 \uc54a\ub2e4\uba74 \ud68c\uc6d0\uac00\uc785\ub3c4 \ud568\uaed8 \uc9c4\ud589\ud55c\ub2e4.\\n>\\n> 5\\\\. /oauth/login/kakao\ub85c \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74 2~4\uc758 \uacfc\uc815\uc744 \ud1b5\ud574 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud55c \ub4a4, AccessToken(\uc598\ub294 \ubc31\uc5d4\ub4dc\uac00 \uc778\uc99d\uc744 \uc704\ud574 \ubc1c\uae09\ud574\uc8fc\ub294\uc560)\uc744 \uc0dd\uc131\ud558\uace0, \uc774\ub97c \uba54\uc138\uc9c0 \ubcf8\ubb38\uc5d0 \ub2f4\ub294\ub2e4.\\n\\n\uc704 \uacfc\uc815\uc744 \uc9c4\ud589\ud558\uba70 \ud655\uc7a5\uc5d0 \uc720\uc5f0\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uace0, \uc774\ud6c4 Naver\ub3c4 \ucd94\uac00\ud574\ubcf4\uba70 \uc5bc\ub9c8\ub098 \uac04\ub2e8\ud558\uac8c \ucd94\uac00\ud560 \uc218 \uc788\ub294\uc9c0\ub97c \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ucd5c\uc885 \uad6c\uc870 \ubbf8\ub9ac \uc0b4\ud3b4\ubcf4\uae30\\n\\n![code3](./code3.png)\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 1. /oauth/kakao\uc73c\ub85c \uc811\uc18d\ud558\uba74 \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 \ud654\uba74\uc73c\ub85c Redirect \uc2dc\ud0a8\ub2e4.\\n\\n### \u2728 OauthServerType\\n\\n```java\\npackage mallang.oauth.domain;\\n\\nimport static java.util.Locale.ENGLISH;\\n\\npublic enum OauthServerType {\\n\\n    KAKAO,\\n    ;\\n\\n    public static OauthServerType fromName(String type) {\\n        return OauthServerType.valueOf(type.toUpperCase(ENGLISH));\\n    }\\n}\\n```\\n\\n\uc774\ub294 \uce74\uce74\uc624, \uad6c\uae00, \ub124\uc774\ubc84 \ub4f1 Oauth2.0 \uc778\uc99d\uc744 \uc81c\uacf5\ud558\ub294 \uc11c\ubc84\uc758 \uc885\ub958\ub97c \uba85\uc2dc\ud560 Enum\uc785\ub2c8\ub2e4.\\n\\n\\"**kakao**\\"\ub97c \ud1b5\ud574 OauthServerType.**KAKAO**\ub97c \ucc3e\uc544\uc624\uae30 \uc704\ud574 fromName() \uc774\ub77c\ub294 \uba54\uc11c\ub4dc\ub97c \uad6c\ud604\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c OauthServerType\ubcc4\ub85c \ud574\ub2f9 \uc11c\ube44\uc2a4\uc758 Auth Code\ub97c \ubc1b\uc544\uc624\ub294 URL\uc744 \uc0dd\uc131\ud574\uc8fc\ub294 \uae30\ub2a5\uc744 \uc791\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 AuthCodeRequestUrlProvider\\n\\n```java\\npackage mallang.oauth.domain.authcode;\\n\\nimport mallang.oauth.domain.OauthServerType;\\n\\npublic interface AuthCodeRequestUrlProvider {\\n\\n    OauthServerType supportServer();\\n\\n    String provide();\\n}\\n```\\n\\n\uc774\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub85c, AuthCode\ub97c \ubc1c\uae09\ud560 URL\uc744 \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.\\n\\nsupportServer()\ub294 \uc790\uc2e0\uc774 \uc5b4\ub5a4 OauthServerType\ub97c \uc9c0\uc6d0\ud560 \uc218 \uc788\ub294\uc9c0\ub97c \ub098\ud0c0\ud569\ub2c8\ub2e4.\\n\\n\uc608\ub97c \ub4e4\uc5b4 KakaoAuthCodeRequestUrlProvider\ub294 OauthServerType\uc73c\ub85c KAKAO\ub97c \ubc18\ud658\ud560 \uac83\uc785\ub2c8\ub2e4.\\n\\nprovide()\ub97c \ud1b5\ud574 URL\uc744 \uc0dd\uc131\ud558\uc5ec \ubc18\ud658\ud558\uba70, \ud574\ub2f9 \uc8fc\uc18c\ub85c Redirect \ud55c\ub2e4\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ud654\uba74\uc774 \ub098\uc635\ub2c8\ub2e4.\\n\\n![kakao sample](./kakao_sample1.png)\\n\\n\uadf8\ub9ac\uace0 \uc9c0\uae08\uc740 Kakao \ubfd0\uc774\uc9c0\ub9cc, \uc774\ud6c4 Naver \ub4f1 \ub2e4\ub978 \uc11c\ube44\uc2a4\ub3c4 \ucd94\uac00\ud560 \uac83\uc774\uae30 \ub54c\ubb38\uc5d0 \ud574\ub2f9 \uae30\ub2a5\uc744 \uc778\ud130\ud398\uc774\uc2a4\ub85c \ucd94\uc0c1\ud654\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\nKakao\uc5d0\uc11c Auth Code\ub97c \ubc1b\uc544\uc624\uae30 \uc704\ud55c API\ub294 \ub2e4\uc74c \ub9c1\ud06c([https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-code](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-code))\uc5d0 \ub098\uc640\uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n![kakao api1](./kakao_api1.png)\\n![kakao api2](./kakao_api2.png)\\n\\n\uc544\ub798\uc758 \uc800\ud76c\uac00 \uc124\uc815\ud55c \uc815\ubcf4\ub97c \uae30\uc900\uc73c\ub85c,\\n\\n> REST API \ud0a4(client_id) : mallang-kakao-client-id<br/>\\n> Client Secret : mallang-kakao-secret-key<br/>\\n> Redirect URI : http://localhost:3000/oauth/redirected/kakao<br/>\\n> \ub3d9\uc758 \ud56d\ubaa9 : \ub2c9\ub124\uc784(profile_nickname), \ud504\ub85c\ud544 \uc0ac\uc9c4(profile_image)\\n\\n<br />\\n\\n\ud544\uc218\uac12\ub9cc \uc0ac\uc6a9\ud55c\ub2e4\uace0 \uac00\uc815\ud588\uc744 \ub54c, \ub2e4\uc74c\uacfc \uac19\uc740 URL\ub85c \uc694\uccad\uc744 \ubcf4\ub0b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n> https://kauth.kakao.com/oauth/authorize<br/>\\n> ?response_type=code<br/>\\n> &client_id=mallang-kakao-client-id<br/>\\n> &redirect_uri=http://localhost:3000/oauth/redirected/kakao<br/>\\n> &scope=profile_nickname,profile_image\\n\\n<br />\\n\\n\uc774\uc5d0 \ub9de\uac8c \uad6c\ud604\ud55c \uad6c\ud604\uccb4\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoAuthCodeRequestUrlProvider\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao.authcode;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.authcode.AuthCodeRequestUrlProvider;\\nimport mallang.oauth.infra.oauth.kakao.KakaoOauthConfig;\\nimport org.springframework.stereotype.Component;\\nimport org.springframework.web.util.UriComponentsBuilder;\\n\\n@Component\\n@RequiredArgsConstructor\\npublic class KakaoAuthCodeRequestUrlProvider implements AuthCodeRequestUrlProvider {\\n\\n    private final KakaoOauthConfig kakaoOauthConfig;\\n\\n    @Override\\n    public OauthServerType supportServer() {\\n        return OauthServerType.KAKAO;\\n    }\\n\\n    @Override\\n    public String provide() {\\n        return UriComponentsBuilder\\n                .fromUriString(\\"https://kauth.kakao.com/oauth/authorize\\")\\n                .queryParam(\\"response_type\\", \\"code\\")\\n                .queryParam(\\"client_id\\", kakaoOauthConfig.clientId())\\n                .queryParam(\\"redirect_uri\\", kakaoOauthConfig.redirectUri())\\n                .queryParam(\\"scope\\", String.join(\\",\\", kakaoOauthConfig.scope()))\\n                .toUriString();\\n    }\\n}\\n```\\n\\n<br />\\n\\n\uc774\ub54c KakaoOauthConfig\ub294 \uc800\uc758\uac00 \uc124\uc815\ud55c \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 \ud074\ub798\uc2a4\ub85c, \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n### \u2728 KakaoOauthConfig\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao;\\n\\nimport org.springframework.boot.context.properties.ConfigurationProperties;\\n\\n@ConfigurationProperties(prefix = \\"oauth.kakao\\")\\npublic record KakaoOauthConfig(\\n        String redirectUri,\\n        String clientId,\\n        String clientSecret,\\n        String[] scope\\n) {\\n}\\n```\\n\\n**application.yml**\uc5d0 **oauth.kakao**\ub85c \uc124\uc815\ub41c \uc815\ubcf4\ub4e4\uc744 \ud1b5\ud574 \uc0dd\uc131\ub429\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 application.yml \uc218\uc815\\n\\n\uc774\uc81c application.yml \ud30c\uc77c\uc744 \uc544\ub798\uc640 \uac19\uc774 \uc218\uc815\ud569\ub2c8\ub2e4.\\n\\n```yml\\nlogging:\\n  level:\\n    org.hibernate.orm.jdbc.bind: TRACE\\n\\nspring:\\n  jpa:\\n    show-sql: true\\n    properties:\\n      hibernate:\\n        format_sql: true\\n        use_sql_comments: true\\n        highlight_sql: true\\n\\n    hibernate:\\n      ddl-auto: create\\n\\n# \ucd94\uac00\\noauth:\\n  kakao:\\n    client_id: mallang-kakao-client-id # REST API \ud0a4\\n    redirect_uri: http://localhost:3000/oauth/redirected/kakao\\n    client_secret: mallang-kakao-secret-key # Client Secret \ud0a4\\n    scope: profile_nickname, profile_image\\n```\\n\\n\uadf8\ub9ac\uace0 @ConfigurationProperties\ub97c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 @ConfigurationPropertiesScan\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthApplication \uc218\uc815\\n\\n```java\\npackage mallang.oauth;\\n\\nimport org.springframework.boot.SpringApplication;\\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\\nimport org.springframework.boot.context.properties.ConfigurationPropertiesScan;\\n\\n@SpringBootApplication\\n@ConfigurationPropertiesScan\\npublic class OauthApplication {\\n\\n    public static void main(String[] args) {\\n        SpringApplication.run(OauthApplication.class, args);\\n    }\\n\\n}\\n```\\n\\n\uc774\uc81c \uc774\ub97c \uc0ac\uc6a9\ud574\uc57c\uaca0\uc8e0?\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 AuthCodeRequestUrlProviderComposite\\n\\n```java\\npackage mallang.oauth.domain.authcode;\\n\\nimport static java.util.function.Function.identity;\\nimport static java.util.stream.Collectors.toMap;\\n\\nimport java.util.Map;\\nimport java.util.Optional;\\nimport java.util.Set;\\nimport mallang.oauth.domain.OauthServerType;\\nimport org.springframework.stereotype.Component;\\n\\n@Component\\npublic class AuthCodeRequestUrlProviderComposite {\\n\\n    private final Map<OauthServerType, AuthCodeRequestUrlProvider> mapping;\\n\\n    public AuthCodeRequestUrlProviderComposite(Set<AuthCodeRequestUrlProvider> providers) {\\n        mapping = providers.stream()\\n                .collect(toMap(\\n                        AuthCodeRequestUrlProvider::supportServer,\\n                        identity()\\n                ));\\n    }\\n\\n    public String provide(OauthServerType oauthServerType) {\\n        return getProvider(oauthServerType).provide();\\n    }\\n\\n    public AuthCodeRequestUrlProvider getProvider(OauthServerType oauthServerType) {\\n        return Optional.ofNullable(mapping.get(oauthServerType))\\n                .orElseThrow(() -> new RuntimeException(\\"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc18c\uc15c \ub85c\uadf8\uc778 \ud0c0\uc785\uc785\ub2c8\ub2e4.\\"));\\n    }\\n}\\n```\\n\\nComposite \ud328\ud134\uc744 \uc870\uae08 \ubcc0\ud615\ud558\uc5ec OauthServerType\uc758 \uc885\ub958\uc5d0 \ub530\ub77c, \uc774\uc5d0 \ud574\ub2f9\ud558\ub294 AuthCodeRequestUrlProvier\ub97c \uc0ac\uc6a9\ud558\uc5ec URL\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\ub3c4\ub85d \uc704 \ud074\ub798\uc2a4\ub97c \uc791\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub97c \uc704\ud574 supportServer()\ub77c\ub294 \uba54\uc11c\ub4dc\ub97c \uad6c\ud604\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub97c \ud1b5\ud574 Naver \ub85c\uadf8\uc778 \ub4f1\uc744 \ucd94\uac00\ud560 \ub54c, \uae30\uc874 \ucf54\ub4dc\uc758 \ubcc0\uacbd \uc5c6\uc774 \uc0c8\ub85c \ucd94\uac00\ub41c \ud0c0\uc785\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4.\\n\\n\uc774\uc81c \uc774\ub97c \uc0ac\uc6a9\ud558\uc5ec URL\uc744 \uc2e4\uc81c\ub85c \ub9cc\ub4e4\uc5b4\ub0b4\ub294 Service \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthService\\n\\n```java\\npackage mallang.oauth.application;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.authcode.AuthCodeRequestUrlProviderComposite;\\nimport org.springframework.stereotype.Service;\\n\\n@Service\\n@RequiredArgsConstructor\\npublic class OauthService {\\n\\n    private final AuthCodeRequestUrlProviderComposite authCodeRequestUrlProviderComposite;\\n\\n    public String getAuthCodeRequestUrl(OauthServerType oauthServerType) {\\n        return authCodeRequestUrlProviderComposite.provide(oauthServerType);\\n    }\\n}\\n```\\n\\nOauthServerType\uc744 \ubc1b\uc544\uc11c \ud574\ub2f9 \uc778\uc99d \uc11c\ubc84\uc5d0\uc11c Auth Code\ub97c \ubc1b\uc544\uc624\uae30 \uc704\ud55c URL \uc8fc\uc18c\ub97c \uc0dd\uc131\ud574\uc90d\ub2c8\ub2e4.\\n\\n\uc774\ub97c \uc0ac\uc6a9\ud558\ub294 Controller \ucf54\ub4dc\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthController\\n\\n```java\\npackage mallang.oauth.presentation;\\n\\nimport jakarta.servlet.http.HttpServletResponse;\\nimport lombok.RequiredArgsConstructor;\\nimport lombok.SneakyThrows;\\nimport mallang.oauth.application.OauthService;\\nimport mallang.oauth.domain.OauthServerType;\\nimport org.springframework.http.ResponseEntity;\\nimport org.springframework.web.bind.annotation.GetMapping;\\nimport org.springframework.web.bind.annotation.PathVariable;\\nimport org.springframework.web.bind.annotation.RequestMapping;\\nimport org.springframework.web.bind.annotation.RestController;\\n\\n@RequiredArgsConstructor\\n@RequestMapping(\\"/oauth\\")\\n@RestController\\npublic class OauthController {\\n\\n    private final OauthService oauthService;\\n\\n    @SneakyThrows\\n    @GetMapping(\\"/{oauthServerType}\\")\\n    ResponseEntity<Void> redirectAuthCodeRequestUrl(\\n            @PathVariable OauthServerType oauthServerType,\\n            HttpServletResponse response\\n    ) {\\n        String redirectUrl = oauthService.getAuthCodeRequestUrl(oauthServerType);\\n        response.sendRedirect(redirectUrl);\\n        return ResponseEntity.ok().build();\\n    }\\n}\\n```\\n\\n@PathVariable\uc744 \ud1b5\ud574 /oauth/**kakao** \ub4f1\uc758 \uc694\uccad\uc5d0\uc11c **kakao**\ub97c OauthServerType\ub85c \ubcc0\ud658\ud558\uc5ec \ubc1b\uc544\uc635\ub2c8\ub2e4.\\n\\n\uc774\ub294 Converter\ub97c \ub4f1\ub85d\ud574 \uc8fc\uc5b4\uc57c \ud558\ub294\ub370, \uc870\uae08 \ub4a4\uc5d0 \uc0b4\ud3b4\ubcf4\uace0 \uc77c\ub2e8 \ub85c\uc9c1\uc758 \ud750\ub984\uc744 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc0ac\uc6a9\uc790\uac00 \ud504\ub860\ud2b8\uc5d4\ub4dc\ub97c \ud1b5\ud574 /oauth/kakao\ub85c \uc811\uc18d\ud558\uba74 \uc704\uc758 \uba54\uc11c\ub4dc\uac00 \uc2e4\ud589\ub429\ub2c8\ub2e4.\\n\\n\uc774\ub54c kakao\ub294 OauthServerType.KAKAO\ub85c \ubcc0\ud658\ub420 \uac83\uc785\ub2c8\ub2e4.\\n\\n\uc774\uc81c \uc704\uc5d0\uc11c \uad6c\ud604\ud55c Service\ub97c \ud1b5\ud574 KAKAO\uc5d0\uc11c Auth Code\ub97c \ubc1b\uc544\uc624\uae30 \uc704\ud55c URL\uc744 \uc0dd\uc131\ud558\uace0,\\n\\n\uc5ec\uae30\uc11c \uc0dd\uc131\ub41c URL\ub85c \uc0ac\uc6a9\uc790\ub97c Redirect \uc2dc\ud0b5\ub2c8\ub2e4.\\n\\n\uc544\ub798 Converter \uad6c\ud604\uc744 \uc7a0\uae50 \uc0b4\ud3b4\ubcf4\uace0, \uc5ec\uae30\uae4c\uc9c0\uc758 \ub3d9\uc791\uc744 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthServerTypeConverter\\n\\n```java\\npackage mallang.oauth.presentation;\\n\\nimport mallang.oauth.domain.OauthServerType;\\nimport org.springframework.core.convert.converter.Converter;\\n\\npublic class OauthServerTypeConverter implements Converter<String, OauthServerType> {\\n\\n    @Override\\n    public OauthServerType convert(String source) {\\n        return OauthServerType.fromName(source);\\n    }\\n}\\n```\\n\\nString\uc744 OauthServerType\uc73c\ub85c \ubcc0\ud658\ud574\uc90d\ub2c8\ub2e4.\\n\\n\uadf8\ub9ac\uace0 \uc774\ub97c \uc801\uc6a9\ud558\uae30 \uc704\ud574\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 WebConfigurer\ub97c \uad6c\ud604\ud558\uc5ec \ucd94\uac00\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 WebConfig\\n\\n```java\\npackage mallang.oauth.common.config;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.presentation.OauthServerTypeConverter;\\nimport org.springframework.context.annotation.Configuration;\\nimport org.springframework.format.FormatterRegistry;\\nimport org.springframework.http.HttpMethod;\\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\\n\\n@Configuration\\n@RequiredArgsConstructor\\npublic class WebConfig implements WebMvcConfigurer {\\n\\n    @Override\\n    public void addCorsMappings(CorsRegistry registry) {\\n        registry.addMapping(\\"/**\\")\\n                .allowedOrigins(\\"http://localhost:3000\\")\\n                .allowedMethods(\\n                        HttpMethod.GET.name(),\\n                        HttpMethod.POST.name(),\\n                        HttpMethod.PUT.name(),\\n                        HttpMethod.DELETE.name(),\\n                        HttpMethod.PATCH.name()\\n                )\\n                .allowCredentials(true)\\n                .exposedHeaders(\\"*\\");\\n    }\\n\\n    @Override\\n    public void addFormatters(FormatterRegistry registry) {\\n        registry.addConverter(new OauthServerTypeConverter());\\n    }\\n}\\n```\\n\\nCORS \uc124\uc815\uae4c\uc9c0 \ubbf8\ub9ac \ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\ude0e \uc911\uac04 \uc810\uac80 - \ub3d9\uc791 \ud655\uc778\ud558\uae30\\n\\nreact\uc640 spring\uc744 \ubaa8\ub450 \uc2e4\ud589\ud569\ub2c8\ub2e4.\\n\\n> react\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud574\uc11c\ub294 npm install, npm install react-router-dom axios \ud55c \ubc88 \uc2e4\ud589 \uc774\ud6c4 npm start\ub97c \ud1b5\ud574 \uc2e4\ud589\uc2dc\ud0ac \uc218 \uc788\uc744 \uac83\uc785\ub2c8\ub2e4.\\n\\nhttp://localhost:3000\uc73c\ub85c \uc811\uc18d\ud569\ub2c8\ub2e4.\\n\\n![kakao_sample2](./kakao_sample2.png)\\n\\n\uc0ac\uc6a9\uc790\ub294 \uc704\uc640 \uac19\uc774 \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 \ubc84\ud2bc\uc744 \ubcf4\uace0, \ud074\ub9ad\ud560 \uac83\uc785\ub2c8\ub2e4.\\n\\n(\uc774\ub97c \ud074\ub9ad\ud558\uba74, \ubc31\uc5d4\ub4dc\uc5d0\uc11c Kakao \uc778\uc99d \uc11c\ubc84\uc5d0\uc11c Auth code\ub97c \uac00\uc838\uc624\uae30 \uc704\ud55c URL\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8 \uc2dc\ucf1c\uc90d\ub2c8\ub2e4.)\\n\\n<br />\\n<br />\\n\\n![kakao_sample3](./kakao_sample3.png)\\n\\n\ud074\ub9ad\ud558\uba74 \uc704\uc640 \uac19\uc740 \ud654\uba74\uc774 \ub098\uc635\ub2c8\ub2e4.\\n\\n\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uace0 \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![kakao_sample4](./kakao_sample4.png)\\n\\n\uc774\ub54c \ud604\uc7ac \uc0ac\uc774\ud2b8\uc758 URL\uc744 \uc0b4\ud3b4\ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> https://kauth.kakao.com/oauth/authorize?scope=profile\\\\_nickname%2Cprofile\\\\_image&response\\\\_type=code&redirect\\\\_uri=http%3A%2F%2Flocalhost%3A3000%2Foauth%2Fredirected%2Fkakao&through\\\\_account=true&client\\\\_id=\ube44\ubc00&additional\\\\_auth\\\\_login=true\\n\\n\uc774\ub97c [URL Decode](https://www.urldecoder.org/)\ub97c \ud1b5\ud574 \ub514\ucf54\ub529\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n> https://kauth.kakao.com/oauth/authorize\\n> ?scope=profile_nickname,profile_image\\n> &response_type=code\\n> &redirect_uri=http://localhost:3000/oauth/redirected/kakao\\n> &through_account=true <-- \uc608\ub294 \ub85c\uadf8\uc778 \ud558\uace0 \ub4e4\uc5b4\uc624\uba74 \uc790\ub3d9 \ucd94\uac00\ub429\ub2c8\ub2e4. \ubb34\uc2dc\ud558\uc138\uc694\\n> &client_id=REST API ID\\n> &additional_auth_login=true <-- \uc608\ub294 \ub85c\uadf8\uc778 \ud558\uace0 \ub4e4\uc5b4\uc624\uba74 \uc790\ub3d9 \ucd94\uac00\ub429\ub2c8\ub2e4. \ubb34\uc2dc\ud558\uc138\uc694\\n\\n\ubc31\uc5d4\ub4dc\uc5d0\uc11c \uc124\uc815\ud574\uc900 URL\uc774 \uc798 \uc791\ub3d9\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n**\ub3d9\uc758\ud558\uace0 \uacc4\uc18d\ud558\uae30**\ub97c \ud074\ub9ad\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![kakao_sample5](./kakao_sample5.png)\\n\\nAuth Code\uae4c\uc9c0 \uc798 \ubc1b\uc544\uc628 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c \uadf8 \ub2e4\uc74c \ub2e8\uacc4\uc778 Auth Code\ub97c \ud1b5\ud574 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\ub85c\ubd80\ud130 AccessToken\uc744 \ubc1b\uc544\uc624\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud574 \ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 2. Auth Code\ub97c \ud1b5\ud574 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\ub85c\ubd80\ud130 AccessToken\uc744 \ubc1b\uc544\uc628\ub2e4\\n\\n\uc6b0\uc120 \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uac00 \uc81c\uacf5\ud558\ub294 AccessToken\uc744 \ubc1b\uc544\uc624\uae30 \uc704\ud55c API\ub294 \ub2e4\uc74c \ub9c1\ud06c([https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-token](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-token))\uc5d0 \ub098\uc640\uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n![kakao_api3](./kakao_api3.png)\\n\\n![kakao_api4](./kakao_api4.png)\\n\\n![kakao_api5](./kakao_api5.png)\\n\\n\uc774\uc5d0 \ub9de\uac8c \uce74\uce74\uc624 \uc778\uc99d \uc11c\ubc84\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0b4\uace0 \uc751\ub2f5\uc744 \ubc1b\uc544\uc624\ub294 \uacfc\uc815\uc744 \uad6c\ud604\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc678\ubd80 API\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc5d0\ub294 \uac00\uc7a5 \ud754\ud55c \ubc29\ubc95\uc73c\ub85c\ub294 RestTemplate\uc774\ub098 WebClient\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \uac04\uc18c\ud654\ub97c \uc704\ud574\uc11c\ub294 FeignClient \ub4f1\uc744 \uc0ac\uc6a9\ud558\ub294 \uac83\ub3c4 \uc88b\uc740 \ubc29\ubc95\uc785\ub2c8\ub2e4.\\n\\n\uadf8\ub7ec\ub098 \uc800\ub294 \uc774\ubc88\uc5d0\ub294 \uc2a4\ud504\ub9c1 6\uc5d0 \uc0c8\ub85c \ucd94\uac00\ub41c [HTTP Interface Client](https://docs.spring.io/spring-framework/reference/web/webflux-http-interface-client.html)\ub97c \uc0ac\uc6a9\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc704 \uc694\uccad\uc758 \uc751\ub2f5\uc744 \uac1d\uccb4\ub85c \ubc1b\uc544\uc624\uae30 \uc704\ud574 DTO\ub97c \uc0dd\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoToken\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao.dto;\\n\\nimport com.fasterxml.jackson.databind.PropertyNamingStrategies.SnakeCaseStrategy;\\nimport com.fasterxml.jackson.databind.annotation.JsonNaming;\\n\\n@JsonNaming(SnakeCaseStrategy.class)\\npublic record KakaoToken(\\n        String tokenType,\\n        String accessToken,\\n        String idToken,\\n        Integer expiresIn,\\n        String refreshToken,\\n        Integer refreshTokenExpiresIn,\\n        String scope\\n) {\\n}\\n```\\n\\n@JsonNaming(SnakeCaseStrategy.class)\ub97c \ud1b5\ud574 token_type\uacfc \uac19\uc740 \uc751\ub2f5\uc744 tokenType\uc73c\ub85c \ubc1b\uc544\uc62c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoApiClient\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao.client;\\n\\nimport static org.springframework.http.MediaType.APPLICATION_FORM_URLENCODED_VALUE;\\n\\nimport mallang.oauth.infra.oauth.kakao.dto.KakaoToken;\\nimport org.springframework.util.MultiValueMap;\\nimport org.springframework.web.bind.annotation.RequestParam;\\nimport org.springframework.web.service.annotation.PostExchange;\\n\\npublic interface KakaoApiClient {\\n\\n    @PostExchange(url = \\"https://kauth.kakao.com/oauth/token\\", contentType = APPLICATION_FORM_URLENCODED_VALUE)\\n    KakaoToken fetchToken(@RequestParam MultiValueMap<String, String> params);\\n}\\n```\\n\\n\uc704\ub294 Http Interface Client\ub97c \uc0ac\uc6a9\ud55c \ucf54\ub4dc\uc785\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 Url\uc5d0\ub294 AccessToken\uc744 \ubc1b\uc544\uc624\uae30 \uc704\ud55c URL\uc744 \uba85\uc2dc\ud558\uc600\uace0, \uc774\ub97c \uc704\ud55c ContentType\uacfc \uc694\uccad \ud30c\ub77c\ubbf8\ud130\ub97c \ubc1b\uc544\uc57c \ud558\ubbc0\ub85c MultiValueMap\uc744 \ud30c\ub77c\ubbf8\ud130\ub85c \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\uc751\ub2f5 \uac12\uc740 KakaoToken\uc744 \ud1b5\ud574 \uac1d\uccb4\ub85c \ubc14\ub85c \ubc1b\uc544\uc62c \uc218 \uc788\ub3c4\ub85d \uc791\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uc704\ucc98\ub7fc \uc778\ud130\ud398\uc774\uc2a4\ub97c \ud1b5\ud574 \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc9c0\ub9cc, \ud55c\uac00\uc9c0 \ucd94\uac00 \uc791\uc5c5\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 HttpInterfaceConfig\\n\\n```java\\npackage mallang.oauth.infra.oauth.config;\\n\\nimport mallang.oauth.infra.oauth.kakao.client.KakaoApiClient;\\nimport org.springframework.context.annotation.Bean;\\nimport org.springframework.context.annotation.Configuration;\\nimport org.springframework.web.reactive.function.client.WebClient;\\nimport org.springframework.web.reactive.function.client.support.WebClientAdapter;\\nimport org.springframework.web.service.invoker.HttpServiceProxyFactory;\\n\\n@Configuration\\npublic class HttpInterfaceConfig {\\n\\n    @Bean\\n    public KakaoApiClient kakaoApiClient() {\\n        return createHttpInterface(KakaoApiClient.class);\\n    }\\n\\n    private <T> T createHttpInterface(Class<T> clazz) {\\n        WebClient webClient = WebClient.create();\\n        HttpServiceProxyFactory build = HttpServiceProxyFactory\\n                .builder(WebClientAdapter.forClient(webClient)).build();\\n        return build.createClient(clazz);\\n    }\\n}\\n```\\n\\n\uc704\uc640 \uac19\uc774 Http Interface Client \uad6c\ud604\uccb4\ub97c \ube48\uc73c\ub85c \ub4f1\ub85d\ud574\uc8fc\ub294 \uacfc\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.\\n\\n\uc544\uc9c1 \uad6c\ud604\ud558\uc9c0 \uc54a\uc740 \ud074\ub798\uc2a4\ub4e4\uc774 \ub9ce\uae30\uc5d0 \uc5ec\uae30\uc11c \ubc14\ub85c \ub2e4\uc74c\uc73c\ub85c \ub118\uc5b4\uac00\uaca0\uc9c0\ub9cc, \ub2e4\uc74c\uacfc \uac19\uc774 \uc0ac\uc6a9\ud560 \uac83\uc784\uc744 \ucc38\uace0\ub97c \uc704\ud574 \ub0a8\uaca8\ub450\uaca0\uc2b5\ub2c8\ub2e4.\\\\\\n\\n<br />\\n<br />\\n<br />\\n\\n```java\\n@Component\\n@RequiredArgsConstructor\\npublic class KakaoMemberClient implements OauthMemberClient {\\n\\n    private final KakaoApiClient kakaoApiClient;\\n    private final KakaoOauthConfig kakaoOauthConfig;\\n\\n\\n    @Override\\n    public OauthMember fetch(String authCode) {\\n        KakaoToken tokenInfo = kakaoApiClient.fetchToken(tokenRequestParams(authCode));\\n        // \uc0dd\ub7b5\\n    }\\n\\n    private MultiValueMap<String, String> tokenRequestParams(String authCode) {\\n        MultiValueMap<String, String> params = new LinkedMultiValueMap<>();\\n        params.add(\\"grant_type\\", \\"authorization_code\\");\\n        params.add(\\"client_id\\", kakaoOauthConfig.clientId());\\n        params.add(\\"redirect_uri\\", kakaoOauthConfig.redirectUri());\\n        params.add(\\"code\\", authCode);\\n        params.add(\\"client_secret\\", kakaoOauthConfig.clientSecret());\\n        return params;\\n    }\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 3. AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubc1b\uc544\uc628\ub2e4\\n\\n\uc774\uc81c \uc704\uc5d0\uc11c \ubc1c\uae09\ubc1b\uc740 AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790\uc758 \uc815\ubcf4\ub97c \ubc1b\uc544\uc640\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uc774\uc5d0 \ub300\ud55c API\ub294 \ub2e4\uc74c \ub9c1\ud06c([https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#req-user-info](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#req-user-info))\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n![kakao_api6](./kakao_api6.png)\\n![kakao_api7](./kakao_api7.png)\\n![kakao_api8](./kakao_api8.png)\\n![kakao_api9](./kakao_api9.png)\\n\\n\uc704 \ud615\uc2dd\uc5d0 \ub9de\uac8c AccessToken\uc744 \ubc1c\uae09\ud560 \ub54c \ucc98\ub7fc HTTP Interface Client\ub97c \uc0ac\uc6a9\ud558\uc5ec \uad6c\ud604\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc6b0\uc120 \uc751\ub2f5\uc744 \ub9e4\ud551\ud560 \ud074\ub798\uc2a4\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoMemberResponse\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao.dto;\\n\\nimport static mallang.oauth.domain.OauthServerType.KAKAO;\\n\\nimport com.fasterxml.jackson.databind.PropertyNamingStrategies.SnakeCaseStrategy;\\nimport com.fasterxml.jackson.databind.annotation.JsonNaming;\\nimport java.time.LocalDateTime;\\nimport mallang.oauth.domain.OauthId;\\nimport mallang.oauth.domain.OauthMember;\\n\\n@JsonNaming(SnakeCaseStrategy.class)\\npublic record KakaoMemberResponse(\\n        Long id,\\n        boolean hasSignedUp,\\n        LocalDateTime connectedAt,\\n        KakaoAccount kakaoAccount\\n) {\\n\\n    public OauthMember toDomain() {\\n        return OauthMember.builder()\\n                .oauthId(new OauthId(String.valueOf(id), KAKAO))\\n                .nickname(kakaoAccount.profile.nickname)\\n                .profileImageUrl(kakaoAccount.profile.profileImageUrl)\\n                .build();\\n    }\\n\\n    @JsonNaming(SnakeCaseStrategy.class)\\n    public record KakaoAccount(\\n            boolean profileNeedsAgreement,\\n            boolean profileNicknameNeedsAgreement,\\n            boolean profileImageNeedsAgreement,\\n            Profile profile,\\n            boolean nameNeedsAgreement,\\n            String name,\\n            boolean emailNeedsAgreement,\\n            boolean isEmailValid,\\n            boolean isEmailVerified,\\n            String email,\\n            boolean ageRangeNeedsAgreement,\\n            String ageRange,\\n            boolean birthyearNeedsAgreement,\\n            String birthyear,\\n            boolean birthdayNeedsAgreement,\\n            String birthday,\\n            String birthdayType,\\n            boolean genderNeedsAgreement,\\n            String gender,\\n            boolean phoneNumberNeedsAgreement,\\n            String phoneNumber,\\n            boolean ciNeedsAgreement,\\n            String ci,\\n            LocalDateTime ciAuthenticatedAt\\n    ) {\\n    }\\n\\n    @JsonNaming(SnakeCaseStrategy.class)\\n    public record Profile(\\n            String nickname,\\n            String thumbnailImageUrl,\\n            String profileImageUrl,\\n            boolean isDefaultImage\\n    ) {\\n    }\\n}\\n```\\n\\n\ud544\uc694\uc5c6\ub294 \ud544\ub4dc\ub3c4 \ub9ce\uc9c0\ub9cc, \uc5b8\uc81c \uc5b4\ub5bb\uac8c \ubc14\ub014\uc9c0 \ubaa8\ub974\uae30\uc5d0 \uadf8\ub0e5 \ud55c\ubc88\uc5d0 \ub2e4 \ub4f1\ub85d\ud574 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub54c toDomain() \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574\uc11c \ubc1b\uc544\uc628 \uc815\ubcf4\ub97c \ud1a0\ub300\ub85c OauthMember\ub97c \ub9cc\ub4e4\uc5b4 \uc8fc\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\\n\\nOauthMember\ub294 Oauth\ub97c \ud1b5\ud574 \uac00\uc785\ud55c \ud68c\uc6d0\uc744 \ub098\ud0c0\ub0b4\ub294 \uac1d\uccb4\uc774\uba70, \uc774\ub97c \uad6c\ud604\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthId\\n\\n```java\\npackage mallang.oauth.domain;\\n\\nimport static jakarta.persistence.EnumType.STRING;\\nimport static lombok.AccessLevel.PROTECTED;\\n\\nimport jakarta.persistence.Column;\\nimport jakarta.persistence.Embeddable;\\nimport jakarta.persistence.Enumerated;\\nimport lombok.AllArgsConstructor;\\nimport lombok.NoArgsConstructor;\\n\\n@Embeddable\\n@AllArgsConstructor\\n@NoArgsConstructor(access = PROTECTED)\\npublic class OauthId {\\n\\n    @Column(nullable = false, name = \\"oauth_server_id\\")\\n    private String oauthServerId;\\n\\n    @Enumerated(STRING)\\n    @Column(nullable = false, name = \\"oauth_server\\")\\n    private OauthServerType oauthServerType;\\n\\n    public String oauthServerId() {\\n        return oauthServerId;\\n    }\\n\\n    public OauthServerType oauthServer() {\\n        return oauthServerType;\\n    }\\n}\\n```\\n\\n\ud2b9\uc815 \uc778\uc99d \uc11c\ubc84\uc758 \uc2dd\ubcc4\uc790 \uac12\uc744 \uc758\ubbf8\ud558\ub294 oauthServerId\uc640, \uc774\ub97c \uc81c\uacf5\ud558\ub294 \uc11c\ube44\uc2a4 \ud0c0\uc785\uc744 \ubb36\uc5b4 OauthId\ub77c\ub294 \ud074\ub798\uc2a4\ub97c \ub9cc\ub4e4\uc5b4 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ud558\ub098\uc758 \uc11c\ube44\uc2a4 \ub0b4\uc5d0\uc11c \uc2dd\ubcc4\uc790\ub294 \uc911\ubcf5\ub418\uc9c0 \uc54a\uaca0\uc9c0\ub9cc \uc11c\ub85c \ub2e4\ub978 \uc11c\ube44\uc2a4\uac04\uc5d0\ub294 \uc2dd\ubcc4\uc790\uac00 \uc911\ubcf5\ub420\uc218\ub3c4 \uc788\uaca0\ub2e4 \uc2f6\uc5c8\uae30 \ub54c\ubb38\uc5d0 \uc704\uc640 \uac19\uc774 \uad6c\ud604\ud558\uc5ec \ud639\uc2dc \ubaa8\ub97c \uc2dd\ubcc4\uc790\uc758 \uc911\ubcf5\uc744 \uc608\ubc29\ud558\ub824 \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthMember\\n\\n```java\\npackage mallang.oauth.domain;\\n\\nimport static lombok.AccessLevel.PROTECTED;\\n\\nimport jakarta.persistence.Embedded;\\nimport jakarta.persistence.Entity;\\nimport jakarta.persistence.GeneratedValue;\\nimport jakarta.persistence.GenerationType;\\nimport jakarta.persistence.Id;\\nimport jakarta.persistence.Table;\\nimport jakarta.persistence.UniqueConstraint;\\nimport lombok.AllArgsConstructor;\\nimport lombok.Builder;\\nimport lombok.NoArgsConstructor;\\n\\n@Entity\\n@Builder\\n@AllArgsConstructor\\n@NoArgsConstructor(access = PROTECTED)\\n@Table(name = \\"oauth_member\\",\\n        uniqueConstraints = {\\n                @UniqueConstraint(\\n                        name = \\"oauth_id_unique\\",\\n                        columnNames = {\\n                                \\"oauth_server_id\\",\\n                                \\"oauth_server\\"\\n                        }\\n                ),\\n        }\\n)\\npublic class OauthMember {\\n\\n    @Id\\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\\n    private Long id;\\n\\n    @Embedded\\n    private OauthId oauthId;\\n    private String nickname;\\n    private String profileImageUrl;\\n\\n    public Long id() {\\n        return id;\\n    }\\n\\n    public OauthId oauthId() {\\n        return oauthId;\\n    }\\n\\n    public String nickname() {\\n        return nickname;\\n    }\\n\\n    public String profileImageUrl() {\\n        return profileImageUrl;\\n    }\\n}\\n```\\n\\n\uc790\ub3d9 \uc99d\uac00\ub418\ub294 id \ud558\ub098\uc640, uniqueConstraints\ub97c \ud1b5\ud574 OauthId\uc758 \uc720\uc77c\ud568\uc744 \ubcf4\uc7a5\ud558\ub3c4\ub85d \ud574\uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ub610\ud55c \uc0ac\uc6a9\uc790\uc758 \ubcc4\uba85\uacfc \ud504\ub85c\ud544 \uc0ac\uc9c4 URL\uc5d0 \ub300\ud55c \uc815\ubcf4\ub97c \uc81c\uacf5\ubc1b\uae30\ub85c \ud588\uc73c\ubbc0\ub85c, \uc774\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 \ud544\ub4dc\ub97c \ucd94\uac00\ud574 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthMemberRepository\\n\\n```java\\npackage mallang.oauth.domain;\\n\\nimport java.util.Optional;\\nimport org.springframework.data.jpa.repository.JpaRepository;\\n\\npublic interface OauthMemberRepository extends JpaRepository<OauthMember, Long> {\\n\\n    Optional<OauthMember> findByOauthId(OauthId oauthId);\\n}\\n```\\n\\n\uac04\ub2e8\ud558\ubbc0\ub85c \ub118\uc5b4\uac00\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c \uad6c\ud604\ud574\uc57c \ud560 \uac83\uc740 AccessToken\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790\uc758 \uc815\ubcf4\ub97c \ubc1b\uc544\uc640 OauthMember\ub97c \uc0dd\uc131\ud558\ub294 \ub85c\uc9c1\uc785\ub2c8\ub2e4.\\n\\n\uc544\uae4c \uc0dd\uc131\ud574\ub454 **KakaoApiClient**\uc5d0 \ub2e4\uc74c \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoApiClient\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao.client;\\n\\nimport static org.springframework.http.HttpHeaders.AUTHORIZATION;\\nimport static org.springframework.http.MediaType.APPLICATION_FORM_URLENCODED_VALUE;\\n\\nimport mallang.oauth.infra.oauth.kakao.dto.KakaoMemberResponse;\\nimport mallang.oauth.infra.oauth.kakao.dto.KakaoToken;\\nimport org.springframework.util.MultiValueMap;\\nimport org.springframework.web.bind.annotation.RequestHeader;\\nimport org.springframework.web.bind.annotation.RequestParam;\\nimport org.springframework.web.service.annotation.GetExchange;\\nimport org.springframework.web.service.annotation.PostExchange;\\n\\npublic interface KakaoApiClient {\\n\\n    @PostExchange(url = \\"https://kauth.kakao.com/oauth/token\\", contentType = APPLICATION_FORM_URLENCODED_VALUE)\\n    KakaoToken fetchToken(@RequestParam MultiValueMap<String, String> params);\\n\\n    // \ucd94\uac00\\n    @GetExchange(\\"https://kapi.kakao.com/v2/user/me\\")\\n    KakaoMemberResponse fetchMember(@RequestHeader(name = AUTHORIZATION) String bearerToken);\\n}\\n```\\n\\n[\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uac00\uc838\uc624\uae30 API](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#req-user-info)\uc5d0 \uc54c\ub9de\uac8c \uba54\uc11c\ub4dc\ub97c \uc791\uc131\ud574 \uc8fc\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub807\uac8c \ud558\uba74 **AccessToken**\uc744 \ud1b5\ud574 **\ud68c\uc6d0 \uc815\ubcf4\ub97c \uc870\ud68c**\ud558\ub294 \uae30\ub2a5\ub3c4 \uad6c\ud604\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c 2\ubc88\uacfc 3\ubc88 \uacfc\uc815\uc744 \ud569\uccd0\uc11c Auth Code\ub97c \ud1b5\ud574 \ucd5c\uc885\uc801\uc73c\ub85c OauthMember\ub97c \uc0dd\uc131\ud558\ub294 \ub85c\uc9c1\uc744 \uc791\uc131\ud574 \ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub97c \uc704\ud574 \uc6b0\uc120 OauthMemberClient\ub77c\ub294 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc815\uc758\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthMemberClient\\n\\n```java\\npackage mallang.oauth.domain.client;\\n\\nimport mallang.oauth.domain.OauthMember;\\nimport mallang.oauth.domain.OauthServerType;\\n\\npublic interface OauthMemberClient {\\n\\n    OauthServerType supportServer();\\n\\n    OauthMember fetch(String code);\\n}\\n```\\n\\n\uc5ec\uae30\uc11c\ub3c4 AuthCodeRequestUrlProvider\uc640 \ube44\uc2b7\ud558\uac8c supporServer()\ub97c \uc815\uc758\ud574\uc8fc\uc5c8\uace0,\\n\\nfetch() \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 OauthMember\ub97c \ubc18\ud658\ud574\uc8fc\ub3c4\ub85d \ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\nfetch() \uba54\uc11c\ub4dc\ub294 \uc778\uc790\ub85c Auth Code\ub97c \ubc1b\uc2b5\ub2c8\ub2e4.\\n\\n\ud68c\uc6d0\uac00\uc785 \ud639\uc740 \ub85c\uadf8\uc778 \ud560 \ud68c\uc6d0 \uc815\ubcf4\ub97c \ubc1b\uc544\uc624\ub294 \uacfc\uc815\uc744 \ub098\uc5f4\ud558\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n1.  Auth Code\ub97c \ud1b5\ud574 AccessToken \ubc1c\uae09\\n2.  AccessToken\uc744 \ud1b5\ud574 \ud68c\uc6d0 \uc815\ubcf4 \uc870\ud68c\\n\\n\uc774 \uacfc\uc815\uc744 Auth Code\ub97c \ud1b5\ud574 \ud68c\uc6d0 \uc815\ubcf4\ub97c \uc870\ud68c\ud558\ub294 \uacfc\uc815\uc73c\ub85c \ucea1\uc290\ud654\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub9ac\uace0 AuthCodeRequestUrlProviderComposite\uacfc \ube44\uc2b7\ud558\uac8c, OauthMemberClientComposite\uc744 \uad6c\ud604\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthMemberClientComposite\\n\\n```java\\npackage mallang.oauth.domain.client;\\n\\nimport static java.util.function.Function.identity;\\nimport static java.util.stream.Collectors.toMap;\\n\\nimport java.util.Map;\\nimport java.util.Optional;\\nimport java.util.Set;\\nimport mallang.oauth.domain.OauthMember;\\nimport mallang.oauth.domain.OauthServerType;\\nimport org.springframework.stereotype.Component;\\n\\n@Component\\npublic class OauthMemberClientComposite {\\n\\n    private final Map<OauthServerType, OauthMemberClient> mapping;\\n\\n    public OauthMemberClientComposite(Set<OauthMemberClient> clients) {\\n        mapping = clients.stream()\\n                .collect(toMap(\\n                        OauthMemberClient::supportServer,\\n                        identity()\\n                ));\\n    }\\n\\n    public OauthMember fetch(OauthServerType oauthServerType, String authCode) {\\n        return getClient(oauthServerType).fetch(authCode);\\n    }\\n\\n    private OauthMemberClient getClient(OauthServerType oauthServerType) {\\n        return Optional.ofNullable(mapping.get(oauthServerType))\\n                .orElseThrow(() -> new RuntimeException(\\"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc18c\uc15c \ub85c\uadf8\uc778 \ud0c0\uc785\uc785\ub2c8\ub2e4.\\"));\\n    }\\n}\\n```\\n\\n\uc774 \uc5ed\uc2dc\ub3c4 \uce74\uce74\uc624 \ubfd0\ub9cc \uc544\ub2c8\ub77c \ub2e4\ub978 \uc11c\ube44\uc2a4\ub4e4\uc744 \uae30\uc874 \ucf54\ub4dc\uc758 \ubcc0\uacbd \uc5c6\uc774 \ucd94\uac00\ud558\uae30 \uc704\ud574 \uc791\uc131\ud55c \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4.\\n\\n\uc774\uc81c OauthMemberClient\ub97c \uce74\uce74\uc624 \uc11c\ube44\uc2a4\uc5d0 \ub9de\uac8c \uad6c\ud604\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 KakaoMemberClient\\n\\n```java\\npackage mallang.oauth.infra.oauth.kakao;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthMember;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.client.OauthMemberClient;\\nimport mallang.oauth.infra.oauth.kakao.client.KakaoApiClient;\\nimport mallang.oauth.infra.oauth.kakao.dto.KakaoMemberResponse;\\nimport mallang.oauth.infra.oauth.kakao.dto.KakaoToken;\\nimport org.springframework.stereotype.Component;\\nimport org.springframework.util.LinkedMultiValueMap;\\nimport org.springframework.util.MultiValueMap;\\n\\n@Component\\n@RequiredArgsConstructor\\npublic class KakaoMemberClient implements OauthMemberClient {\\n\\n    private final KakaoApiClient kakaoApiClient;\\n    private final KakaoOauthConfig kakaoOauthConfig;\\n\\n    @Override\\n    public OauthServerType supportServer() {\\n        return OauthServerType.KAKAO;\\n    }\\n\\n    @Override\\n    public OauthMember fetch(String authCode) {\\n        KakaoToken tokenInfo = kakaoApiClient.fetchToken(tokenRequestParams(authCode)); // (1)\\n        KakaoMemberResponse kakaoMemberResponse =\\n                kakaoApiClient.fetchMember(\\"Bearer \\" + tokenInfo.accessToken());  // (2)\\n        return kakaoMemberResponse.toDomain();  // (3)\\n    }\\n\\n    private MultiValueMap<String, String> tokenRequestParams(String authCode) {\\n        MultiValueMap<String, String> params = new LinkedMultiValueMap<>();\\n        params.add(\\"grant_type\\", \\"authorization_code\\");\\n        params.add(\\"client_id\\", kakaoOauthConfig.clientId());\\n        params.add(\\"redirect_uri\\", kakaoOauthConfig.redirectUri());\\n        params.add(\\"code\\", authCode);\\n        params.add(\\"client_secret\\", kakaoOauthConfig.clientSecret());\\n        return params;\\n    }\\n}\\n```\\n\\n\uc5b4\ub835\uc9c0\ub294 \uc54a\uc744 \uac83\uc774\ub77c \uc0dd\uac01\ub418\uc9c0\ub9cc, fetch() \uba54\uc11c\ub4dc\uc5d0 \ub300\ud574 \uc124\uba85\uc744 \uc9c4\ud589\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n(1) - \uba3c\uc800 Auth Code\ub97c \ud1b5\ud574\uc11c AccessToken\uc744 \uc870\ud68c\ud569\ub2c8\ub2e4.<br/>\\n(2) - AccessToken\uc744 \uac00\uc9c0\uace0 \ud68c\uc6d0 \uc815\ubcf4\ub97c \ubc1b\uc544\uc635\ub2c8\ub2e4.<br/>\\n(3) - \ud68c\uc6d0 \uc815\ubcf4\ub97c OauthMember \uac1d\uccb4\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4.\\n\\n\uc774\ub54c (1)\ubc88 \uacfc\uc815\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 **tokenRequestParams**()\ub294 \ud55c\ucc38 \uc804 \uc124\uba85\uc5d0\uc11c \uc7a0\uae50 \ucc38\uace0\uc6a9\uc73c\ub85c \ub4f1\uc7a5\ud588\ub294\ub370\uc694,\\n\\n[\ud1a0\ud070 \ubc1b\uae30 API](https://developers.kakao.com/docs/latest/ko/kakaologin/rest-api#request-token)\uc758 \uc694\uccad\uc5d0 \uc0ac\uc6a9\ub418\ub294 \uc694\uccad \ud30c\ub77c\ubbf8\ud130\ub97c \uc124\uc815\ud574\uc90d\ub2c8\ub2e4.\\n\\n![kakao api10](./kakao_api10.png)\\n\\n\uc774\uc678\uc5d0\ub294 \uadf8\ub0e5 KakaoApiClient\ub97c \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\uc774\ubbc0\ub85c \ub118\uc5b4\uac00\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\uc81c \ud574\ub2f9 \uacfc\uc815\uc744 \ud1b5\ud574 \uc0dd\uc131\ud55c OauthMember \uac1d\uccb4\uc5d0 \ub300\ud574\uc11c \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\ub294 \ucf54\ub4dc\ub97c \uc791\uc131\ud574\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uc774\ub54c \ub9cc\uc57d \ud68c\uc6d0\uac00\uc785\ub418\uc5b4\uc788\uc9c0 \uc54a\ub2e4\uba74 \ud68c\uc6d0\uac00\uc785\ub3c4 \ud568\uaed8 \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 4\\\\. \ubc1b\uc544\uc628 \uc815\ubcf4\ub97c \ud1b5\ud574 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud55c\ub2e4. \uc774\ub54c \ud68c\uc6d0\uac00\uc785 \ub418\uc5b4\uc788\uc9c0 \uc54a\ub2e4\uba74 \ud68c\uc6d0\uac00\uc785\ub3c4 \ud568\uaed8 \uc9c4\ud589\ud55c\ub2e4.\\n\\n<br />\\n\\nOauthService\uc5d0 \uc774\ub97c \uc704\ud55c \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n<br />\\n\\n### \u2728 OauthService\\n\\n```java\\npackage mallang.oauth.application;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthMember;\\nimport mallang.oauth.domain.OauthMemberRepository;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.authcode.AuthCodeRequestUrlProviderComposite;\\nimport mallang.oauth.domain.client.OauthMemberClientComposite;\\nimport org.springframework.stereotype.Service;\\n\\n@Service\\n@RequiredArgsConstructor\\npublic class OauthService {\\n\\n    private final AuthCodeRequestUrlProviderComposite authCodeRequestUrlProviderComposite;\\n    private final OauthMemberClientComposite oauthMemberClientComposite;\\n    private final OauthMemberRepository oauthMemberRepository;\\n\\n    public String getAuthCodeRequestUrl(OauthServerType oauthServerType) {\\n        return authCodeRequestUrlProviderComposite.provide(oauthServerType);\\n    }\\n\\n    // \ucd94\uac00\\n    public Long login(OauthServerType oauthServerType, String authCode) {\\n        OauthMember oauthMember = oauthMemberClientComposite.fetch(oauthServerType, authCode);\\n        OauthMember saved = oauthMemberRepository.findByOauthId(oauthMember.oauthId())\\n                .orElseGet(() -> oauthMemberRepository.save(oauthMember));\\n        return saved.id();\\n    }\\n}\\n```\\n\\n\ucf54\ub4dc\ub294 \ub418\uac8c \uac04\ub2e8\ud569\ub2c8\ub2e4.\\n\\n\uba3c\uc800 \ub85c\uadf8\uc778\uc744 \uc9c4\ud589\ud558\ub824\ub294 OauthServerType\uc5d0 \ud574\ub2f9\ud558\ub294 \ud68c\uc6d0\uc744 AuthCode\ub97c \ud1b5\ud574 \uc870\ud68c\ud569\ub2c8\ub2e4.\\n\\n\uadf8\ub9ac\uace0 \uc720\ub2c8\ud06c\ud568\uc774 \ubcf4\uc7a5\ub418\ub294 OauthId\ub97c \ud1b5\ud574 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \ud68c\uc6d0\uc744 \ucc3e\uc544\uc635\ub2c8\ub2e4.\\n\\n\ub9cc\uc57d \uac00\uc785\ub418\uc5b4\uc788\uc9c0 \uc54a\ub2e4\uba74 \uc800\uc7a5(\ud68c\uc6d0\uac00\uc785)\ud569\ub2c8\ub2e4.\\n\\n\uc6d0\ub798\ub294 JWT\ub97c \uc0ac\uc6a9\ud55c\ub2e4\uba74 \uc5ec\uae30\uc11c JWT\ub85c AccessToken\uc744 \uc0dd\uc131\ud558\uc5ec \ubc18\ud658\ud558\uc5ec\uc57c \ud558\uc9c0\ub9cc, JWT\uae4c\uc9c0 \ub2e4\ub8e8\uae30\uc5d0\ub294 \uc774\ubbf8 \ubd84\ub7c9\uc774 \ub108\ubb34 \ub9ce\uc73c\ubbc0\ub85c Id\ub97c \ubc18\ud658\ud558\ub294 \uac83\uc73c\ub85c \uc800\ud63c\uc790 \ud0c0\ud611\ud558\uace0 \ub118\uc5b4\uac14\uc5c8\uc2b5\ub2c8\ub2e4 :)\\n\\n\uc774\uc81c \uc774\ub97c Controller\uc5d0\uc11c \uc0ac\uc6a9\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \u2728 OauthController\\n\\n```java\\npackage mallang.oauth.presentation;\\n\\nimport jakarta.servlet.http.HttpServletResponse;\\nimport lombok.RequiredArgsConstructor;\\nimport lombok.SneakyThrows;\\nimport mallang.oauth.application.OauthService;\\nimport mallang.oauth.domain.OauthServerType;\\nimport org.springframework.http.ResponseEntity;\\nimport org.springframework.web.bind.annotation.GetMapping;\\nimport org.springframework.web.bind.annotation.PathVariable;\\nimport org.springframework.web.bind.annotation.RequestMapping;\\nimport org.springframework.web.bind.annotation.RequestParam;\\nimport org.springframework.web.bind.annotation.RestController;\\n\\n@RequiredArgsConstructor\\n@RequestMapping(\\"/oauth\\")\\n@RestController\\npublic class OauthController {\\n\\n    private final OauthService oauthService;\\n\\n    @SneakyThrows\\n    @GetMapping(\\"/{oauthServerType}\\")\\n    ResponseEntity<Void> redirectAuthCodeRequestUrl(\\n            @PathVariable OauthServerType oauthServerType,\\n            HttpServletResponse response\\n    ) {\\n        String redirectUrl = oauthService.getAuthCodeRequestUrl(oauthServerType);\\n        response.sendRedirect(redirectUrl);\\n        return ResponseEntity.ok().build();\\n    }\\n\\n    // \ucd94\uac00\\n    @GetMapping(\\"/login/{oauthServerType}\\")\\n    ResponseEntity<Long> login(\\n            @PathVariable OauthServerType oauthServerType,\\n            @RequestParam(\\"code\\") String code\\n    ) {\\n        Long login = oauthService.login(oauthServerType, code);\\n        return ResponseEntity.ok(login);\\n    }\\n}\\n```\\n\\n\ub108\ubb34 \uae38\uc5b4\uc838\uc11c \uae4c\uba39\uc73c\uc168\uc744 \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc, \uc0ac\uc6a9\uc790\uac00 \uce74\uce74\uc624\ud1a1\uc73c\ub85c \ub85c\uadf8\uc778 + \uc815\ubcf4 \uc81c\uacf5 \ub3d9\uc758\ub97c \uc9c4\ud589\ud558\uba74 \ud504\ub860\ud2b8\uc5d4\ub4dc\ub85c Redirect\ub418\uba70, \ud504\ub860\ud2b8\uc5d4\ub4dc\ub294 \uc774\ub54c code\ub97c \ubc1b\uc544\uc11c http://localhost:8080**/oauth/login/kakao**\ub85c \ubcf4\ub0b4\uae30\ub85c \ud588\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8 \ucf54\ub4dc\ub294 KakaoRedirectPage.js\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n```js\\nimport React, { useEffect } from \\"react\\";\\nimport { useLocation, useNavigate } from \\"react-router-dom\\";\\nimport axios from \\"axios\\";\\n\\nconst KakaoRedirectPage = () => {\\n  const location = useLocation();\\n  const navigate = useNavigate();\\n\\n  const handleOAuthKakao = async (code) => {\\n    try {\\n      // \uce74\uce74\uc624\ub85c\ubd80\ud130 \ubc1b\uc544\uc628 code\ub97c \uc11c\ubc84\uc5d0 \uc804\ub2ec\ud558\uc5ec \uce74\uce74\uc624\ub85c \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\ud55c\ub2e4\\n      const response = await axios.get(\\n        `http://localhost:8080/oauth/login/kakao?code=${code}`\\n      );\\n      const data = response.data; // \uc751\ub2f5 \ub370\uc774\ud130\\n      alert(\\"\ub85c\uadf8\uc778 \uc131\uacf5: \\" + data);\\n      navigate(\\"/success\\");\\n    } catch (error) {\\n      navigate(\\"/fail\\");\\n    }\\n  };\\n\\n  useEffect(() => {\\n    const searchParams = new URLSearchParams(location.search);\\n    const code = searchParams.get(\\"code\\"); // \uce74\uce74\uc624\ub294 Redirect \uc2dc\ud0a4\uba74\uc11c code\ub97c \ucffc\ub9ac \uc2a4\ud2b8\ub9c1\uc73c\ub85c \uc900\ub2e4.\\n    if (code) {\\n      alert(\\"CODE = \\" + code);\\n      handleOAuthKakao(code);\\n    }\\n  }, [location]);\\n\\n  return (\\n    <div>\\n      <div>Processing...</div>\\n    </div>\\n  );\\n};\\n\\nexport default KakaoRedirectPage;\\n```\\n\\n\uc774\ub807\uac8c \ub418\uba74 \uce74\uce74\uc624\ud1a1 \ud68c\uc6d0\uac00\uc785&\ub85c\uadf8\uc778 \uae30\ub2a5 \uad6c\ud604\uc774 \uc644\ub8cc\ub429\ub2c8\ub2e4.\\n\\n\ud55c\ubc88 \ud14c\uc2a4\ud2b8 \ud574\ubcf4\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\nhttp://localhost:3000\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\n\\n![sample6](./kakao_sample6.png)\\n\\n\ubc84\ud2bc\uc744 \ub204\ub974\uace0 \uc9c4\ud589\ud569\ub2c8\ub2e4\\n\\n<br />\\n<br />.\\n\\n![sample7](./kakao_sample7.png)\\n\\n\uacc4\uc18d \uc9c4\ud589\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![sample8](./kakao_sample8.png)\\n\\nAuth Code\ub97c \uc798 \ubc1b\uc544\uc624\ub294 \uac83 \uae4c\uc9c0\ub294 \uc774\uc804\uc5d0 \ud655\uc778\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ud655\uc778\uc744 \ub204\ub974\uace0 \uc11c\ubc84 \ub85c\uadf8\ub97c \ubcf4\uba74 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![sample9](./kakao_sample9.png)\\n\\n\ud68c\uc6d0\uac00\uc785\uc774 \uc544\uc8fc \uc798 \ub418\ub294 \uac83\uc744 \ud655\uc778\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![sample10](./kakao_sample10.png)\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778 \uad6c\ud604\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uc0c8\ub85c\uc6b4 \uc11c\ube44\uc2a4\ub97c \ub4f1\ub85d\ud558\ub294 \ubc29\ubc95\\n\\n\uc9c0\uae08\uae4c\uc9c0\uc758 \ucf54\ub4dc\ub97c \ud1b5\ud574 Oauth \ub85c\uadf8\uc778\uc758 \uae30\ubcf8 \uad6c\uc870\uac00 \uac16\ucd94\uc5b4\uc84c\uc2b5\ub2c8\ub2e4.<br/>\\n\uc774\uc81c \uc0c8\ub85c\uc6b4 \uc11c\ube44\uc2a4\ub97c \ub4f1\ub85d\ud558\uae30 \uc704\ud55c \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.<br/>\\n\ub124\uc774\ubc84\ub97c \uc608\uc2dc\ub85c \ub4e4\uc5b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 1. \uac1c\ubc1c\uc790 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucd94\uac00\\n\\n\ub124\uc774\ubc84\ub77c\uba74 \ub124\uc774\ubc84 \uac1c\ubc1c\uc790 \uc0ac\uc774\ud2b8([https://developers.naver.com/apps/#/list](https://developers.naver.com/apps/#/list))\ub85c \uc774\ub3d9\ud558\uc5ec, \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc0dd\uc131\ud558\uace0 \uc124\uc815\ud569\ub2c8\ub2e4.<br/>\\n\\n\uc774\ub54c redirect_uri\ub97c \ub4f1\ub85d\ud560 \ub54c\uc5d0\ub294 **http://localhost:3030/oauth/redirected**/{**\uc11c\ube44\uc2a4 \ubcc4\uce6d**?(kakao, naver, google \ub4f1 \uc784\uc758\ub85c \uc815\uc758)}\uc758 \ud615\uc2dd\uc73c\ub85c \ub4f1\ub85d\ud574\uc90d\ub2c8\ub2e4.\\n\\n\ucc38\uace0\ub85c http://localhost:3000 \uac19\uc740 \uacbd\uc6b0, \ub2f9\uc5f0\ud788 \ubc30\ud3ec\uc2dc\uc5d0\ub294 \ubc30\ud3ec\ub41c \uc11c\ubc84\uc758 \ub3c4\uba54\uc778\uc744 \uc785\ub825\ud574\uc8fc\uc5b4\uc57c \ud569\ub2c8\ub2e4.\\n\\n\uac19\uc774 \ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n\ub124\uc774\ubc84 \uac1c\ubc1c\uc790 \uc0ac\uc774\ud2b8([https://developers.naver.com/apps/#/list](https://developers.naver.com/apps/#/list))\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\n\\n![naver1](./naver_1.png)\\n\\nApplication \ub4f1\ub85d\uc744 \ud074\ub9ad\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![naver2](./naver_2.png)\\n\\n\uc704\uc640 \uac19\uc774 \uc124\uc815\ud574\uc90d\ub2c8\ub2e4.\\n\\n\uc774\ub54c CallbackUrl\uc740 \uce74\uce74\uc624\uc640 \ube44\uc2b7\ud558\uc9c0\ub9cc, \ub9c8\uc9c0\ub9c9\uc774 kakao\uac00 \uc544\ub2cc naver\ub85c \ubcc0\uacbd\ub418\uc5c8\ub2e4\ub294 \uc810\ub9cc \ub2e4\ub985\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n![naver3](./naver_3.png)\\n\\n\uc704 \ub450\uac1c\ub97c \uc5b4\ub518\uac00\uc5d0 \uc800\uc7a5\ud574\ub461\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 2. OauthServerType\uc5d0 \uc11c\ube44\uc2a4 \ucd94\uac00\\n\\n```java\\npublic enum OauthServerType {\\n\\n    KAKAO,\\n    NAVER,\\n    ;\\n\\n    public static OauthServerType fromName(String type) {\\n        return OauthServerType.valueOf(type.toUpperCase(ENGLISH));\\n    }\\n}\\n```\\n\\n\uadf8\ub0e5 \uc774\ub984\uc5d0 \ub9de\uac8c \ucd94\uac00\ud574\uc8fc\uc2dc\uba74 \ub429\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 3. application.yml\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc815\ubcf4 \ub4f1\ub85d\\n\\n```yml\\noauth:\\n  kakao:\\n    client_id: ${KAKAO_CLIENT_ID}\\n    redirect_uri: ${KAKAO_REDIRECT_URI}\\n    client_secret: ${KAKAO_CLIENT_SECRET}\\n    scope: ${KAKAO_SCOPE}\\n\\n  naver:\\n    client_id: ${NAVER_CLIENT_ID}\\n    redirect_uri: ${NAVER_REDIRECT_URI}\\n    client_secret: ${NAVER_CLIENT_SECRET}\\n    scope: ${NAVER_SCOPE}\\n```\\n\\n1\ubc88\uc5d0\uc11c \uc124\uc815\ud55c client_id, secret, redirect_uri, , scope(\uc5c6\uc73c\uba74 \uacf5\ubc31)\ub97c \ub4f1\ub85d\ud574\uc90d\ub2c8\ub2e4.\\n\\n\ud574\ub2f9 \uc124\uc815 \uc815\ubcf4 \ud074\ub798\uc2a4\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uad6c\ud604\ud569\ub2c8\ub2e4.\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver;\\n\\nimport org.springframework.boot.context.properties.ConfigurationProperties;\\n\\n@ConfigurationProperties(prefix = \\"oauth.naver\\")\\npublic record NaverOauthConfig(\\n        String redirectUri,\\n        String clientId,\\n        String clientSecret,\\n        String[] scope,\\n        String state\\n) {\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 4. AuthCodeRequestUrlProvider \uad6c\ud604\\n\\n#### \ud83d\ude80 Auth Code \ubc1c\uae09 API \uba85\uc138\\n\\nAuth Code\uc640 AccessToken \uad00\ub828 API \uba85\uc138\ub294\uc740 [\ud574\ub2f9 \ub9c1\ud06c](https://developers.naver.com/docs/login/api/api.md#2--api-%EA%B8%B0%EB%B3%B8-%EC%A0%95%EB%B3%B4)\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![naver4](./naver_4.png)\\n![naver5](./naver_5.png)\\n![naver6](./naver_6.png)\\n\\n<br />\\n<br />\\n<br />\\n\\n\uc774\uc5d0 \ub9de\uac8c \uad6c\ud604\ud569\ub2c8\ub2e4.\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver.authcode;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.authcode.AuthCodeRequestUrlProvider;\\nimport mallang.oauth.infra.oauth.naver.NaverOauthConfig;\\nimport org.springframework.stereotype.Component;\\nimport org.springframework.web.util.UriComponentsBuilder;\\n\\n@Component\\n@RequiredArgsConstructor\\npublic class NaverAuthCodeRequestUrlProvider implements AuthCodeRequestUrlProvider {\\n\\n    private final NaverOauthConfig naverOauthConfig;\\n\\n    @Override\\n    public OauthServerType supportServer() {\\n        return OauthServerType.NAVER;\\n    }\\n\\n    @Override\\n    public String provide() {\\n        return UriComponentsBuilder\\n                .fromUriString(\\"https://nid.naver.com/oauth2.0/authorize\\")\\n                .queryParam(\\"response_type\\", \\"code\\")\\n                .queryParam(\\"client_id\\", naverOauthConfig.clientId())\\n                .queryParam(\\"redirect_uri\\", naverOauthConfig.redirectUri())\\n                .queryParam(\\"state\\", \\"samplestate\\") // \uc774\uac74 \ub098\uc911\uc5d0 \ub530\ub85c \ucc3e\uc544\ubcf4\uace0 \uc124\uc815\ud574\uc11c \uc4f0\uc138\uc6a9!\\n                .build()\\n                .toUriString();\\n    }\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 5. AccessToken \ubc1c\uae09 & \ud68c\uc6d0 \uc815\ubcf4 \uc870\ud68c API Cleint \uad6c\ud604\\n\\n### \ud83d\ude80 AcessToken \ubc1c\uae09 API \uba85\uc138\\n\\nAccessToken \uad00\ub828\ub3c4 [\ud574\ub2f9 \ub9c1\ud06c](https://developers.naver.com/docs/login/api/api.md#2--api-%EA%B8%B0%EB%B3%B8-%EC%A0%95%EB%B3%B4)\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\\n\\n![naver7](./naver_7.png)\\n![naver8](./naver_8.png)\\n![naver9](./naver_9.png)\\n\\n<br />\\n<br />\\n\\n### \ud83d\ude80\ud68c\uc6d0 \uc815\ubcf4 \uc870\ud68c API \uba85\uc138\\n\\n\ud68c\uc6d0 \uc815\ubcf4 \uc870\ud68c\ub294 [\ud574\ub2f9 \ub9c1\ud06c](https://developers.naver.com/docs/login/profile/profile.md)\uc5d0 \uc874\uc7ac\ud569\ub2c8\ub2e4.\\n\\n![naver10](./naver_10.png)\\n![naver11](./naver_11.png)\\n![naver12](./naver_12.png)\\n\\n<br />\\n<br />\\n<br />\\n\\n\uc774\uc5d0 \ub9de\uac8c \uad6c\ud604\ud569\ub2c8\ub2e4.\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver.client;\\n\\nimport static org.springframework.http.HttpHeaders.AUTHORIZATION;\\n\\nimport mallang.oauth.infra.oauth.naver.dto.NaverMemberResponse;\\nimport mallang.oauth.infra.oauth.naver.dto.NaverToken;\\nimport org.springframework.util.MultiValueMap;\\nimport org.springframework.web.bind.annotation.RequestHeader;\\nimport org.springframework.web.bind.annotation.RequestParam;\\nimport org.springframework.web.service.annotation.GetExchange;\\nimport org.springframework.web.service.annotation.PostExchange;\\n\\npublic interface NaverApiClient {\\n\\n    @PostExchange(url = \\"https://nid.naver.com/oauth2.0/token\\")\\n    NaverToken fetchToken(@RequestParam MultiValueMap<String, String> params);\\n\\n    @GetExchange(\\"https://openapi.naver.com/v1/nid/me\\")\\n    NaverMemberResponse fetchMember(@RequestHeader(name = AUTHORIZATION) String bearerToken);\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver.dto;\\n\\nimport com.fasterxml.jackson.databind.PropertyNamingStrategies.SnakeCaseStrategy;\\nimport com.fasterxml.jackson.databind.annotation.JsonNaming;\\n\\n@JsonNaming(value = SnakeCaseStrategy.class)\\npublic record NaverToken(\\n        String accessToken,\\n        String refreshToken,\\n        String tokenType,\\n        Integer expiresIn,\\n        String error,\\n        String errorDescription\\n) {\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver.dto;\\n\\nimport static mallang.oauth.domain.OauthServerType.NAVER;\\n\\nimport com.fasterxml.jackson.databind.PropertyNamingStrategies.SnakeCaseStrategy;\\nimport com.fasterxml.jackson.databind.annotation.JsonNaming;\\nimport mallang.oauth.domain.OauthId;\\nimport mallang.oauth.domain.OauthMember;\\n\\n@JsonNaming(value = SnakeCaseStrategy.class)\\npublic record NaverMemberResponse(\\n        String resultcode,\\n        String message,\\n        Response response\\n) {\\n\\n    public OauthMember toDomain() {\\n        return OauthMember.builder()\\n                .oauthId(new OauthId(String.valueOf(response.id), NAVER))\\n                .nickname(response.nickname)\\n                .profileImageUrl(response.profileImage)\\n                .build();\\n    }\\n\\n    @JsonNaming(value = SnakeCaseStrategy.class)\\n    public record Response(\\n            String id,\\n            String nickname,\\n            String name,\\n            String email,\\n            String gender,\\n            String age,\\n            String birthday,\\n            String profileImage,\\n            String birthyear,\\n            String mobile\\n    ) {\\n    }\\n}\\n```\\n\\n\uadf8\ub9ac\uace0 HttpInterfaceConfig\uc5d0 \ube48\uc73c\ub85c \ub4f1\ub85d\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n```java\\npackage mallang.oauth.infra.oauth.config;\\n\\nimport mallang.oauth.infra.oauth.kakao.client.KakaoApiClient;\\nimport mallang.oauth.infra.oauth.naver.client.NaverApiClient;\\nimport org.springframework.context.annotation.Bean;\\nimport org.springframework.context.annotation.Configuration;\\nimport org.springframework.web.reactive.function.client.WebClient;\\nimport org.springframework.web.reactive.function.client.support.WebClientAdapter;\\nimport org.springframework.web.service.invoker.HttpServiceProxyFactory;\\n\\n@Configuration\\npublic class HttpInterfaceConfig {\\n\\n    @Bean\\n    public KakaoApiClient kakaoApiClient() {\\n        return createHttpInterface(KakaoApiClient.class);\\n    }\\n\\n    @Bean\\n    public NaverApiClient naverApiClient() {\\n        return createHttpInterface(NaverApiClient.class);\\n    }\\n\\n    private <T> T createHttpInterface(Class<T> clazz) {\\n        WebClient webClient = WebClient.create();\\n        HttpServiceProxyFactory build = HttpServiceProxyFactory\\n                .builder(WebClientAdapter.forClient(webClient)).build();\\n        return build.createClient(clazz);\\n    }\\n}\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 6. OauthMemberClient \uad6c\ud604\\n\\n```java\\npackage mallang.oauth.infra.oauth.naver;\\n\\nimport lombok.RequiredArgsConstructor;\\nimport mallang.oauth.domain.OauthMember;\\nimport mallang.oauth.domain.OauthServerType;\\nimport mallang.oauth.domain.client.OauthMemberClient;\\nimport mallang.oauth.infra.oauth.naver.client.NaverApiClient;\\nimport mallang.oauth.infra.oauth.naver.dto.NaverMemberResponse;\\nimport mallang.oauth.infra.oauth.naver.dto.NaverToken;\\nimport org.springframework.stereotype.Component;\\nimport org.springframework.util.LinkedMultiValueMap;\\nimport org.springframework.util.MultiValueMap;\\n\\n@Component\\n@RequiredArgsConstructor\\npublic class NaverMemberClient implements OauthMemberClient {\\n\\n    private final NaverApiClient naverApiClient;\\n    private final NaverOauthConfig naverOauthConfig;\\n\\n    @Override\\n    public OauthServerType supportServer() {\\n        return OauthServerType.NAVER;\\n    }\\n\\n    @Override\\n    public OauthMember fetch(String authCode) {\\n        NaverToken tokenInfo = naverApiClient.fetchToken(tokenRequestParams(authCode));\\n        NaverMemberResponse naverMemberResponse = naverApiClient.fetchMember(\\"Bearer \\" + tokenInfo.accessToken());\\n        return naverMemberResponse.toDomain();\\n    }\\n\\n    private MultiValueMap<String, String> tokenRequestParams(String authCode) {\\n        MultiValueMap<String, String> params = new LinkedMultiValueMap<>();\\n        params.add(\\"grant_type\\", \\"authorization_code\\");\\n        params.add(\\"client_id\\", naverOauthConfig.clientId());\\n        params.add(\\"client_secret\\", naverOauthConfig.clientSecret());\\n        params.add(\\"code\\", authCode);\\n        params.add(\\"state\\", naverOauthConfig.state());\\n        return params;\\n    }\\n}\\n```\\n\\n\uc774\ub7ec\uba74 \ub124\uc774\ubc84 \ub85c\uadf8\uc778\ub3c4 \uad6c\ud604\uc774 \ub05d\ub0a9\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \ub124\uc774\ubc84 \ub85c\uadf8\uc778 \ud14c\uc2a4\ud2b8\\n\\n\ud655\uc778\ud558\uace0 \uc2f6\uc73c\uba74 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0 \ub2e4\uc74c \ucf54\ub4dc\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n```js\\nimport React, { useEffect } from \\"react\\";\\nimport { useLocation, useNavigate } from \\"react-router-dom\\";\\nimport axios from \\"axios\\";\\n\\nconst NaverRedirectPage = () => {\\n  const location = useLocation();\\n  const navigate = useNavigate();\\n\\n  const handleOAuthKakao = async (code) => {\\n    try {\\n      // \ub124\uc774\ubc84\ub85c\ubd80\ud130 \ubc1b\uc544\uc628 code\ub97c \uc11c\ubc84\uc5d0 \uc804\ub2ec\ud558\uc5ec \uce74\uce74\uc624\ub85c \ud68c\uc6d0\uac00\uc785 & \ub85c\uadf8\uc778\ud55c\ub2e4\\n      const response = await axios.get(\\n        `http://localhost:8080/oauth/login/naver?code=${code}`\\n      );\\n      const data = response.data; // \uc751\ub2f5 \ub370\uc774\ud130\\n      alert(\\"\ub85c\uadf8\uc778 \uc131\uacf5: \\" + data);\\n      navigate(\\"/success\\");\\n    } catch (error) {\\n      navigate(\\"/fail\\");\\n    }\\n  };\\n\\n  useEffect(() => {\\n    const searchParams = new URLSearchParams(location.search);\\n    const code = searchParams.get(\\"code\\"); // \ub124\uc774\ubc84\ub294 Redirect \uc2dc\ud0a4\uba74\uc11c code\ub97c \ucffc\ub9ac \uc2a4\ud2b8\ub9c1\uc73c\ub85c \uc900\ub2e4.\\n    if (code) {\\n      alert(\\"CODE = \\" + code);\\n      handleOAuthKakao(code);\\n    }\\n  }, [location]);\\n\\n  return (\\n    <div>\\n      <div>Processing...</div>\\n    </div>\\n  );\\n};\\n\\nexport default NaverRedirectPage;\\n```\\n\\nkakao\uc640 \ube44\uad50\ud574\uc11c axios.get\uc758 url\uc758 \ub9c8\uc9c0\ub9c9 \ubd80\ubd84\uc774 kakao \uc5d0\uc11c naver\ub85c\ub9cc \ubc14\ub00c\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n(\ub354 \uc774\uc058\uac8c \ud560 \uc218 \uc788\uc5c8\uc744 \uac70 \uac19\uc740\ub370, \uc81c\uac00 \ud504\ub860\ud2b8 \ud560 \uc904\uc744 \ubab0\ub77c\uc11c \uadf8\ub0e5 \uc774\ub807\uac8c \uc911\ubcf5 \ub9cc\ub4e4\uac8c\uc694..\u3160)\\n\\n\uadf8\ub9ac\uace0 \ub77c\uc6b0\ud305\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n```js\\nimport { BrowserRouter, Routes, Route } from \\"react-router-dom\\";\\nimport LoginPage from \\"./LoginPage\\";\\nimport KakaoRedirectPage from \\"./KakaoRedirectPage\\";\\nimport NaverRedirectPage from \\"./NaverRedirectPage\\";\\n\\nconst App = () => {\\n  return (\\n    <div className=\\"App\\">\\n      <BrowserRouter>\\n        <Routes>\\n          <Route path=\\"/\\" element={<LoginPage />}></Route>\\n          <Route\\n            path=\\"/oauth/redirected/kakao\\"\\n            element={<KakaoRedirectPage />}\\n          ></Route>\\n          <Route\\n            path=\\"/oauth/redirected/naver\\"\\n            element={<NaverRedirectPage />}\\n          ></Route>\\n        </Routes>\\n      </BrowserRouter>\\n    </div>\\n  );\\n};\\n\\nexport default App;\\n```\\n\\n\uba54\uc778 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub3c4 \ubc84\ud2bc\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n```js\\nimport React from \\"react\\";\\n\\nconst LoginPage = () => {\\n  const handleKakaoLoginClick = () => {\\n    window.location.href = \\"http://localhost:8080/oauth/kakao\\";\\n  };\\n\\n  const handleNaverLoginClick = () => {\\n    window.location.href = \\"http://localhost:8080/oauth/naver\\"; // Replace with your Naver login URL\\n  };\\n\\n  return (\\n    <div\\n      style={{\\n        display: \\"flex\\",\\n        justifyContent: \\"center\\",\\n        alignItems: \\"center\\",\\n        height: \\"100vh\\",\\n      }}\\n    >\\n      <div>\\n        <button\\n          onClick={handleKakaoLoginClick}\\n          style={{\\n            padding: \\"10px 20px\\",\\n            fontSize: \\"18px\\",\\n            borderRadius: \\"5px\\",\\n            cursor: \\"pointer\\",\\n            marginRight: \\"10px\\",\\n          }}\\n        >\\n          \uce74\uce74\uc624\ud1a1 \ub85c\uadf8\uc778\\n        </button>\\n        <button\\n          onClick={handleNaverLoginClick}\\n          style={{\\n            padding: \\"10px 20px\\",\\n            fontSize: \\"18px\\",\\n            borderRadius: \\"5px\\",\\n            cursor: \\"pointer\\",\\n          }}\\n        >\\n          \ub124\uc774\ubc84 \ub85c\uadf8\uc778\\n        </button>\\n      </div>\\n    </div>\\n  );\\n};\\n\\nexport default LoginPage;\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n\uc9c4\ud589\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n![naver sample1](./naver_sample1.png)\\n\\n<br />\\n\\n![naver sample2](./naver_sample2.png)\\n\\n<br />\\n\\n![naver sample3](./naver_sample3.png)\\n\\n<br />\\n\\n![naver sample4](./naver_sample4.png)\\n\\n<br />\\n\\n![naver sample5](./naver_sample5.png)\\n\\n<br />\\n\\n![naver sample6](./naver_sample6.png)\\n\\n<br />\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uc815\ub9d0 \uac04\ub2e8\ud558\uac8c Naver \ub85c\uadf8\uc778\ub3c4 \ucd94\uac00\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!"},{"id":"/mallang/cicd-series/cicd-1/cicd","metadata":{"permalink":"/team-blog/back-blog/mallang/cicd-series/cicd-1/cicd","source":"@site/@backBlog/mallang/cicd-series/cicd-1/cicd.mdx","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (1) \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","date":"2023-07-21T00:00:00.000Z","formattedDate":"2023\ub144 7\uc6d4 21\uc77c","tags":[{"label":"CI/CD","permalink":"/team-blog/back-blog/tags/ci-cd"},{"label":"\uc778\ud504\ub77c","permalink":"/team-blog/back-blog/tags/\uc778\ud504\ub77c"},{"label":"Github Actions","permalink":"/team-blog/back-blog/tags/github-actions"}],"readingTime":15.93,"hasTruncateMarker":true,"authors":[{"name":"donghun Shin","url":"https://github.com/shin-mallang","email":"huipulci1@naver.com","imageURL":"https://avatars.githubusercontent.com/u/52229930?v=4","key":"shin-mallang"}],"frontMatter":{"date":"2023-07-21T00:00:00.000Z","authors":"shin-mallang","title":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (1) \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654","description":"\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \ubc1c\uc804\uae30","keywords":["CI/CD","\uc778\ud504\ub77c"],"tags":["CI/CD","\uc778\ud504\ub77c","Github Actions"]},"prevItem":{"title":"OAuth2.0 \ub3c4\uc785\uae30","permalink":"/team-blog/back-blog/mallang/oauth/oauth"}},"content":"\uc140\ub7fd\uc787 CI/CD \ubc1c\uc804\uae30 - (1) \uc258 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \ud1b5\ud55c \ubc30\ud3ec \uc790\ub3d9\ud654\\n\\n\x3c!--truncate--\x3e\\n\\n## \ud83e\uddd0 \uc11c\ub860\\n\\n\uc548\ub155\ud558\uc138\uc694. \uc140\ub7fd\uc787\uc758 \ubc31\uc5d4\ub4dc \ub9d0\ub791\uc785\ub2c8\ub2e4.\\n\\n\uc140\ub7fd\uc787 \ud300\uc758 CI/CD \uc544\ud0a4\ud14d\ucc98\ub97c \uc18c\uac1c\ud574 \ub4dc\ub9ac\uae30 \uc704\ud574 \ucc3e\uc544\uc654\uc2b5\ub2c8\ub2e4 \ud83d\ude0e\\n\\n\uc140\ub7fd\uc787 \ud300\uc740 \uc8fc\uc5b4\uc9c4 \uc81c\uc57d \ub0b4\uc5d0\uc11c \ubc30\ud3ec \uc790\ub3d9\ud654\ub97c \ub2ec\uc131\ud558\uae30 \uc704\ud574 \ub9ce\uc740 \uace0\ubbfc\uc744 \ud558\uc600\uace0, \uc77c\ucc28\uc801\uc73c\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 CI/CD \uc544\ud0a4\ud14d\ucc98\ub97c \ub3c4\uc785\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n![CICD](./cicd.png)\\n\\n<br />\\n\\n\uc774\ub7ec\ud55c \uacfc\uc815\uc5d0\uc11c \uc0dd\uaca8\ub09c \uace0\ubbfc\ub4e4\uacfc \ubc1c\uc0dd\ud588\ub358 \ubb38\uc81c\ub4e4\uc744 \uc0b4\ud3b4\ubcf4\uba70 \uc804\uccb4\uc801\uc778 \uad6c\ucd95 \uacfc\uc815\uc744 \uc18c\uac1c\ud574 \ub4dc\ub9ac\ub824 \ud569\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uc81c\uc57d\uc870\uac74\uacfc \uc694\uad6c\uc0ac\ud56d\\n\\n### \ud83d\udda5\ufe0f \ucef4\ud4e8\ud305 \ud30c\uc6cc\\n\\n- \uc11c\ubc84 \uac1c\uc218: \ucd5c\ub300 3\ub300\\n- \uc11c\ubc84 \uc0ac\uc591: \ucd5c\ub300 t4g.small\\n- \uc2a4\ud1a0\ub9ac\uc9c0: \ucd5c\ub300 20GiB\\n\\n<br />\\n\\n### \ud83d\udcc3 \uc694\uad6c\uc0ac\ud56d\\n\\n- \uac1c\ubc1c \uc11c\ubc84\uc640 \ud504\ub85c\ub355\uc158 \uc11c\ubc84\uc758 \ubd84\ub9ac\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 \uc140\ub7fd\uc787 \ud300\uc758 git \ube0c\ub79c\uce58 \uc804\ub7b5\\n\\nCI/CD \uc544\ud0a4\ud14d\ucc98\uc5d0 \ub300\ud55c \uc18c\uac1c \uc804\uc5d0, \uc6d0\ud560\ud55c \uc124\uba85\uc744 \uc704\ud558\uc5ec \uc800\ud76c \ud300\uc758 git \ube0c\ub79c\uce58 \uc804\ub7b5\uc5d0 \ub300\ud574 \uc6b0\uc120 \uc18c\uac1c\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc140\ub7fd\uc787 \ud300\uc740 gitflow \uc804\ub7b5\uc744 \uc870\uae08 \uc218\uc815\ud558\uc5ec \ub2e4\uc74c\uacfc \uac19\uc774 5\uac1c\uc758 \ube0c\ub79c\uce58\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\\n\\n- `main` - \ud504\ub85c\ub355\uc158\uc6a9 \ube0c\ub79c\uce58\\n- `develop-backend` - \ubc31\uc5d4\ub4dc\uc758 \ub2e4\uc74c \ucd9c\uc2dc \ubc84\uc804\uc744 \uac1c\ubc1c\ud558\ub294 \ube0c\ub79c\uce58\\n- `develop-frontend`- \ud504\ub860\ud2b8\uc5d4\ub4dc\uc758 \ub2e4\uc74c \ucd9c\uc2dc \ubc84\uc804\uc744 \uac1c\ubc1c\ud558\ub294 \ube0c\ub79c\uce58\\n- `feature` - \uae30\ub2a5 \uac1c\ubc1c \ube0c\ub79c\uce58\\n- `hotfix` - main \ube0c\ub79c\uce58\uc5d0\uc11c \ubc1c\uc0dd\ud55c \ubc84\uadf8\ub97c \uc218\uc815\ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 \ube0c\ub79c\uce58\\n\\n<br />\\n\\n### \ud83d\udc33 main \ube0c\ub79c\uce58\\n\\n`main` \ube0c\ub79c\uce58\uc5d0 \uc874\uc7ac\ud558\ub294 \ucf54\ub4dc\ub294 \uc2e4\uc81c \uc11c\ube44\uc2a4\ub420 \ucf54\ub4dc\uc774\uae30 \ub54c\ubb38\uc5d0 \ud56d\uc0c1 \ubc30\ud3ec \uac00\ub2a5\ud55c \uc0c1\ud0dc\uc5ec\uc57c \ud558\uba70 \uae30\ub2a5\uc774 \uc644\uc804\ud788 \uad6c\ud604\ub41c \uc0c1\ud0dc\uc5ec\uc57c \ud569\ub2c8\ub2e4.<br/>\\n`main` \ube0c\ub79c\uce58\ub294 `develop-backend` \ube0c\ub79c\uce58\uc640 `develop-frontend` \ube0c\ub79c\uce58\uc5d0\uc11c \uae30\ub2a5\ub4e4\uc774 \uc644\uc131\ud55c \uc774\ud6c4 `merge`\ub429\ub2c8\ub2e4.\\n\\n<br />\\n\\n### \ud83d\udc33 develop-[backend/frontend] \ube0c\ub79c\uce58\\n\\ngit flow\uc758 `develop` \ube0c\ub79c\uce58\ub97c \uc800\ud76c\uc758 \uc0c1\ud669\uc5d0 \ub9de\uac8c \uc7ac\uad6c\uc131\ud55c \ube0c\ub79c\uce58\ub85c,\\n\ubc31\uc5d4\ub4dc\uc640 \ud504\ub860\ud2b8\uc5d4\ub4dc\uac00 \uac01\uac01 \uc11c\ub85c\uc758 \uc601\ud5a5\uc744 \ubc1b\uc9c0 \uc54a\uace0 \uac1c\ubc1c\uc744 \uc774\uc5b4\uac08 \uc218 \uc788\ub3c4\ub85d \ud558\uae30 \uc704\ud558\uc5ec \uc704\uc640 \uac19\uc774 \uad6c\uc131\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 \ud558\ub098\uc758 `Repository`\ub97c \uc0ac\uc6a9\ud558\uae30 \ub54c\ubb38\uc5d0, \ubc31\uc5d4\ub4dc\uc640 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc758 \ucf54\ub4dc \ud30c\uc77c \ubd84\ub9ac\ub3c4 \ud544\uc694\ud588\ub294\ub370\uc694,\\n\uc800\ud76c\ub294 \ucd5c\uc0c1\uc704 directory\uc5d0\uc11c `backend` \ud3f4\ub354\uc640 `frontend` \ud3f4\ub354\ub97c \ub450\uc5b4 \ucf54\ub4dc\ub97c \ubd84\ub9ac\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n`develop-backend` \ube0c\ub79c\uce58\uc5d0\uc11c\ub294 `backend` \ud3f4\ub354\uc5d0\uc11c\ub9cc \uc791\uc5c5\uc774 \uc774\ub8e8\uc5b4\uc9c0\uba70,\\n`develop-frontend` \ube0c\ub79c\uce58\uc5d0\uc11c\ub294 `frontend` \ud3f4\ub354\uc5d0\uc11c\ub9cc \uc791\uc5c5\uc774 \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4.\\n\\n<br />\\n\\n### \ud83d\udc33 feature \ube0c\ub79c\uce58\\n\\n`feature` \ube0c\ub79c\uce58\ub294 \uae30\ub2a5\uc744 \uac1c\ubc1c\ud558\ub294 \ube0c\ub79c\uce58\ub85c, \uae30\ubcf8\uc801\uc73c\ub85c `\uc774\uc288`\uc640 1\ub3001 \ub9e4\ud551 \ub429\ub2c8\ub2e4.<br/>\\n\uac1c\ubc1c\ud574\uc57c \ud558\ub294 \uae30\ub2a5\ub4e4\uc5d0 \ub300\ud558\uc5ec \uba3c\uc800 \uc774\uc288\ub97c \uc0dd\uc131\ud558\uba74, \uac01 \uc774\uc288\ubcc4 \ub2f4\ub2f9\uc790\uac00 \uc774\uc288\uc5d0 \ub300\uc751\ub418\ub294 `feature` \ube0c\ub79c\uce58\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.<br/>\\n\uae30\ub2a5\uc744 \uac1c\ubc1c\ub418\uba74 `feature` \ube0c\ub79c\uce58\uc5d0\uc11c `develop` \ube0c\ub79c\uce58\uc5d0 `PR`\uc744 \ub0a0\ub9bd\ub2c8\ub2e4.\\n\\n<br />\\n\\n### \ud83d\udc33 hotfix \ube0c\ub79c\uce58\\n\\n`hotfix` \ube0c\ub79c\uce58\ub294 `main` \ube0c\ub79c\uce58\uc5d0\uc11c \ubc1c\uc0dd\ud55c \ubc84\uadf8\ub97c \uae09\ud558\uac8c \uc218\uc815\ud574\uc57c \ud558\ub294 \uacbd\uc6b0 \uc0ac\uc6a9\ud558\ub294 \ube0c\ub79c\uce58\uc785\ub2c8\ub2e4.<br/>\\n\uc774\ub54c `hotfix` \ube0c\ub79c\uce58\uc758 \ubcc0\uacbd \uc0ac\ud56d\uc740 `main` \ube0c\ub79c\uce58\uc640 `develop` \ube0c\ub79c\uce58\uc5d0 \ubaa8\ub450 \ubc18\uc601\ub429\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 CI \uae30\uc220 \uc120\ud0dd\uacfc \uad6c\ucd95\\n\\n\uc800\ud76c \ud300\uc740 CI\ub97c \uc704\ud574 `Github Actions`\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n`Github Actions`\uac00 `Jenkins`\uc5d0 \ube44\ud574 \ud559\uc2b5 & \uc801\uc6a9\ud558\uae30 \uc27d\ub2e4\uace0 \ud310\ub2e8\ud588\uc73c\uba70, `Github Actions` \ub9cc\uc73c\ub85c\ub3c4 \uc6d0\ud558\ub294 \uae30\ub2a5\uc744 \ubaa8\ub450 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5c8\uae30\uc5d0 \uad73\uc774 `Jenkins`\ub97c \uc0ac\uc6a9\ud560 \uc774\uc720\uac00 \uc5c6\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ubb34\uc5c7\ubcf4\ub2e4\ub3c4 `Jenkins`\ub97c \ub3c4\uc785\ud55c\ub2e4\uba74 \uc774\ub97c \uc704\ud55c \uc11c\ubc84\ub97c \ud558\ub098 \ub354 \uc0ac\uc6a9\ud574\uc57c \ud558\ub294\ub370, \uc774\ub807\uac8c \ub418\uba74 \uc800\ud76c\uc5d0\uac8c \uc8fc\uc5b4\uc9c4 `\uc81c\uc57d\uc870\uac74`\uc744 \ub9cc\uc871\ud558\uba70 \ud504\ub85c\uc81d\ud2b8\ub97c \uc9c4\ud589\ud558\uae30 \uc5b4\ub835\ub2e4\ub294 \ud310\ub2e8\uc774 \ub4e4\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub798\uc11c \uc800\ud76c\ub294 \ubc31\uc5d4\ub4dc\uc640 \ud504\ub860\ud2b8\uc5d4\ub4dc \ubaa8\ub450 CI \uae30\uc220\ub85c\uc368 `Github Actions`\ub97c \ub3c4\uc785\ud588\uc73c\uba70, \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\uc744 \uc9c4\ud589\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n\\n### \ud83d\udc33 \ubc31\uc5d4\ub4dc CI workflow\\n\\n```yml\\nname: \u2728 Celuveat Backend CI \u2728\\n\\non:\\n  push:\\n    branches:\\n      - develop-backend\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n\\n  pull_request:\\n    branches:\\n      - develop-backend\\n      - main\\n    paths:\\n      - \\"backend/**\\"\\n\\npermissions:\\n  checks: write\\n  pull-requests: write\\n\\njobs:\\n  backend-test:\\n    runs-on: ubuntu-latest\\n    env:\\n      working-directory: ./backend\\n\\n    steps:\\n      - uses: actions/checkout@v3\\n\\n      - name: \u2728 JDK 17 \uc124\uc815\\n        uses: actions/setup-java@v3\\n        with:\\n          java-version: \\"17\\"\\n          distribution: \\"temurin\\"\\n\\n      - name: \u2728 Gradlew \uad8c\ud55c \uc124\uc815\\n        run: chmod +x ./gradlew\\n        working-directory: ${{ env.working-directory }}\\n\\n      - name: \u2728 \ud14c\uc2a4\ud2b8 \uc9c4\ud589\\n        run: ./gradlew test\\n        working-directory: ${{ env.working-directory }}\\n\\n      - name: \u2728 \ud14c\uc2a4\ud2b8 \uacb0\uacfc Report\\n        uses: EnricoMi/publish-unit-test-result-action@v2\\n        if: always()\\n        with:\\n          files: \\"**/build/test-results/**/*.xml\\"\\n\\n      - name: \u2728 \ud14c\uc2a4\ud2b8 \uc2e4\ud328 Comment\\n        uses: mikepenz/action-junit-report@v3\\n        if: always()\\n        with:\\n          report_paths: \\"**/build/test-results/test/TEST-*.xml\\"\\n```\\n\\n\uc774\ub7ec\ud55c \uc124\uc815\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 [\ub9d0\ub791\uc774\uc758 \ube14\ub85c\uadf8](https://ttl-blog.tistory.com/1350)\ub97c \ucc38\uace0\ud574\uc8fc\uc138\uc694.\\n\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ud504\ub860\ud2b8\uc5d4\ub4dc CI workflow\\n\\n```yml\\nname: \ud83c\udf54 Celuveat Frontend CI \ud83c\udf54\\n\\non:\\n  push:\\n    branches:\\n      - develop-frontend\\n      - main\\n    paths:\\n      - \\"frontend/**\\"\\n\\n  pull_request:\\n    branches:\\n      - develop-frontend\\n      - main\\n    paths:\\n      - \\"frontend/**\\"\\n\\njobs:\\n  frontend-test:\\n    runs-on: ubuntu-latest\\n    env:\\n      working-directory: ./frontend\\n\\n    name: \ud83c\udf54\ud14c\uc2a4\ud2b8 \ub531 \ub300\ub77c \ud83d\udca2\ud83d\udc4a\\n\\n    steps:\\n      - uses: actions/checkout@v3\\n\\n      - uses: actions/setup-node@v3\\n        with:\\n          node-version: \\"18.16.1\\"\\n\\n      - name: \ud83c\udf54 yarn install\\n        run: yarn install\\n        working-directory: ${{ env.working-directory }}\\n\\n      - name: \ud83c\udf54 eslint \ud14c\uc2a4\ud2b8\\n        run: yarn lint\\n        working-directory: ${{ env.working-directory }}\\n\\n      - name: \ud83c\udf54 React \ud504\ub85c\uc81d\ud2b8 \ube4c\ub4dc\\n        run: yarn build\\n        working-directory: ${{ env.working-directory }}\\n```\\n\\n\uc704\uc640 \uac19\uc774 \ubc31\uc5d4\ub4dc\uc640 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc758 CI workflow\ub97c \uc791\uc131\ud558\uc5ec develop-backend & develop-frontend \ube0c\ub79c\uce58\uc5d0 PR\uc774 \ubc1c\uc0d0\ud560 \ub54c\ub9c8\ub2e4 \ud14c\uc2a4\ud2b8\ub97c \uc218\ud589\ud558\ub3c4\ub85d \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n## \ud83e\uddd0 CD \uae30\uc220 \uc120\ud0dd\uacfc \uad6c\ucd95\\n\\n\ucc98\uc74c\uc5d0\ub294 CD\ub97c \uc704\ud55c \uae30\uc220\ub85c\uc368 `Jenkins`\ub97c \uc0ac\uc6a9\ud558\ub824 \ud588\uc2b5\ub2c8\ub2e4.\\n\uc800\ub97c \ud3ec\ud568\ud55c \uba87\uba87 \ud300\uc6d0\ub4e4\uc774 \uc774\ubbf8 \uacbd\ud5d8\ud574 \ubcf8 \uae30\uc220\uc774\uc5c8\uae30 \ub54c\ubb38\uc5d0, \uc801\uc6a9\ud558\ub294\ub370 \ud070 \uc5b4\ub824\uc6c0\uc774 \uc5c6\uc744 \uac83\uc774\ub77c \ud310\ub2e8\ud588\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\uadf8\ub7f0\ub370 \uc704\uc5d0\uc11c \uc5b8\uae09\ud55c `\uc81c\uc57d\uc870\uac74`\uc744 \uace0\ub824\ud55c \uacb0\uacfc, \ucd5c\uc885\uc801\uc73c\ub85c `Jenkins` \ub300\uc2e0 `Github Actions`\uc758 `self-hosted runners`\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \uacb0\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n### \ud83d\udc33 Jenkins \ub300\uc2e0 Github Actions\ub97c \uc0ac\uc6a9\ud55c \uc774\uc720\\n\\n\uc81c\uc57d\uc870\uac74 \uc18d\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud56d\ubaa9\uc774 \uc874\uc7ac\ud588\uc2b5\ub2c8\ub2e4.\\n\\n- \uc11c\ubc84 \uac1c\uc218: \ucd5c\ub300 3\ub300\\n- \uc11c\ubc84 \uc0ac\uc591: \ucd5c\ub300 t4g.small\\n\\n\uac1c\ubc1c \uc11c\ubc84\uc640 \ud504\ub85c\ub355\uc158 \uc11c\ubc84\ub97c \ubd84\ub9ac\ud558\uae30 \uc704\ud55c \uc694\uad6c\uc0ac\ud56d\uc744 \uace0\ub824\ud588\uc744 \ub54c, \uc6b0\uc120 \uc774\ub4e4\uc744 \uc704\ud55c \uc11c\ubc84\uac00 \ucd5c\uc18c\ud55c 2\ub300\ub294 \ud560\ub2f9\ub418\uc5b4\uc57c \ud588\uc2b5\ub2c8\ub2e4.<br/>\\n(\uac1c\ubc1c \uc11c\ubc84 1\ub300, \ud504\ub85c\ub355\uc158 \uc11c\ubc84 1\ub300)\\n\\n\ub610\ud55c \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc5ec\uc57c \ud588\uae30 \ub54c\ubb38\uc5d0, DB \uc804\uc6a9 \uc11c\ubc84\uac00 \ud55c \ub300 \ub354 \ud544\uc694\ud55c \uc0c1\ud669\uc774\uc5c8\uc2b5\ub2c8\ub2e4.<br/>\\n\uac1c\ubc1c \uc11c\ubc84\uc5d0\uc11c \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc124\uce58\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\ub3c4 \uc788\uc5c8\uc9c0\ub9cc, \ubcf4\uc548 & \uc131\ub2a5\uc0c1\uc758 \ubb38\uc81c\ub85c \uc778\ud574 \uc774\ub294 \uc88b\uc740 \ubc29\ubc95\uc774 \uc544\ub2c8\ub77c \ud310\ub2e8\ud558\uc600\uace0, \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc6a9 \uc11c\ubc84\ub97c \ub530\ub85c \ub450\uae30\ub85c \uacb0\uc815\ud558\uc600\uc2b5\ub2c8\ub2e4.\\n\\n\ucd5c\uc885\uc801\uc73c\ub85c \uac1c\ubc1c, \ud504\ub85c\ub355\uc158, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc11c\ubc84\ub97c \uac01\uac01 \ubd84\ub9ac\ud558\uc5ec \uc0ac\uc6a9\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub7ec\ud55c \uc0c1\ud669\uc774\uc5c8\uae30\uc5d0 CD\ub97c \uc704\ud574\uc11c \ucd94\uac00\ub85c \uc11c\ubc84\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc5c8\uace0, \uacb0\uad6d \uae30\uc874 \uc11c\ubc84\uc5d0 \ucd94\uac00\ud558\ub294 \uc2dd\uc73c\ub85c \uad6c\uc131\ud558\uc5ec\uc57c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n\uc774\ub54c \uac01 \uc11c\ubc84\uc758 \uc0ac\uc591\uc778 `t4g.small`\uc758 \uc2a4\ud399\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4\\n\\n- vCPU: 2\\n- RAM: 2 GiB\\n\\nRAM\uc774 2GB\ubc16\uc5d0 \uc548\ub418\uae30 \ub54c\ubb38\uc5d0 \uba54\ubaa8\ub9ac\ub97c \ucd5c\ub300\ud55c \uc801\uac8c \uc0ac\uc6a9\ud558\ub294 \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc5ec\uc57c \ud588\uc73c\uba70, \uc774\ub97c \uc704\ud574 `Jenkins`\uc640 `Github Actions`\uc758 `self-hosted runners`\ub97c \ube44\uad50\ud588\uc2b5\ub2c8\ub2e4.\\n\\n\ube44\uad50 \uacb0\uacfc\ub294 `Github Actions`\uc758 `self-hosted runners`\uac00 `Jenkins`\ubcf4\ub2e4 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \ud6e8\uc52c \ub0ae\uc558\uace0, \ub530\ub77c\uc11c `Github Actions`\ub97c \ud1b5\ud574 CD\ub97c \uad6c\ucd95\ud558\uae30\ub85c \uacb0\uc815\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ucc38\uace0 - \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ube44\uad50\\n\\n\ube44\uad50 \uc2dc \uacf5\ud1b5 \uc0ac\ud56d\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n\\n- Swap \uba54\ubaa8\ub9ac 1.5 GB \ud560\ub2f9\\n- java 17 \ubc84\uc804 \uc124\uce58\\n\\n<br />\\n\\n#### \ud83d\ude80 \uae30\ubcf8\uc801\uc778 \uc11c\ubc84\uc758 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\\n\\n\uc790\ubc14\ub9cc\uc744 \uae54\uc544\ub454 \uc11c\ubc84\uc758 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.\\n![basic-java](./\uc790\ubc14\uc124\uce58\uae30\ubcf8\uc0c1\ud0dc.png)\\n\\n<br />\\n<br />\\n\\n#### \ud83d\ude80 Github Actions self-hosted runner\\n\\n\ub2e8\uc21c Runner \uc124\uce58 \ud6c4 \uc2e4\ud589 \uc0c1\ud0dc\uc785\ub2c8\ub2e4.\\n![actions-basic](./\uae43\ud5d9\uc561\uc158\uae30\ubcf8.png)\\n\\n<br />\\n\\n\uc6f9\ud6c5\uc73c\ub85c runner\uac00 \ub3d9\uc791\ud558\uc5ec bootJar\uc744 \uc2e4\ud589\ud560 \ub54c\uc758 \ucd5c\ub300 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc785\ub2c8\ub2e4.\\n![actions-max](./\uae43\ud5d9\uc561\uc158\ucd5c\ub300.png)\\n\\n<br />\\n<br />\\n\\n#### \ud83d\ude80 Jenkins\\n\\nJenkins \uc124\uce58 \ud6c4 \ub2e8\uc21c \uc2e4\ud589 \uc0c1\ud0dc\uc785\ub2c8\ub2e4.\\n![jenkins-basic](./jenkins\uae30\ubcf8.png)\\n\\n\uc6f9\ud6c5\uc73c\ub85c \uc820\ud0a8\uc2a4\uac00 \ub3d9\uc791\ud558\uc5ec bootJar\uc744 \uc2e4\ud589\ud560 \ub54c\uc758 \ucd5c\ub300 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc785\ub2c8\ub2e4.\\n![jenkins-max](./jenkins\ucd5c\ub300.png)\\n\\n<br />\\n<br />\\n<br />\\n\\n\uc774\ub807\ub4ef \uac04\ub2e8\ud55c \ube44\uad50\ub97c \ud1b5\ud574\uc11c\ub3c4 `Jenkins`\uac00 `Github Actions` \uc758 `self-hosted runners`\ubcf4\ub2e4 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \ud544\uc694\ub85c \ud558\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.\\n\\n\ucd5c\uc885\uc801\uc73c\ub85c \uc800\ud76c \ud300\uc740 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\ub3c4 \uc801\uace0, \uc801\uc6a9\ud558\uae30\ub3c4 \uc26c\uc6b4(?) `Github Actions self-hosted runners`\ub97c \uc0ac\uc6a9\ud558\uae30\ub85c \ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ubc31\uc5d4\ub4dc DEV\uc6a9 CD workflow\\n\\n```yml\\nname: \u2728 Celuveat backend DEV CD \u2728\\n\\non:\\n  push:\\n    branches:\\n      - develop-backend\\n    paths:\\n      - \\"backend/**\\"\\n\\njobs:\\n  deploy-backend:\\n    runs-on: self-hosted\\n\\n    steps:\\n      - name: \u2728 Run Backend Deploy Script\\n        run: |\\n          cd ~\\n          sudo sh deploy-backend.sh\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ubc31\uc5d4\ub4dc DEV\uc6a9 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\\n\\n```bash\\n#!/bin/sh\\n\\necho() {\\n    command echo \\"$(date \'+%Y-%m-%d %H:%M:%S\') - $*\\"\\n}\\n\\nPROJECT_PATH=/home/ubuntu/2023-celuveat\\nPROJECT_NAME=backend\\nPORT=8080\\nBUILD_PATH=build/libs\\nJAR_NAME=celuveat-0.0.1-SNAPSHOT.jar\\n\\n\\necho \\"\\\\n \u2728   [$PROJECT_PATH] \uacbd\ub85c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\\\n\\"\\ncd $PROJECT_PATH\\n\\necho \\" \u2728   develop-backend \ube0c\ub79c\uce58\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4!\\\\n\\"\\ngit switch develop-backend\\n\\necho \\"\\\\n \u2728   [$PROJECT_NAME] \uacbd\ub85c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\\\n\\"\\ncd ./$PROJECT_NAME\\n\\necho \\" \u2728    \ucd5c\uc2e0 \ucf54\ub4dc\ub97c PULL \ud569\ub2c8\ub2e4!\\\\n\\"\\ngit pull\\n\\n\\necho \\" \u2728   \ud504\ub85c\uc81d\ud2b8\ub97c \uc0c8\ub86d\uac8c \ube4c\ub4dc\ud569\ub2c8\ub2e4.\\\\n\\"\\n./gradlew clean build\\n\\necho \\" \u2728   [$PORT] \ubc88 \ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ucc3e\uc2b5\ub2c8\ub2e4...\\\\n\\"\\n\\nPID=$(lsof -i :$PORT -t)\\n\\nif [ -z $PID ]; then\\n\\techo \\" \ud83c\udf89   \uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc5c6\uc5b4\uc11c \uace7\ubc14\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4.\\\\n\\"\\n\\nelse\\n\\techo \\" \u274c   \uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc788\uc5b4\uc11c \uc774\ub97c \uc885\ub8cc\ud569\ub2c8\ub2e4. [PID = $PID]\\\\n\\"\\n\\tkill -15 $PID\\nfi\\n\\necho \\" \u2728   \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud558\ub294\ub370 \ud544\uc694\ud55c \ud658\uacbd\ubcc0\uc218\ub97c \uc138\ud305\ud569\ub2c8\ub2e4.\\\\n\\"\\n\\nexport SPRING_PROFILES_ACTIVE=\\"dev\\"\\nexport DB_DRIVER_CLASS_NAME=\\"com.mysql.cj.jdbc.Driver\\"\\nexport DB_URL=\\"jdbc:mysql://[\ube44\ubc00\uc785\ub2c8\ub2f9]\\"\\nexport DB_USERNAME=\\"\ube44\ubc00\uc785\ub2c8\ub2f9\\"\\nexport DB_PASSWORD=\\"\ube44\ubc00\uc785\ub2c8\ub2f9\\"\\nexport CORS_ALLOW_ORIGINS=\\"http://127.0.0.1:3000\\"\\n\\necho \\" \ud83c\udf89   \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc2e4\ud589\ud569\ub2c8\ub2e4~ \ud83c\udf89\\\\n\\"\\n\\ncurrent_date=$(date \'+%Y-%m-%dT%H-%M\')\\nBACKEND_LOG_FILE=\\"backend-log-$current_date.log\\"\\nnohup java -jar $PROJECT_PATH/$PROJECT_NAME/$BUILD_PATH/$JAR_NAME > /home/ubuntu/log/backend/$BACKEND_LOG_FILE 2>&1 &\\n```\\n\\n\uc870\uae08 \ub354 \uace0\ub3c4\ud654\uac00 \ud544\uc694\ud558\uc9c0\ub9cc, \uc6b0\uc120\uc740 \uac04\ub2e8\ud558\uac8c\ub9cc \uc791\uc131\ud588\uc2b5\ub2c8\ub2e4.\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ud504\ub860\ud2b8\uc5d4\ub4dc DEV\uc6a9 CD workflow\\n\\n```yml\\nname: \ud83c\udf54 Celuveat frontend DEV CD \ud83c\udf54\\n\\non:\\n  push:\\n    branches:\\n      - develop-frontend\\n    paths:\\n      - \\"frontend/**\\"\\n\\njobs:\\n  deploy-frontend:\\n    runs-on: self-hosted\\n\\n    steps:\\n      - name: \ud83c\udf54 .env \ud30c\uc77c \uc138\ud305\\n        run: |\\n          touch ~/frontend-env/.env\\n          echo KAKAO_MAP_API_KEY=${{ secrets.KAKAO_MAP_API_KEY }} >> ~/frontend-env/.env\\n\\n      - name: \ud83c\udf54 Run Frontend Deploy Script\\n        run: |\\n          cd ~\\n          sudo sh deploy-frontend.sh\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n### \ud83d\udc33 \ud504\ub860\ud2b8\uc5d4\ub4dc DEV\uc6a9 \ubc30\ud3ec \uc2a4\ud06c\ub9bd\ud2b8\\n\\n```bash\\n#!/bin/sh\\n\\necho() {\\n    command echo \\"$(date \'+%Y-%m-%d %H:%M:%S\') - $*\\"\\n}\\n\\nPROJECT_PATH=/home/ubuntu/2023-celuveat\\nPROJECT_NAME=frontend\\nPORT=3000\\n\\necho \\"\\\\n \u2728   [$PROJECT_PATH] \uacbd\ub85c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\\\n\\"\\ncd $PROJECT_PATH\\n\\necho \\" \u2728   develop-frontend \ube0c\ub79c\uce58\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4!\\\\n\\"\\ngit switch develop-frontend\\n\\n\\necho \\"\\\\n \u2728   [$PROJECT_NAME] \uacbd\ub85c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.\\\\n\\"\\ncd ./$PROJECT_NAME\\n\\necho \\" \u2728    \ucd5c\uc2e0 \ucf54\ub4dc\ub97c PULL \ud569\ub2c8\ub2e4!\\\\n\\"\\ngit pull\\n\\necho \\" \u2728   yarn install & yarn build \ub85c \ube4c\ub4dc\ud569\ub2c8\ub2e4.\\\\n\\"\\nyarn install\\nyarn build\\n\\necho \\" \u2728   [$PORT] \ubc88 \ud3ec\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ucc3e\uc2b5\ub2c8\ub2e4...\\\\n\\"\\n\\nPID=$(lsof -i :$PORT -t)\\n\\nif [ -z $PID ]; then\\n\\techo \\" \ud83c\udf89   \uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc5c6\uc5b4\uc11c \uace7\ubc14\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4.\\\\n\\"\\n\\nelse\\n\\techo \\" \u274c   \uc2e4\ud589\uc911\uc778 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc788\uc5b4\uc11c \uc774\ub97c \uc885\ub8cc\ud569\ub2c8\ub2e4. [PID = $PID]\\\\n\\"\\n\\tkill -15 $PID\\nfi\\n\\necho \\" \u2728   .env \ud30c\uc77c \ubcf5\uc0ac\\\\n\\"\\ncd /home/ubuntu\\nmv /home/ubuntu/frontend-env/.env $PROJECT_PATH/$PROJECT_NAME\\n\\ncd $PROJECT_PATH/$PROJECT_NAME\\npwd\\n\\necho \\" \u2728   \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc2e4\ud589\\\\n\\"\\ncurrent_date=$(date \'+%Y-%m-%dT%H-%M\')\\nFRONTEND_LOG_FILE=\\"frontend-log-$current_date.log\\"\\nnohup yarn start -- --port $PORT > /home/ubuntu/log/frontend/$FRONTEND_LOG_FILE 2>&1 &\\n```\\n\\n<br />\\n<br />\\n<br />\\n\\n## \ud83d\ude0e \ub9c8\ubb34\ub9ac\\n\\n\uc774\ub807\uac8c \ud574\uc11c \uc140\ub7fd\uc787 \ud300\uc758 CI/CD \uc544\ud0a4\ud14d\ucc98\ub97c \uc0b4\ud3b4\ubcf4\uc558\uc2b5\ub2c8\ub2e4.\\n\uc774\uac83\ubcf4\ub2e4 \ub354 \uc88b\uc740 \ub300\uc548\uc774 \uc788\uc744 \uc218\ub3c4 \uc788\uaca0\uc9c0\ub9cc, \ube60\ub974\uac8c \uac1c\ubc1c\uc744 \uc9c4\ud589\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uacfc,\\n\ud300\uc6d0 \ub300\ubd80\ubd84\uc774 \uc9c0\uc2dd\uc774 \ubcc4\ub85c \uc5c6\ub294 \uc0c1\ud0dc\uc5d0\uc11c \uc801\uc6a9\ud558\uae30 \uc218\uc6d4\ud55c \uad6c\uc870\ub97c \ucc3e\ub2e4 \ubcf4\ub2c8 \uc774\ub7ec\ud55c \uad6c\uc870\ub85c \uadc0\uacb0\ub41c \uac83 \uac19\uc2b5\ub2c8\ub2e4.\\n\\n\uc544\uc9c1 \uc791\uc131\ub418\uc9c0 \uc54a\uc740 \uc2e4\uc81c \ud504\ub85c\ub355\ud2b8\uc6a9 CD Workflow\ub294 \ub2e4\uc74c \uae00\uc5d0\uc11c \uc791\uc131\ud558\ub3c4\ub85d \ud558\uaca0\uc2b5\ub2c8\ub2e4.\\n\\n\uc77d\uc5b4\uc8fc\uc154\uc11c \uac10\uc0ac\ud569\ub2c8\ub2e4 \ud83d\ude0a\\n\\n<br />\\n<br />\\n<br />"}]}')}}]);